Updating build index: /Users/runner/conda/conda-bld

TEST START: tango-0.5.7-py_0.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpoekou32t/info/recipe/conda_build_config.yaml
  Package                  Version  Build               Channel                                    Size
─────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
─────────────────────────────────────────────────────────────────────────────────────────────────────────

  + biopython                 1.79  py39h89e85a6_0      conda-forge/osx-64                         3 MB
  + boost-cpp               1.74.0  hff03dee_4          conda-forge/osx-64                        16 MB
  + bzip2                    1.0.8  h0d85af4_4          conda-forge/osx-64                       Cached
  + ca-certificates      2021.5.30  h033912b_0          conda-forge/osx-64                       Cached
  + colorama                 0.4.4  pyh9f0ad1d_0        conda-forge/noarch                       Cached
  + dbus                    1.13.6  ha13b53f_2          conda-forge/osx-64                       544 KB
  + diamond                 2.0.11  h4de6764_0          bioconda/osx-64                            2 MB
  + ete3                     3.1.2  pyh9f0ad1d_0        conda-forge/noarch                         2 MB
  + expat                    2.4.1  he49afe7_0          conda-forge/osx-64                       143 KB
  + gettext               0.19.8.1  h7937167_1005       conda-forge/osx-64                         3 MB
  + glib                    2.68.4  he49afe7_0          conda-forge/osx-64                       429 KB
  + glib-tools              2.68.4  he49afe7_0          conda-forge/osx-64                        81 KB
  + icu                       68.1  h74dc148_0          conda-forge/osx-64                       Cached
  + jpeg                        9d  hbcb3906_0          conda-forge/osx-64                       250 KB
  + krb5                    1.19.2  hcfbf3a7_0          conda-forge/osx-64                       Cached
  + libblas                  3.9.0  11_osx64_openblas   conda-forge/osx-64                       Cached
  + libcblas                 3.9.0  11_osx64_openblas   conda-forge/osx-64                       Cached
  + libclang                11.1.0  default_he082bbe_1  conda-forge/osx-64                        14 MB
  + libcxx                  12.0.1  habf9029_0          conda-forge/osx-64                       Cached
  + libedit           3.1.20191231  h0678c8f_2          conda-forge/osx-64                       Cached
  + libffi                     3.3  h046ec9c_2          conda-forge/osx-64                       Cached
  + libgfortran              5.0.0  9_3_0_h6c81a4c_23   conda-forge/osx-64                       Cached
  + libgfortran5             9.3.0  h6c81a4c_23         conda-forge/osx-64                       Cached
  + libglib                 2.68.4  hd556434_0          conda-forge/osx-64                         3 MB
  + libiconv                  1.16  haf1e3a3_0          conda-forge/osx-64                       Cached
  + liblapack                3.9.0  11_osx64_openblas   conda-forge/osx-64                        11 KB
  + libllvm11               11.1.0  hd011deb_2          conda-forge/osx-64                        22 MB
  + libopenblas             0.3.17  openmp_h3351f45_1   conda-forge/osx-64                       Cached
  + libpng                  1.6.37  h7cec526_2          conda-forge/osx-64                       313 KB
  + libpq                     13.3  hea3049e_0          conda-forge/osx-64                         3 MB
  + libxcb                    1.13  h35c211d_1003       conda-forge/osx-64                       306 KB
  + libxml2                 2.9.12  h93ec3fd_0          conda-forge/osx-64                       Cached
  + libxslt                 1.1.33  h5739fc3_2          conda-forge/osx-64                       488 KB
  + llvm-openmp             12.0.1  hda6cdc1_1          conda-forge/osx-64                       Cached
  + lxml                     4.6.3  py39hf41e7f8_0      conda-forge/osx-64                         1 MB
  + lz4-c                    1.9.3  he49afe7_1          conda-forge/osx-64                       Cached
  + mysql-common            8.0.25  h694c41f_2          conda-forge/osx-64                         2 MB
  + mysql-libs              8.0.25  h115446f_2          conda-forge/osx-64                         2 MB
  + ncurses                    6.2  h2e338ed_4          conda-forge/osx-64                       Cached
  + nspr                      4.30  hcd9eead_0          conda-forge/osx-64                       246 KB
  + nss                       3.69  h31e2bf1_0          conda-forge/osx-64                         2 MB
  + numpy                   1.21.2  py39h7eed0ac_0      conda-forge/osx-64                         6 MB
  + openssl                 1.1.1l  h0d85af4_0          conda-forge/osx-64                       Cached
  + pandas                   1.3.2  py39h4d6be9b_0      conda-forge/osx-64                        12 MB
  + pcre                      8.45  he49afe7_0          conda-forge/osx-64                       220 KB
  + pip                     21.2.4  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + pthread-stubs              0.4  hc929b4f_1001       conda-forge/osx-64                         6 KB
  + pyqt                    5.12.3  py39h6e9494a_7      conda-forge/osx-64                        21 KB
  + pyqt-impl               5.12.3  py39hef7122c_7      conda-forge/osx-64                         5 MB
  + pyqt5-sip              4.19.18  py39hd8f94c5_7      conda-forge/osx-64                       275 KB
  + pyqtchart                 5.12  py39hef7122c_7      conda-forge/osx-64                       212 KB
  + pyqtwebengine           5.12.1  py39hef7122c_7      conda-forge/osx-64                       140 KB
  + python                   3.9.7  hd187cdc_0_cpython  conda-forge/osx-64                       Cached
  + python-dateutil          2.8.2  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + python_abi                 3.9  2_cp39              conda-forge/osx-64                       Cached
  + pytz                    2021.1  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + qt                      5.12.9  h126340a_4          conda-forge/osx-64                        88 MB
  + readline                   8.1  h05e3726_0          conda-forge/osx-64                       Cached
  + scipy                    1.7.1  py39h056f1c0_0      conda-forge/osx-64                        20 MB
  + setuptools              57.4.0  py39h6e9494a_0      conda-forge/osx-64                       Cached
  + six                     1.16.0  pyh6c4a22f_0        conda-forge/noarch                       Cached
  + sqlite                  3.36.0  h23a322b_0          conda-forge/osx-64                       Cached
  + tango                    0.5.7  py_0                /Users/runner/conda/conda-bld/osx-64      25 KB
  + tk                      8.6.11  h5dbffcc_1          conda-forge/osx-64                       Cached
  + tqdm                    4.62.2  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + tzdata                   2021a  he74cb21_1          conda-forge/noarch                       Cached
  + wheel                   0.37.0  pyhd8ed1ab_1        conda-forge/noarch                       Cached
  + xorg-kbproto             1.0.7  h35c211d_1002       conda-forge/osx-64                        27 KB
  + xorg-libice             1.0.10  h0d85af4_0          conda-forge/osx-64                        48 KB
  + xorg-libsm               1.2.3  h0d85af4_1000       conda-forge/osx-64                        22 KB
  + xorg-libx11              1.7.2  h0d85af4_0          conda-forge/osx-64                       886 KB
  + xorg-libxau              1.0.9  h35c211d_0          conda-forge/osx-64                        11 KB
  + xorg-libxdmcp            1.1.3  h35c211d_0          conda-forge/osx-64                        17 KB
  + xorg-libxext             1.3.4  h0d85af4_1          conda-forge/osx-64                        43 KB
  + xorg-libxrender         0.9.10  h0d85af4_1003       conda-forge/osx-64                        24 KB
  + xorg-renderproto        0.11.1  h0d85af4_1002       conda-forge/osx-64                         9 KB
  + xorg-xextproto           7.3.0  h35c211d_1002       conda-forge/osx-64                        28 KB
  + xorg-xproto             7.0.31  h35c211d_1007       conda-forge/osx-64                        73 KB
  + xz                       5.2.5  haf1e3a3_1          conda-forge/osx-64                       Cached
  + zlib                    1.2.11  h7795811_1010       conda-forge/osx-64                       Cached
  + zstd                     1.5.0  h582d3a0_0          conda-forge/osx-64                       Cached

  Summary:

  Install: 81 packages

  Total download: 209 MB

─────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/tango_1630935866117/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla


The following NEW packages will be INSTALLED:

    biopython:        1.79-py39h89e85a6_0       conda-forge
    boost-cpp:        1.74.0-hff03dee_4         conda-forge
    bzip2:            1.0.8-h0d85af4_4          conda-forge
    ca-certificates:  2021.5.30-h033912b_0      conda-forge
    colorama:         0.4.4-pyh9f0ad1d_0        conda-forge
    dbus:             1.13.6-ha13b53f_2         conda-forge
    diamond:          2.0.11-h4de6764_0         bioconda   
    ete3:             3.1.2-pyh9f0ad1d_0        conda-forge
    expat:            2.4.1-he49afe7_0          conda-forge
    gettext:          0.19.8.1-h7937167_1005    conda-forge
    glib:             2.68.4-he49afe7_0         conda-forge
    glib-tools:       2.68.4-he49afe7_0         conda-forge
    icu:              68.1-h74dc148_0           conda-forge
    jpeg:             9d-hbcb3906_0             conda-forge
    krb5:             1.19.2-hcfbf3a7_0         conda-forge
    libblas:          3.9.0-11_osx64_openblas   conda-forge
    libcblas:         3.9.0-11_osx64_openblas   conda-forge
    libclang:         11.1.0-default_he082bbe_1 conda-forge
    libcxx:           12.0.1-habf9029_0         conda-forge
    libedit:          3.1.20191231-h0678c8f_2   conda-forge
    libffi:           3.3-h046ec9c_2            conda-forge
    libgfortran:      5.0.0-9_3_0_h6c81a4c_23   conda-forge
    libgfortran5:     9.3.0-h6c81a4c_23         conda-forge
    libglib:          2.68.4-hd556434_0         conda-forge
    libiconv:         1.16-haf1e3a3_0           conda-forge
    liblapack:        3.9.0-11_osx64_openblas   conda-forge
    libllvm11:        11.1.0-hd011deb_2         conda-forge
    libopenblas:      0.3.17-openmp_h3351f45_1  conda-forge
    libpng:           1.6.37-h7cec526_2         conda-forge
    libpq:            13.3-hea3049e_0           conda-forge
    libxcb:           1.13-h35c211d_1003        conda-forge
    libxml2:          2.9.12-h93ec3fd_0         conda-forge
    libxslt:          1.1.33-h5739fc3_2         conda-forge
    llvm-openmp:      12.0.1-hda6cdc1_1         conda-forge
    lxml:             4.6.3-py39hf41e7f8_0      conda-forge
    lz4-c:            1.9.3-he49afe7_1          conda-forge
    mysql-common:     8.0.25-h694c41f_2         conda-forge
    mysql-libs:       8.0.25-h115446f_2         conda-forge
    ncurses:          6.2-h2e338ed_4            conda-forge
    nspr:             4.30-hcd9eead_0           conda-forge
    nss:              3.69-h31e2bf1_0           conda-forge
    numpy:            1.21.2-py39h7eed0ac_0     conda-forge
    openssl:          1.1.1l-h0d85af4_0         conda-forge
    pandas:           1.3.2-py39h4d6be9b_0      conda-forge
    pcre:             8.45-he49afe7_0           conda-forge
    pip:              21.2.4-pyhd8ed1ab_0       conda-forge
    pthread-stubs:    0.4-hc929b4f_1001         conda-forge
    pyqt:             5.12.3-py39h6e9494a_7     conda-forge
    pyqt-impl:        5.12.3-py39hef7122c_7     conda-forge
    pyqt5-sip:        4.19.18-py39hd8f94c5_7    conda-forge
    pyqtchart:        5.12-py39hef7122c_7       conda-forge
    pyqtwebengine:    5.12.1-py39hef7122c_7     conda-forge
    python:           3.9.7-hd187cdc_0_cpython  conda-forge
    python-dateutil:  2.8.2-pyhd8ed1ab_0        conda-forge
    python_abi:       3.9-2_cp39                conda-forge
    pytz:             2021.1-pyhd8ed1ab_0       conda-forge
    qt:               5.12.9-h126340a_4         conda-forge
    readline:         8.1-h05e3726_0            conda-forge
    scipy:            1.7.1-py39h056f1c0_0      conda-forge
    setuptools:       57.4.0-py39h6e9494a_0     conda-forge
    six:              1.16.0-pyh6c4a22f_0       conda-forge
    sqlite:           3.36.0-h23a322b_0         conda-forge
    tango:            0.5.7-py_0                local      
    tk:               8.6.11-h5dbffcc_1         conda-forge
    tqdm:             4.62.2-pyhd8ed1ab_0       conda-forge
    tzdata:           2021a-he74cb21_1          conda-forge
    wheel:            0.37.0-pyhd8ed1ab_1       conda-forge
    xorg-kbproto:     1.0.7-h35c211d_1002       conda-forge
    xorg-libice:      1.0.10-h0d85af4_0         conda-forge
    xorg-libsm:       1.2.3-h0d85af4_1000       conda-forge
    xorg-libx11:      1.7.2-h0d85af4_0          conda-forge
    xorg-libxau:      1.0.9-h35c211d_0          conda-forge
    xorg-libxdmcp:    1.1.3-h35c211d_0          conda-forge
    xorg-libxext:     1.3.4-h0d85af4_1          conda-forge
    xorg-libxrender:  0.9.10-h0d85af4_1003      conda-forge
    xorg-renderproto: 0.11.1-h0d85af4_1002      conda-forge
    xorg-xextproto:   7.3.0-h35c211d_1002       conda-forge
    xorg-xproto:      7.0.31-h35c211d_1007      conda-forge
    xz:               5.2.5-haf1e3a3_1          conda-forge
    zlib:             1.2.11-h7795811_1010      conda-forge
    zstd:             1.5.0-h582d3a0_0          conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/tango_1630935866117/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla
export SRC_DIR=/Users/runner/conda/conda-bld/tango_1630935866117/test_tmp
import: 'tango'
import: 'tango'
usage: tango [-h] [-v]
             {download,format,update,build,search,assign,transfer} ...

optional arguments:
  -h, --help            show this help message and exit
  -v, --version         show program's version number and exit

subcommands:
  valid subcommands

  {download,format,update,build,search,assign,transfer}
    download            Download fasta file and NCBI taxonomy files
    format              Format fasta file for diamond and create protein2taxid
                        map
    update              Update protein to taxid map file with new sequence ids
    build               Build diamond database from downloaded files
    search              Run diamond blastx with nucleotide fasta file
    assign              Assigns taxonomy from diamond output
    transfer            Transfer taxonomy from ORFs to contigs
usage: tango download [-h] [-d DLDIR] [--tmpdir TMPDIR] [-t TAXDIR]
                      [--sqlitedb SQLITEDB] [-f] [--skip_check] [--skip_idmap]
                      {uniref100,uniref90,uniref50,nr,taxonomy,idmap}

positional arguments:
  {uniref100,uniref90,uniref50,nr,taxonomy,idmap}
                        Database to download. Defaults to 'uniref100'

optional arguments:
  -h, --help            show this help message and exit
  -d DLDIR, --dldir DLDIR
                        Write files to this directory. Defaults to db name in
                        current directory. Will be created if missing.
  --tmpdir TMPDIR       Temporary directory for downloading files
  -t TAXDIR, --taxdir TAXDIR
                        Directory to store NCBI taxdump files. Defaults to
                        'taxonomy/' in current directory
  --sqlitedb SQLITEDB   Name of ete3 sqlite file to be created within
                        --taxdir. Defaults to 'taxonomy.sqlite'
  -f, --force           Overwrite downloaded files
  --skip_check          Skip check of downloaded fasta file. Default: False
  --skip_idmap          Skip download of seqid->taxid mapfile (only applies to
                        'nr' database.
usage: tango format [-h] [-f] [--forceidmap] [-m TAXIDMAP]
                    [--maxidlen MAXIDLEN] [--tmpdir TMPDIR]
                    fastafile reformatted

positional arguments:
  fastafile             Specify protein fasta to reformat
  reformatted           Path to reformatted fastafile

optional arguments:
  -h, --help            show this help message and exit
  -f, --force           Force overwrite of existing reformatted fastafile
  --forceidmap          Force overwrite of existing accession2taxid mapfile
  -m TAXIDMAP, --taxidmap TAXIDMAP
                        Protein accession to taxid mapfile. For UniRef this
                        file is created from information in the fasta headers
                        and stored in a file named prot.accession2taxid.gz in
                        the same directory as the reformatted fasta file.
                        Specify another path here.
  --maxidlen MAXIDLEN   Maximum allowed length of sequence ids. Defaults to 14
                        (required by diamond for adding taxonomy info to
                        database). Ids longer than this are written to a file
                        with the original id
  --tmpdir TMPDIR       Temporary directory for writing fasta files
usage: tango update [-h] taxonmap idfile newfile

positional arguments:
  taxonmap    Existing prot.accession2taxid.gz file
  idfile      File mapping long sequence ids to new ids
  newfile     Updated mapfile

optional arguments:
  -h, --help  show this help message and exit
usage: tango build [-h] [-d DBFILE] [-p CPUS] fastafile taxonmap taxonnodes

positional arguments:
  fastafile             Specify (reformatted) fasta file
  taxonmap              Protein accession to taxid mapfile (must be gzipped)
  taxonnodes            nodes.dmp file from NCBI taxonomy database

optional arguments:
  -h, --help            show this help message and exit
  -d DBFILE, --dbfile DBFILE
                        Name of diamond database file. Defaults to
                        diamond.dmnd in same directory as the protein fasta
                        file
  -p CPUS, --cpus CPUS  Number of cpus to use when building (defaults to 1)
usage: tango search [-h] [-m {blastx,blastp}] [-p CPUS] [-b BLOCKSIZE]
                    [-c CHUNKS] [-T TOP] [-e EVALUE] [-l MINLEN] [-t TMPDIR]
                    query dbfile outfile

positional arguments:
  query                 Query contig nucleotide file
  dbfile                Diamond database file
  outfile               Diamond output file

optional arguments:
  -h, --help            show this help message and exit
  -m {blastx,blastp}, --mode {blastx,blastp}
                        Choice of search mode for diamond: 'blastx' (default)
                        for DNA query sequences or 'blastp' for amino acid
                        query sequences
  -p CPUS, --cpus CPUS  Number of cpus to use for diamond
  -b BLOCKSIZE, --blocksize BLOCKSIZE
                        Sequence block size in billions of letters
                        (default=2.0). Set to 20 on clusters
  -c CHUNKS, --chunks CHUNKS
                        Number of chunks for index processing (default=4)
  -T TOP, --top TOP     Report alignments within this percentage range of top
                        bitscore (default=10)
  -e EVALUE, --evalue EVALUE
                        maximum e-value to report alignments (default=0.001)
  -l MINLEN, --minlen MINLEN
                        Minimum length of queries. Shorter queries will be
                        filtered prior to search.
  -t TMPDIR, --tmpdir TMPDIR
                        directory for temporary files
usage: tango assign [-h] [--format {tango,blast}] [--taxidmap TAXIDMAP]
                    [-t TAXDIR] [--sqlitedb SQLITEDB]
                    [-m {rank_lca,rank_vote,score}]
                    [--assignranks ASSIGNRANKS [ASSIGNRANKS ...]]
                    [--reportranks REPORTRANKS [REPORTRANKS ...]]
                    [--rank_thresholds RANK_THRESHOLDS [RANK_THRESHOLDS ...]]
                    [--vote_threshold VOTE_THRESHOLD] [-T TOP] [-e EVALUE]
                    [-p CPUS] [-c CHUNKSIZE] [--blobout BLOBOUT]
                    [--taxidout TAXIDOUT]
                    diamond_results outfile

positional arguments:
  diamond_results       Diamond blastx results
  outfile               Output file

optional arguments:
  -h, --help            show this help message and exit

input:
  --format {tango,blast}
                        Type of file format for diamond results. blast=blast
                        tabular output, 'tango'=blast tabular output with
                        taxid in 12th column
  --taxidmap TAXIDMAP   Provide custom protein to taxid mapfile.
  -t TAXDIR, --taxdir TAXDIR
                        Directory specified during 'tango download taxonomy'.
                        Defaults to taxonomy/.
  --sqlitedb SQLITEDB   Name of ete3 sqlite file to be created within
                        --taxdir. Defaults to 'taxonomy.sqlite'

output:
  --blobout BLOBOUT     Output hits.tsv table compatible with blobtools
  --taxidout TAXIDOUT   Write output with taxonomy ids instead of taxonomy
                        names to file

run_mode:
  -m {rank_lca,rank_vote,score}, --mode {rank_lca,rank_vote,score}
                        Mode to use for parsing taxonomy: 'rank_lca'
                        (default), 'rank_vote' or 'score'
  --assignranks ASSIGNRANKS [ASSIGNRANKS ...]
                        Ranks to use when assigning taxa. Defaults to phylum
                        genus species
  --reportranks REPORTRANKS [REPORTRANKS ...]
                        Ranks to report in output. Defaults to superkingom
                        phylum class orderfamily genus species
  --rank_thresholds RANK_THRESHOLDS [RANK_THRESHOLDS ...]
                        Rank-specific thresholds corresponding to percent
                        identity of a hit.Defaults to 45 (phylum), 60 (genus)
                        and 85 (species)
  --vote_threshold VOTE_THRESHOLD
                        Minimum fraction required when voting on rank
                        assignments.
  -T TOP, --top TOP     Top percent of best score to consider hits for
                        (default=5)
  -e EVALUE, --evalue EVALUE
                        Maximum e-value to store hits. Default 0.001

performance:
  -p CPUS, --cpus CPUS  Number of cpus to use. Defaults to 1.
  -c CHUNKSIZE, --chunksize CHUNKSIZE
                        Size of chunks sent to process pool. For large input
                        files using a large chunksize can make the job
                        complete much faster than using the default value of
                        1.
usage: tango transfer [-h] [--ignore_unc_rank IGNORE_UNC_RANK]
                      [--orf_tax_out ORF_TAX_OUT] [-p CPUS] [-c CHUNKSIZE]
                      orf_taxonomy gff contig_taxonomy

positional arguments:
  orf_taxonomy          Taxonomy assigned to ORFs (ORF ids in first column)
  gff                   GFF or file with contig id in first column and ORF id
                        in second column
  contig_taxonomy       Output file with assigned taxonomy for contigs

optional arguments:
  -h, --help            show this help message and exit
  --ignore_unc_rank IGNORE_UNC_RANK
                        Ignore ORFs unclassified at <rank>
  --orf_tax_out ORF_TAX_OUT
                        Also transfer taxonomy back to ORFs and output to file
  -p CPUS, --cpus CPUS  Number of cpus to use when transferring taxonomy to
                        contigs
  -c CHUNKSIZE, --chunksize CHUNKSIZE
                        Size of chunks sent to process pool. For large input
                        files using a large chunksize can make the job
                        complete much faster than using the default value of
                        1.

Resource usage statistics from testing tango:
   Process count: 4
   CPU time: Sys=0:00:00.8, User=0:00:02.9
   Memory: 112.6M
   Disk usage: 20B
   Time elapsed: 0:00:32.8


TEST END: tango-0.5.7-py_0.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


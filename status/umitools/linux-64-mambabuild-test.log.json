Updating build index: /home/vsts/conda/conda-bld

TEST START: umitools-0.3.4-py37_1.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /tmp/tmp5nn_cc71/info/recipe/conda_build_config.yaml
  Package                  Version  Build                 Channel                                   Size
──────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
──────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex              0.1  conda_forge           conda-forge/linux-64                    Cached
  + _openmp_mutex              4.5  1_gnu                 conda-forge/linux-64                    Cached
  + bzip2                    1.0.8  h7f98852_4            conda-forge/linux-64                    Cached
  + c-ares                  1.17.2  h7f98852_0            conda-forge/linux-64                    Cached
  + ca-certificates      2021.5.30  ha878542_0            conda-forge/linux-64                    Cached
  + certifi              2021.5.30  py37h89c1867_0        conda-forge/linux-64                    141 KB
  + cycler                  0.10.0  py_2                  conda-forge/noarch                      Cached
  + decorator                4.4.2  py_0                  conda-forge/noarch                      Cached
  + editdistance             0.5.3  py37hcd2ae1e_3        conda-forge/linux-64                     27 KB
  + freetype                2.10.4  h0708190_1            conda-forge/linux-64                    Cached
  + jbig                       2.1  h7f98852_2003         conda-forge/linux-64                    Cached
  + jpeg                        9d  h36c2ea0_0            conda-forge/linux-64                    Cached
  + kiwisolver               1.3.2  py37h2527ec5_0        conda-forge/linux-64                     78 KB
  + krb5                    1.19.2  hcc1bbae_0            conda-forge/linux-64                    Cached
  + lcms2                     2.12  hddcbb42_0            conda-forge/linux-64                    Cached
  + ld_impl_linux-64        2.36.1  hea4e1c9_2            conda-forge/linux-64                    Cached
  + lerc                     2.2.1  h9c3ff4c_0            conda-forge/linux-64                    Cached
  + libblas                  3.9.0  11_linux64_openblas   conda-forge/linux-64                    Cached
  + libcblas                 3.9.0  11_linux64_openblas   conda-forge/linux-64                    Cached
  + libcurl                 7.78.0  h2574ce0_0            conda-forge/linux-64                    Cached
  + libdeflate                 1.7  h7f98852_5            conda-forge/linux-64                    Cached
  + libedit           3.1.20191231  he28a2e2_2            conda-forge/linux-64                    Cached
  + libev                     4.33  h516909a_1            conda-forge/linux-64                    Cached
  + libffi                     3.3  h58526e2_2            conda-forge/linux-64                    Cached
  + libgcc-ng               11.1.0  hc902ee8_8            conda-forge/linux-64                    Cached
  + libgfortran-ng          11.1.0  h69a702a_8            conda-forge/linux-64                    Cached
  + libgfortran5            11.1.0  h6c583b3_8            conda-forge/linux-64                    Cached
  + libgomp                 11.1.0  hc902ee8_8            conda-forge/linux-64                    Cached
  + liblapack                3.9.0  11_linux64_openblas   conda-forge/linux-64                    Cached
  + libnghttp2              1.43.0  h812cca2_0            conda-forge/linux-64                    Cached
  + libopenblas             0.3.17  pthreads_h8fe5266_1   conda-forge/linux-64                    Cached
  + libpng                  1.6.37  h21135ba_2            conda-forge/linux-64                    Cached
  + libssh2                 1.10.0  ha56f1ee_0            conda-forge/linux-64                    Cached
  + libstdcxx-ng            11.1.0  h56837e0_8            conda-forge/linux-64                    Cached
  + libtiff                  4.3.0  hf544144_1            conda-forge/linux-64                    Cached
  + libwebp-base             1.2.1  h7f98852_0            conda-forge/linux-64                    Cached
  + lz4-c                    1.9.3  h9c3ff4c_1            conda-forge/linux-64                    Cached
  + matplotlib-base          3.4.3  py37h1058ff1_0        conda-forge/linux-64                      7 MB
  + ncurses                    6.2  h58526e2_4            conda-forge/linux-64                    Cached
  + networkx                 2.6.2  pyhd8ed1ab_0          conda-forge/noarch                      Cached
  + numpy                   1.21.2  py37h31617e3_0        conda-forge/linux-64                    Cached
  + olefile                   0.46  pyh9f0ad1d_1          conda-forge/noarch                      Cached
  + openjpeg                 2.4.0  hb52868f_1            conda-forge/linux-64                    Cached
  + openssl                 1.1.1l  h7f98852_0            conda-forge/linux-64                    Cached
  + pandas                   1.3.2  py37he8f5f7f_0        conda-forge/linux-64                     13 MB
  + pillow                   8.3.2  py37h0f21c89_0        conda-forge/linux-64                    692 KB
  + pip                     21.2.4  pyhd8ed1ab_0          conda-forge/noarch                      Cached
  + pyparsing                2.4.7  pyh9f0ad1d_0          conda-forge/noarch                      Cached
  + pysam                 0.16.0.1  py37h45aed0b_3        bioconda/linux-64                         3 MB
  + python                  3.7.10  hffdb5ce_100_cpython  conda-forge/linux-64                    Cached
  + python-dateutil          2.8.2  pyhd8ed1ab_0          conda-forge/noarch                      Cached
  + python_abi                 3.7  2_cp37m               conda-forge/linux-64                    Cached
  + pytz                    2021.1  pyhd8ed1ab_0          conda-forge/noarch                      Cached
  + readline                   8.1  h46c0cb4_0            conda-forge/linux-64                    Cached
  + scipy                    1.7.1  py37hf2a6cf1_0        conda-forge/linux-64                     22 MB
  + setuptools              57.4.0  py37h89c1867_0        conda-forge/linux-64                    Cached
  + six                     1.16.0  pyh6c4a22f_0          conda-forge/noarch                      Cached
  + sqlite                  3.36.0  h9cd32fc_0            conda-forge/linux-64                    Cached
  + tk                      8.6.11  h27826a3_1            conda-forge/linux-64                    Cached
  + tornado                    6.1  py37h5e8e339_1        conda-forge/linux-64                    646 KB
  + umitools                 0.3.4  py37_1                /home/vsts/conda/conda-bld/linux-64      42 KB
  + wheel                   0.37.0  pyhd8ed1ab_1          conda-forge/noarch                      Cached
  + xz                       5.2.5  h516909a_1            conda-forge/linux-64                    Cached
  + zlib                    1.2.11  h516909a_1010         conda-forge/linux-64                    Cached
  + zstd                     1.5.0  ha95c52a_0            conda-forge/linux-64                    Cached

  Summary:

  Install: 65 packages

  Total download: 46 MB

──────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/umitools_1630776470905/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla


The following NEW packages will be INSTALLED:

    _libgcc_mutex:    0.1-conda_forge             conda-forge
    _openmp_mutex:    4.5-1_gnu                   conda-forge
    bzip2:            1.0.8-h7f98852_4            conda-forge
    c-ares:           1.17.2-h7f98852_0           conda-forge
    ca-certificates:  2021.5.30-ha878542_0        conda-forge
    certifi:          2021.5.30-py37h89c1867_0    conda-forge
    cycler:           0.10.0-py_2                 conda-forge
    decorator:        4.4.2-py_0                  conda-forge
    editdistance:     0.5.3-py37hcd2ae1e_3        conda-forge
    freetype:         2.10.4-h0708190_1           conda-forge
    jbig:             2.1-h7f98852_2003           conda-forge
    jpeg:             9d-h36c2ea0_0               conda-forge
    kiwisolver:       1.3.2-py37h2527ec5_0        conda-forge
    krb5:             1.19.2-hcc1bbae_0           conda-forge
    lcms2:            2.12-hddcbb42_0             conda-forge
    ld_impl_linux-64: 2.36.1-hea4e1c9_2           conda-forge
    lerc:             2.2.1-h9c3ff4c_0            conda-forge
    libblas:          3.9.0-11_linux64_openblas   conda-forge
    libcblas:         3.9.0-11_linux64_openblas   conda-forge
    libcurl:          7.78.0-h2574ce0_0           conda-forge
    libdeflate:       1.7-h7f98852_5              conda-forge
    libedit:          3.1.20191231-he28a2e2_2     conda-forge
    libev:            4.33-h516909a_1             conda-forge
    libffi:           3.3-h58526e2_2              conda-forge
    libgcc-ng:        11.1.0-hc902ee8_8           conda-forge
    libgfortran-ng:   11.1.0-h69a702a_8           conda-forge
    libgfortran5:     11.1.0-h6c583b3_8           conda-forge
    libgomp:          11.1.0-hc902ee8_8           conda-forge
    liblapack:        3.9.0-11_linux64_openblas   conda-forge
    libnghttp2:       1.43.0-h812cca2_0           conda-forge
    libopenblas:      0.3.17-pthreads_h8fe5266_1  conda-forge
    libpng:           1.6.37-h21135ba_2           conda-forge
    libssh2:          1.10.0-ha56f1ee_0           conda-forge
    libstdcxx-ng:     11.1.0-h56837e0_8           conda-forge
    libtiff:          4.3.0-hf544144_1            conda-forge
    libwebp-base:     1.2.1-h7f98852_0            conda-forge
    lz4-c:            1.9.3-h9c3ff4c_1            conda-forge
    matplotlib-base:  3.4.3-py37h1058ff1_0        conda-forge
    ncurses:          6.2-h58526e2_4              conda-forge
    networkx:         2.6.2-pyhd8ed1ab_0          conda-forge
    numpy:            1.21.2-py37h31617e3_0       conda-forge
    olefile:          0.46-pyh9f0ad1d_1           conda-forge
    openjpeg:         2.4.0-hb52868f_1            conda-forge
    openssl:          1.1.1l-h7f98852_0           conda-forge
    pandas:           1.3.2-py37he8f5f7f_0        conda-forge
    pillow:           8.3.2-py37h0f21c89_0        conda-forge
    pip:              21.2.4-pyhd8ed1ab_0         conda-forge
    pyparsing:        2.4.7-pyh9f0ad1d_0          conda-forge
    pysam:            0.16.0.1-py37h45aed0b_3     bioconda   
    python:           3.7.10-hffdb5ce_100_cpython conda-forge
    python-dateutil:  2.8.2-pyhd8ed1ab_0          conda-forge
    python_abi:       3.7-2_cp37m                 conda-forge
    pytz:             2021.1-pyhd8ed1ab_0         conda-forge
    readline:         8.1-h46c0cb4_0              conda-forge
    scipy:            1.7.1-py37hf2a6cf1_0        conda-forge
    setuptools:       57.4.0-py37h89c1867_0       conda-forge
    six:              1.16.0-pyh6c4a22f_0         conda-forge
    sqlite:           3.36.0-h9cd32fc_0           conda-forge
    tk:               8.6.11-h27826a3_1           conda-forge
    tornado:          6.1-py37h5e8e339_1          conda-forge
    umitools:         0.3.4-py37_1                local      
    wheel:            0.37.0-pyhd8ed1ab_1         conda-forge
    xz:               5.2.5-h516909a_1            conda-forge
    zlib:             1.2.11-h516909a_1010        conda-forge
    zstd:             1.5.0-ha95c52a_0            conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/umitools_1630776470905/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla
export SRC_DIR=/home/vsts/conda/conda-bld/umitools_1630776470905/test_tmp
import: 'umitools'
import: 'umitools'
usage: umitools [-h] subcommand

positional arguments:
  subcommand  See https://github.com/weng-lab/umitools for more information.
              For UMI RNA-seq: First, use umitools reformat_fastq to identify
              UMIs in UMI RNA-seq. Then, use umitools mark_duplicates to mark
              PCR duplicates. For UMI small RNA-seq: Use umitools
              reformat_sra_fastq to identify UMIs and PCR duplicates. To
              simulate UMIs, use umitools simulate.

optional arguments:
  -h, --help  show this help message and exit
usage: umi_reformat_fastq [-h] -l LEFT -r RIGHT -L LEFT_OUT -R RIGHT_OUT [-v]
                          [--umi-locator UMI_LOCATOR]
                          [--umi-padding UMI_PADDING]
                          [--umi-pattern UMI_PATTERN] [-q QUALITY] [-D]

A script to reformat reads in a UMI fastq file so that the name of each record
contains the UMI. This script is also known as umitools extract.

optional arguments:
  -h, --help            show this help message and exit
  -l LEFT, --left LEFT  the input fastq file for r1. (default: None)
  -r RIGHT, --right RIGHT
                        the input fastq file for r2. (default: None)
  -L LEFT_OUT, --left-out LEFT_OUT
                        the output fastq file for r1 (default: None)
  -R RIGHT_OUT, --right-out RIGHT_OUT
                        the output fastq file for r2 (default: None)
  -v, --verbose         Also include detailed stats for UMI and padding usage
                        (default: False)
  --umi-locator UMI_LOCATOR
                        Set the UMI locators. If you have multiple, separate
                        them by comma. e.g. GGG,TCA,ATC (default: GGG,TCA,ATC)
  --umi-padding UMI_PADDING
                        Set the nucleotide (for preventing ligation bias)
                        after the UMI locators. If you have multiple, separate
                        them by comma. e.g. A,C,G,T. The quality for this nt
                        is sometimes low, so the default is all possible four
                        nucleotides (default: A,C,G,T,N)
  --umi-pattern UMI_PATTERN
                        Set the UMI patterns. (default: None)
  -q QUALITY, --quality QUALITY
                        Quality (phred quality score) cutoff for UMI.Default
                        is 13, that is UMI with qualities >= 13 willbe kept.
                        This program assumes the phred quality scoresin the
                        fastq file are using sanger format (default: 13)
  -D, --debug           Turn on debugging mode (default: False)
usage: umi_reformat_sra_fastq [-h] -i INPUT -o OUTPUT -d PCR_DUPLICATE
                              [--reads-with-improper-umi READS_WITH_IMPROPER_UMI]
                              [-e ERRORS_ALLOWED] [-v] [-5 UMI_PATTERN_5]
                              [-3 UMI_PATTERN_3] [--debug]

A script to process reads in from UMI small RNA-seq. This script can handle
gzipped files transparently. This script is also known as umitools
extract_small.

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        the input fastq file. (default: None)
  -o OUTPUT, --output OUTPUT
                        the output fastq file containing reads that are not
                        duplicates (default: None)
  -d PCR_DUPLICATE, --pcr-duplicate PCR_DUPLICATE
                        The output fastq file containing PCR duplicates
                        (default: None)
  --reads-with-improper-umi READS_WITH_IMPROPER_UMI
                        The output fastq file containing reads with improper
                        UMIs. The default is to throw away these reads. This
                        is for debugging purposes (default: )
  -e ERRORS_ALLOWED, --errors-allowed ERRORS_ALLOWED
                        Setting it to >=1 allows errors in UMIs. Otherwise, no
                        errors are allowed in UMIs. (default: 0)
  -v, --verbose         Also include detailed run info (default: False)
  -5 UMI_PATTERN_5, --umi-pattern-5 UMI_PATTERN_5
                        Set the UMI pattern at the 5' end. Use ACGT for fixed
                        nt and N for variable nt in UMI. If there are multiple
                        patterns, separate them using comma (default:
                        NNNCGANNNTACNNN,NNNATCNNNAGTNNN)
  -3 UMI_PATTERN_3, --umi-pattern-3 UMI_PATTERN_3
                        Set the UMI pattern at the 3' end. Use ACGT for fixed
                        nt and N for variable nt in UMI. If there are multiple
                        patterns, separate them using comma (default:
                        NNNGTCNNNTAGNNN)
  --debug               More output for debugging (default: False)
usage: umi_mark_duplicates [-h] -f FILE [-p PROCESSES] [-d] [-c]

A pair of FASTQ files are first reformatted using reformat_umi_fastq.py and
then is aligned to get the bam file. This script can parse the umi barcode in
the name of each read to mark duplicates. This script is also known as
umitools mark.

optional arguments:
  -h, --help            show this help message and exit
  -f FILE, --file FILE  the input bam file
  -p PROCESSES, --processes PROCESSES
                        number of processes
  -d, --debug           turn on debug mode
  -c, --count           Count the number of raw reads for each locus
                        (determined by pairs)
usage: umi_simulator [-h] [-p PCR_CYCLE] [-l UMI_LENGTH] [-s POOL_SIZE]
                     [-o OUTPUT_SIZE] [-a AMPLIFICATION_RATE]
                     [--pcr-error PCR_ERROR]
                     [--sequencing-error SEQUENCING_ERROR] [--task TASK]
                     [--task-rep TASK_REP] [--cpu CPU] [--seed SEED]

A simple in silico PCR simulator. It creates an initial set of molecules for
one locus, simulates PCR and sequencing and outputs the stats. It is necessary
to specify the seed, since by default, this simulator uses 0 as the seed

optional arguments:
  -h, --help            show this help message and exit
  -p PCR_CYCLE, --pcr-cycle PCR_CYCLE
                        number of PCR cycles (default: 10)
  -l UMI_LENGTH, --umi-length UMI_LENGTH
                        length of UMI (default: 18)
  -s POOL_SIZE, --pool-size POOL_SIZE
                        initial pool size (number of molecules before PCR)
                        (default: 100)
  -o OUTPUT_SIZE, --output-size OUTPUT_SIZE
                        final pool size (sequencing depth, i.e. number of
                        reads sampled from the PCR amplified pool) (default:
                        100)
  -a AMPLIFICATION_RATE, --amplification-rate AMPLIFICATION_RATE
                        successful rate of PCR amplification. The actual
                        amplification rate is uniformally distributed between
                        this number and 1 (default: 0.8)
  --pcr-error PCR_ERROR
                        error rate of PCR amplification (default: 3e-05)
  --sequencing-error SEQUENCING_ERROR
                        error rate of sequencing (default: 0.001)
  --task TASK           tasks to simulate multiple conditions. Other PCR-
                        related arguments are ignored when this option is used
                        (default: None)
  --task-rep TASK_REP   number of replicates when doing tasks (default: 100)
  --cpu CPU             Tasks supporting multiprocessing. (default: 16)
  --seed SEED           starting seed (default: 0)

Resource usage statistics from testing umitools:
   Process count: 1
   CPU time: Sys=0:00:00.0, User=-
   Memory: 3.3M
   Disk usage: 20B
   Time elapsed: 0:00:02.1


TEST END: umitools-0.3.4-py37_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


Updating build index: /Users/runner/conda/conda-bld

TEST START: nudup-2.3.3-py27_1.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmphagmv9ec/info/recipe/conda_build_config.yaml
  Package                 Version  Build                  Channel                                    Size
───────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
───────────────────────────────────────────────────────────────────────────────────────────────────────────

  + bzip2                   1.0.8  h0d85af4_4             conda-forge/osx-64                       Cached
  + c-ares                 1.17.2  h0d85af4_0             conda-forge/osx-64                       Cached
  + ca-certificates     2021.5.30  h033912b_0             conda-forge/osx-64                       Cached
  + certifi            2019.11.28  py27h8c360ce_1         conda-forge/osx-64                       149 KB
  + coreutils                8.31  h0b31af3_0             conda-forge/osx-64                       Cached
  + gettext              0.19.8.1  haf92f58_1004          conda-forge/osx-64                         3 MB
  + grep                      3.4  he984a05_1             bioconda/osx-64                          167 KB
  + htslib                   1.13  hc38c3fb_0             bioconda/osx-64                          Cached
  + krb5                   1.19.2  hcfbf3a7_0             conda-forge/osx-64                       Cached
  + libcurl                7.78.0  hf45b732_0             conda-forge/osx-64                       Cached
  + libcxx                 12.0.1  habf9029_0             conda-forge/osx-64                       Cached
  + libdeflate                1.7  h35c211d_5             conda-forge/osx-64                       Cached
  + libedit          3.1.20191231  h0678c8f_2             conda-forge/osx-64                       Cached
  + libev                    4.33  haf1e3a3_1             conda-forge/osx-64                       Cached
  + libffi                  3.2.1  hb1e8313_1007          conda-forge/osx-64                        42 KB
  + libiconv                 1.16  haf1e3a3_0             conda-forge/osx-64                       Cached
  + libnghttp2             1.43.0  h07e645a_0             conda-forge/osx-64                       Cached
  + libssh2                1.10.0  h52ee1ee_0             conda-forge/osx-64                       Cached
  + ncurses                   6.2  h2e338ed_4             conda-forge/osx-64                       Cached
  + nudup                   2.3.3  py27_1                 /Users/runner/conda/conda-bld/osx-64      18 KB
  + openssl                1.1.1k  h0d85af4_1             conda-forge/osx-64                       Cached
  + pcre                     8.45  he49afe7_0             conda-forge/osx-64                       Cached
  + pip                    20.1.1  pyh9f0ad1d_0           conda-forge/noarch                         1 MB
  + python                 2.7.15  h8e446fc_1011_cpython  conda-forge/osx-64                        12 MB
  + python_abi                2.7  1_cp27m                conda-forge/osx-64                         4 KB
  + readline                  8.1  h05e3726_0             conda-forge/osx-64                       Cached
  + samtools                 1.13  h7596a89_0             bioconda/osx-64                          Cached
  + sed                       4.7  h3efe00b_1000          conda-forge/osx-64                       257 KB
  + setuptools             44.0.0  py27_0                 conda-forge/osx-64                       649 KB
  + sqlite                 3.36.0  h23a322b_0             conda-forge/osx-64                       Cached
  + tk                     8.6.11  h5dbffcc_1             conda-forge/osx-64                       Cached
  + wheel                  0.37.0  pyhd8ed1ab_1           conda-forge/noarch                       Cached
  + xz                      5.2.5  haf1e3a3_1             conda-forge/osx-64                       Cached
  + zlib                   1.2.11  h7795811_1010          conda-forge/osx-64                       Cached

  Summary:

  Install: 34 packages

  Total download: 18 MB

───────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/nudup_1630584102204/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla


The following NEW packages will be INSTALLED:

    bzip2:           1.0.8-h0d85af4_4             conda-forge
    c-ares:          1.17.2-h0d85af4_0            conda-forge
    ca-certificates: 2021.5.30-h033912b_0         conda-forge
    certifi:         2019.11.28-py27h8c360ce_1    conda-forge
    coreutils:       8.31-h0b31af3_0              conda-forge
    gettext:         0.19.8.1-haf92f58_1004       conda-forge
    grep:            3.4-he984a05_1               bioconda   
    htslib:          1.13-hc38c3fb_0              bioconda   
    krb5:            1.19.2-hcfbf3a7_0            conda-forge
    libcurl:         7.78.0-hf45b732_0            conda-forge
    libcxx:          12.0.1-habf9029_0            conda-forge
    libdeflate:      1.7-h35c211d_5               conda-forge
    libedit:         3.1.20191231-h0678c8f_2      conda-forge
    libev:           4.33-haf1e3a3_1              conda-forge
    libffi:          3.2.1-hb1e8313_1007          conda-forge
    libiconv:        1.16-haf1e3a3_0              conda-forge
    libnghttp2:      1.43.0-h07e645a_0            conda-forge
    libssh2:         1.10.0-h52ee1ee_0            conda-forge
    ncurses:         6.2-h2e338ed_4               conda-forge
    nudup:           2.3.3-py27_1                 local      
    openssl:         1.1.1k-h0d85af4_1            conda-forge
    pcre:            8.45-he49afe7_0              conda-forge
    pip:             20.1.1-pyh9f0ad1d_0          conda-forge
    python:          2.7.15-h8e446fc_1011_cpython conda-forge
    python_abi:      2.7-1_cp27m                  conda-forge
    readline:        8.1-h05e3726_0               conda-forge
    samtools:        1.13-h7596a89_0              bioconda   
    sed:             4.7-h3efe00b_1000            conda-forge
    setuptools:      44.0.0-py27_0                conda-forge
    sqlite:          3.36.0-h23a322b_0            conda-forge
    tk:              8.6.11-h5dbffcc_1            conda-forge
    wheel:           0.37.0-pyhd8ed1ab_1          conda-forge
    xz:              5.2.5-haf1e3a3_1             conda-forge
    zlib:            1.2.11-h7795811_1010         conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/nudup_1630584102204/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla
export SRC_DIR=/Users/runner/conda/conda-bld/nudup_1630584102204/test_tmp
usage: nudup.py [-2] [-f INDEX.fq|READ.fq] [-o OUT_PREFIX] [-s START]
                [-l LENGTH] [-T TEMP_DIR] [--old-samtools] [--rmdup-only] [-v]
                [-h]
                IN.sam|IN.bam

Marks/removes PCR introduced duplicate molecules based on the molecular tagging
technology used in NuGEN products.

For SINGLE END reads, duplicates are marked if they fulfill the following
criteria: a) start at the same genomic coordinate b) have the same strand
orientation c) have the same molecular tag sequence. The read with the
highest mapping quality is kept as the non-duplicate read.

For PAIRED END reads, duplicates are marked if they fulfill the following
criteria: a) start at the same genomic coordinate b) have the same template
length c) have the same molecular tag sequence. The read pair with the highest
mapping quality is kept as the non-duplicate read.

Here are the two cases for running this tool:

- CASE 1 (Standard): User supplies two input files,
 1) SAM/BAM file that a) ends with .sam or .bam extension b) contains unique
    alignments only
 2) FASTQ file (ie: the Index FASTQ) that contains the molecular tag sequence
    for each read name in the corresponding SAM/BAM file as either a) the read
    sequence or b) in the FASTQ entry header name. If the index FASTQ read
    length is 6, 8, 12, 14, or 16nt long as expected for NuGEN products, the
    molecular tag sequence to be extracted from the read according to -s and -l
    parameters, otherwise the molecular tag will be extracted from the header
    of the FASTQ entry.

- CASE 2 (Runtime Optimized): User supplies only one input file,
 1) SAM/BAM file that a) ends with .sam or .bam extension b) contains unique
    alignments only c) is sorted d) has a fixed length sequence containing the
    molecular tag appended to each read name.

Author: Anand Patel
Contact: NuGEN Technologies Inc., techserv@nugen.com

Input:
  IN.sam|IN.bam         input sorted/unsorted SAM/BAM containing only unique
                        alignments (sorted required for case 2 detailed above)

Options:
  -2, --paired-end      use paired end deduping with template. SAM/BAM
                        alignment must contain paired end reads. Degenerate
                        read pairs (alignments for one read of pair) will be
                        discarded.
  -f INDEX.fq|READ.fq   FASTQ file containing the molecular tag sequence for
                        each read name in the corresponding SAM/BAM file
                        (required only for CASE 1 detailed above)
  -o OUT_PREFIX, --out OUT_PREFIX
                        prefix of output file paths for sorted BAMs (default
                        will create prefix.sorted.markdup.bam,
                        prefix.sorted.dedup.bam, prefix_dup_log.txt)
  -s START, --start START
                        position in index read where molecular tag sequence
                        begins. This should be a 1-based value that counts in
                        from the 3' END of the read. (default = 6)
  -l LENGTH, --length LENGTH
                        length of molecular tag sequence (default = 6)
  -T TEMP_DIR           directory for reading and writing to temporary files
                        and named pipes (default: /tmp)
  --old-samtools        required for compatibility with samtools sort style in
                        samtools versions <=0.1.19
  --rmdup-only          required for only outputting duplicates removed file
  -v, --version         show program's version number and exit
  -h, --help            show this help message and exit

Resource usage statistics from testing nudup:
   Process count: 2
   CPU time: Sys=0:00:00.0, User=0:00:00.0
   Memory: 10.2M
   Disk usage: 12B
   Time elapsed: 0:00:02.0


TEST END: nudup-2.3.3-py27_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


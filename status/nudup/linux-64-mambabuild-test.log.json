Updating build index: /home/vsts/conda/conda-bld

TEST START: nudup-2.3.3-py27_1.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /tmp/tmpojbca88_/info/recipe/conda_build_config.yaml
  Package                  Version  Build                  Channel                                   Size
───────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
───────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex              0.1  conda_forge            conda-forge/linux-64                    Cached
  + _openmp_mutex              4.5  1_gnu                  conda-forge/linux-64                    Cached
  + bzip2                    1.0.8  h7f98852_4             conda-forge/linux-64                    Cached
  + c-ares                  1.17.2  h7f98852_0             conda-forge/linux-64                    Cached
  + ca-certificates      2021.5.30  ha878542_0             conda-forge/linux-64                    Cached
  + certifi             2019.11.28  py27h8c360ce_1         conda-forge/linux-64                    149 KB
  + coreutils                 8.31  h516909a_0             conda-forge/linux-64                    Cached
  + grep                       3.4  h9d02d08_1             bioconda/linux-64                       251 KB
  + htslib                    1.13  h9093b5e_0             bioconda/linux-64                       Cached
  + krb5                    1.19.2  hcc1bbae_0             conda-forge/linux-64                    Cached
  + ld_impl_linux-64        2.36.1  hea4e1c9_2             conda-forge/linux-64                    Cached
  + libcurl                 7.78.0  h2574ce0_0             conda-forge/linux-64                    Cached
  + libdeflate                 1.7  h7f98852_5             conda-forge/linux-64                    Cached
  + libedit           3.1.20191231  he28a2e2_2             conda-forge/linux-64                    Cached
  + libev                     4.33  h516909a_1             conda-forge/linux-64                    Cached
  + libffi                   3.2.1  he1b5a44_1007          conda-forge/linux-64                     47 KB
  + libgcc-ng               11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + libgomp                 11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + libnghttp2              1.43.0  h812cca2_0             conda-forge/linux-64                    Cached
  + libssh2                 1.10.0  ha56f1ee_0             conda-forge/linux-64                    Cached
  + libstdcxx-ng            11.1.0  h56837e0_8             conda-forge/linux-64                    Cached
  + ncurses                    6.2  h58526e2_4             conda-forge/linux-64                    Cached
  + nudup                    2.3.3  py27_1                 /home/vsts/conda/conda-bld/linux-64      18 KB
  + openssl                 1.1.1k  h7f98852_1             conda-forge/linux-64                    Cached
  + pcre                      8.45  h9c3ff4c_0             conda-forge/linux-64                    Cached
  + pip                     20.1.1  pyh9f0ad1d_0           conda-forge/noarch                        1 MB
  + python                  2.7.15  h5a48372_1011_cpython  conda-forge/linux-64                     12 MB
  + python_abi                 2.7  1_cp27mu               conda-forge/linux-64                      4 KB
  + readline                   8.1  h46c0cb4_0             conda-forge/linux-64                    Cached
  + samtools                  1.13  h8c37831_0             bioconda/linux-64                       Cached
  + sed                        4.8  he412f7d_0             conda-forge/linux-64                    Cached
  + setuptools              44.0.0  py27_0                 conda-forge/linux-64                    663 KB
  + sqlite                  3.36.0  h9cd32fc_0             conda-forge/linux-64                    Cached
  + tk                      8.6.11  h27826a3_1             conda-forge/linux-64                    Cached
  + wheel                   0.37.0  pyhd8ed1ab_1           conda-forge/noarch                      Cached
  + xz                       5.2.5  h516909a_1             conda-forge/linux-64                    Cached
  + zlib                    1.2.11  h516909a_1010          conda-forge/linux-64                    Cached

  Summary:

  Install: 37 packages

  Total download: 14 MB

───────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/nudup_1630583664228/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh


The following NEW packages will be INSTALLED:

    _libgcc_mutex:    0.1-conda_forge              conda-forge
    _openmp_mutex:    4.5-1_gnu                    conda-forge
    bzip2:            1.0.8-h7f98852_4             conda-forge
    c-ares:           1.17.2-h7f98852_0            conda-forge
    ca-certificates:  2021.5.30-ha878542_0         conda-forge
    certifi:          2019.11.28-py27h8c360ce_1    conda-forge
    coreutils:        8.31-h516909a_0              conda-forge
    grep:             3.4-h9d02d08_1               bioconda   
    htslib:           1.13-h9093b5e_0              bioconda   
    krb5:             1.19.2-hcc1bbae_0            conda-forge
    ld_impl_linux-64: 2.36.1-hea4e1c9_2            conda-forge
    libcurl:          7.78.0-h2574ce0_0            conda-forge
    libdeflate:       1.7-h7f98852_5               conda-forge
    libedit:          3.1.20191231-he28a2e2_2      conda-forge
    libev:            4.33-h516909a_1              conda-forge
    libffi:           3.2.1-he1b5a44_1007          conda-forge
    libgcc-ng:        11.1.0-hc902ee8_8            conda-forge
    libgomp:          11.1.0-hc902ee8_8            conda-forge
    libnghttp2:       1.43.0-h812cca2_0            conda-forge
    libssh2:          1.10.0-ha56f1ee_0            conda-forge
    libstdcxx-ng:     11.1.0-h56837e0_8            conda-forge
    ncurses:          6.2-h58526e2_4               conda-forge
    nudup:            2.3.3-py27_1                 local      
    openssl:          1.1.1k-h7f98852_1            conda-forge
    pcre:             8.45-h9c3ff4c_0              conda-forge
    pip:              20.1.1-pyh9f0ad1d_0          conda-forge
    python:           2.7.15-h5a48372_1011_cpython conda-forge
    python_abi:       2.7-1_cp27mu                 conda-forge
    readline:         8.1-h46c0cb4_0               conda-forge
    samtools:         1.13-h8c37831_0              bioconda   
    sed:              4.8-he412f7d_0               conda-forge
    setuptools:       44.0.0-py27_0                conda-forge
    sqlite:           3.36.0-h9cd32fc_0            conda-forge
    tk:               8.6.11-h27826a3_1            conda-forge
    wheel:            0.37.0-pyhd8ed1ab_1          conda-forge
    xz:               5.2.5-h516909a_1             conda-forge
    zlib:             1.2.11-h516909a_1010         conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/nudup_1630583664228/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh
export SRC_DIR=/home/vsts/conda/conda-bld/nudup_1630583664228/test_tmp
usage: nudup.py [-2] [-f INDEX.fq|READ.fq] [-o OUT_PREFIX] [-s START]
                [-l LENGTH] [-T TEMP_DIR] [--old-samtools] [--rmdup-only] [-v]
                [-h]
                IN.sam|IN.bam

Marks/removes PCR introduced duplicate molecules based on the molecular tagging
technology used in NuGEN products.

For SINGLE END reads, duplicates are marked if they fulfill the following
criteria: a) start at the same genomic coordinate b) have the same strand
orientation c) have the same molecular tag sequence. The read with the
highest mapping quality is kept as the non-duplicate read.

For PAIRED END reads, duplicates are marked if they fulfill the following
criteria: a) start at the same genomic coordinate b) have the same template
length c) have the same molecular tag sequence. The read pair with the highest
mapping quality is kept as the non-duplicate read.

Here are the two cases for running this tool:

- CASE 1 (Standard): User supplies two input files,
 1) SAM/BAM file that a) ends with .sam or .bam extension b) contains unique
    alignments only
 2) FASTQ file (ie: the Index FASTQ) that contains the molecular tag sequence
    for each read name in the corresponding SAM/BAM file as either a) the read
    sequence or b) in the FASTQ entry header name. If the index FASTQ read
    length is 6, 8, 12, 14, or 16nt long as expected for NuGEN products, the
    molecular tag sequence to be extracted from the read according to -s and -l
    parameters, otherwise the molecular tag will be extracted from the header
    of the FASTQ entry.

- CASE 2 (Runtime Optimized): User supplies only one input file,
 1) SAM/BAM file that a) ends with .sam or .bam extension b) contains unique
    alignments only c) is sorted d) has a fixed length sequence containing the
    molecular tag appended to each read name.

Author: Anand Patel
Contact: NuGEN Technologies Inc., techserv@nugen.com

Input:
  IN.sam|IN.bam         input sorted/unsorted SAM/BAM containing only unique
                        alignments (sorted required for case 2 detailed above)

Options:
  -2, --paired-end      use paired end deduping with template. SAM/BAM
                        alignment must contain paired end reads. Degenerate
                        read pairs (alignments for one read of pair) will be
                        discarded.
  -f INDEX.fq|READ.fq   FASTQ file containing the molecular tag sequence for
                        each read name in the corresponding SAM/BAM file
                        (required only for CASE 1 detailed above)
  -o OUT_PREFIX, --out OUT_PREFIX
                        prefix of output file paths for sorted BAMs (default
                        will create prefix.sorted.markdup.bam,
                        prefix.sorted.dedup.bam, prefix_dup_log.txt)
  -s START, --start START
                        position in index read where molecular tag sequence
                        begins. This should be a 1-based value that counts in
                        from the 3' END of the read. (default = 6)
  -l LENGTH, --length LENGTH
                        length of molecular tag sequence (default = 6)
  -T TEMP_DIR           directory for reading and writing to temporary files
                        and named pipes (default: /tmp)
  --old-samtools        required for compatibility with samtools sort style in
                        samtools versions <=0.1.19
  --rmdup-only          required for only outputting duplicates removed file
  -v, --version         show program's version number and exit
  -h, --help            show this help message and exit

Resource usage statistics from testing nudup:
   Process count: 1
   CPU time: Sys=0:00:00.0, User=-
   Memory: 3.4M
   Disk usage: 16B
   Time elapsed: 0:00:02.1


TEST END: nudup-2.3.3-py27_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


Updating build index: /home/vsts/conda/conda-bld

TEST START: pycoqc-2.5.2-py_0.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /tmp/tmprn31bzlh/info/recipe/conda_build_config.yaml
  Package                    Version  Build                    Channel                                   Size
───────────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
───────────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex                0.1  conda_forge              conda-forge/linux-64                    Cached
  + _openmp_mutex                4.5  1_gnu                    conda-forge/linux-64                    Cached
  + attrs                     21.2.0  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + brotlipy                   0.7.0  py37h5e8e339_1001        conda-forge/linux-64                    341 KB
  + bzip2                      1.0.8  h7f98852_4               conda-forge/linux-64                    Cached
  + c-ares                    1.17.2  h7f98852_0               conda-forge/linux-64                    Cached
  + ca-certificates        2021.5.30  ha878542_0               conda-forge/linux-64                    Cached
  + certifi                2021.5.30  py37h89c1867_0           conda-forge/linux-64                    141 KB
  + cffi                      1.14.6  py37hc58025e_0           conda-forge/linux-64                    225 KB
  + chardet                    4.0.0  py37h89c1867_1           conda-forge/linux-64                    204 KB
  + charset-normalizer         2.0.0  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + cryptography               3.4.7  py37h5d9358c_0           conda-forge/linux-64                      1 MB
  + curl                      7.78.0  hea6ffbf_0               conda-forge/linux-64                    Cached
  + decorator                  5.0.9  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + h5py                       2.9.0  nompi_py37h513d04c_1104  conda-forge/linux-64                      1 MB
  + hdf5                      1.10.5  nompi_h7c3c948_1111      conda-forge/linux-64                      3 MB
  + idna                         3.1  pyhd3deb0d_0             conda-forge/noarch                      Cached
  + importlib-metadata         4.8.1  py37h89c1867_0           conda-forge/linux-64                     32 KB
  + importlib_metadata         4.8.1  hd8ed1ab_0               conda-forge/noarch                        4 KB
  + ipython_genutils           0.2.0  py_1                     conda-forge/noarch                       21 KB
  + jinja2                    2.10.1  py_0                     conda-forge/noarch                       91 KB
  + jsonschema                 3.2.0  py37hc8dfbb8_1           conda-forge/linux-64                     89 KB
  + jupyter_core               4.7.1  py37h89c1867_0           conda-forge/linux-64                     72 KB
  + krb5                      1.19.2  hcc1bbae_0               conda-forge/linux-64                    Cached
  + ld_impl_linux-64          2.36.1  hea4e1c9_2               conda-forge/linux-64                    Cached
  + libblas                    3.9.0  8_openblas               conda-forge/linux-64                     11 KB
  + libcblas                   3.9.0  8_openblas               conda-forge/linux-64                     11 KB
  + libcurl                   7.78.0  h2574ce0_0               conda-forge/linux-64                    Cached
  + libdeflate                   1.3  h516909a_0               conda-forge/linux-64                     60 KB
  + libedit             3.1.20191231  he28a2e2_2               conda-forge/linux-64                    Cached
  + libev                       4.33  h516909a_1               conda-forge/linux-64                    Cached
  + libffi                       3.3  h58526e2_2               conda-forge/linux-64                    Cached
  + libgcc-ng                 11.1.0  hc902ee8_8               conda-forge/linux-64                    Cached
  + libgfortran-ng             7.5.0  h14aa051_19              conda-forge/linux-64                     22 KB
  + libgfortran4               7.5.0  h14aa051_19              conda-forge/linux-64                      1 MB
  + libgomp                   11.1.0  hc902ee8_8               conda-forge/linux-64                    Cached
  + liblapack                  3.9.0  8_openblas               conda-forge/linux-64                     11 KB
  + libnghttp2                1.43.0  h812cca2_0               conda-forge/linux-64                    Cached
  + libopenblas               0.3.12  pthreads_hb3c22a3_1      conda-forge/linux-64                      8 MB
  + libssh2                   1.10.0  ha56f1ee_0               conda-forge/linux-64                    Cached
  + libstdcxx-ng              11.1.0  h56837e0_8               conda-forge/linux-64                    Cached
  + markupsafe                 2.0.1  py37h5e8e339_0           conda-forge/linux-64                     22 KB
  + nbformat                   5.1.3  pyhd8ed1ab_0             conda-forge/noarch                       47 KB
  + ncurses                      6.2  h58526e2_4               conda-forge/linux-64                    Cached
  + numpy                     1.17.1  py37h95a1406_0           conda-forge/linux-64                      5 MB
  + openssl                   1.1.1l  h7f98852_0               conda-forge/linux-64                    Cached
  + pandas                    0.25.1  py37hb3f55d8_0           conda-forge/linux-64                     11 MB
  + pip                       21.2.4  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + plotly                     4.1.0  py_0                     conda-forge/noarch                        4 MB
  + pycoqc                     2.5.2  py_0                     /home/vsts/conda/conda-bld/linux-64      37 KB
  + pycparser                   2.20  pyh9f0ad1d_2             conda-forge/noarch                      Cached
  + pyopenssl                 20.0.1  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + pyrsistent                0.17.3  py37h5e8e339_2           conda-forge/linux-64                     89 KB
  + pysam                     0.15.3  py37hbcae180_3           bioconda/linux-64                         3 MB
  + pysocks                    1.7.1  py37h89c1867_3           conda-forge/linux-64                     27 KB
  + python                    3.7.10  hffdb5ce_100_cpython     conda-forge/linux-64                     57 MB
  + python-dateutil            2.8.2  pyhd8ed1ab_0             conda-forge/noarch                      240 KB
  + python_abi                   3.7  2_cp37m                  conda-forge/linux-64                      4 KB
  + pytz                      2021.1  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + readline                     8.1  h46c0cb4_0               conda-forge/linux-64                    Cached
  + requests                  2.26.0  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + retrying                   1.3.3  py_2                     conda-forge/noarch                       11 KB
  + scipy                      1.3.1  py37h921218d_2           conda-forge/linux-64                     18 MB
  + setuptools                57.4.0  py37h89c1867_0           conda-forge/linux-64                    938 KB
  + six                       1.16.0  pyh6c4a22f_0             conda-forge/noarch                      Cached
  + sqlite                    3.36.0  h9cd32fc_0               conda-forge/linux-64                    Cached
  + tk                        8.6.11  h27826a3_1               conda-forge/linux-64                    Cached
  + tqdm                      4.35.0  py_0                     conda-forge/noarch                       42 KB
  + traitlets                  5.1.0  pyhd8ed1ab_0             conda-forge/noarch                       82 KB
  + typing_extensions       3.10.0.0  pyha770c72_0             conda-forge/noarch                      Cached
  + urllib3                   1.26.6  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + wheel                     0.37.0  pyhd8ed1ab_1             conda-forge/noarch                      Cached
  + xz                         5.2.5  h516909a_1               conda-forge/linux-64                    Cached
  + zipp                       3.5.0  pyhd8ed1ab_0             conda-forge/noarch                      Cached
  + zlib                      1.2.11  h516909a_1010            conda-forge/linux-64                    Cached

  Summary:

  Install: 75 packages

  Total download: 116 MB

───────────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/pycoqc_1630708766679/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_place


The following NEW packages will be INSTALLED:

    _libgcc_mutex:      0.1-conda_forge               conda-forge
    _openmp_mutex:      4.5-1_gnu                     conda-forge
    attrs:              21.2.0-pyhd8ed1ab_0           conda-forge
    brotlipy:           0.7.0-py37h5e8e339_1001       conda-forge
    bzip2:              1.0.8-h7f98852_4              conda-forge
    c-ares:             1.17.2-h7f98852_0             conda-forge
    ca-certificates:    2021.5.30-ha878542_0          conda-forge
    certifi:            2021.5.30-py37h89c1867_0      conda-forge
    cffi:               1.14.6-py37hc58025e_0         conda-forge
    chardet:            4.0.0-py37h89c1867_1          conda-forge
    charset-normalizer: 2.0.0-pyhd8ed1ab_0            conda-forge
    cryptography:       3.4.7-py37h5d9358c_0          conda-forge
    curl:               7.78.0-hea6ffbf_0             conda-forge
    decorator:          5.0.9-pyhd8ed1ab_0            conda-forge
    h5py:               2.9.0-nompi_py37h513d04c_1104 conda-forge
    hdf5:               1.10.5-nompi_h7c3c948_1111    conda-forge
    idna:               3.1-pyhd3deb0d_0              conda-forge
    importlib-metadata: 4.8.1-py37h89c1867_0          conda-forge
    importlib_metadata: 4.8.1-hd8ed1ab_0              conda-forge
    ipython_genutils:   0.2.0-py_1                    conda-forge
    jinja2:             2.10.1-py_0                   conda-forge
    jsonschema:         3.2.0-py37hc8dfbb8_1          conda-forge
    jupyter_core:       4.7.1-py37h89c1867_0          conda-forge
    krb5:               1.19.2-hcc1bbae_0             conda-forge
    ld_impl_linux-64:   2.36.1-hea4e1c9_2             conda-forge
    libblas:            3.9.0-8_openblas              conda-forge
    libcblas:           3.9.0-8_openblas              conda-forge
    libcurl:            7.78.0-h2574ce0_0             conda-forge
    libdeflate:         1.3-h516909a_0                conda-forge
    libedit:            3.1.20191231-he28a2e2_2       conda-forge
    libev:              4.33-h516909a_1               conda-forge
    libffi:             3.3-h58526e2_2                conda-forge
    libgcc-ng:          11.1.0-hc902ee8_8             conda-forge
    libgfortran-ng:     7.5.0-h14aa051_19             conda-forge
    libgfortran4:       7.5.0-h14aa051_19             conda-forge
    libgomp:            11.1.0-hc902ee8_8             conda-forge
    liblapack:          3.9.0-8_openblas              conda-forge
    libnghttp2:         1.43.0-h812cca2_0             conda-forge
    libopenblas:        0.3.12-pthreads_hb3c22a3_1    conda-forge
    libssh2:            1.10.0-ha56f1ee_0             conda-forge
    libstdcxx-ng:       11.1.0-h56837e0_8             conda-forge
    markupsafe:         2.0.1-py37h5e8e339_0          conda-forge
    nbformat:           5.1.3-pyhd8ed1ab_0            conda-forge
    ncurses:            6.2-h58526e2_4                conda-forge
    numpy:              1.17.1-py37h95a1406_0         conda-forge
    openssl:            1.1.1l-h7f98852_0             conda-forge
    pandas:             0.25.1-py37hb3f55d8_0         conda-forge
    pip:                21.2.4-pyhd8ed1ab_0           conda-forge
    plotly:             4.1.0-py_0                    conda-forge
    pycoqc:             2.5.2-py_0                    local      
    pycparser:          2.20-pyh9f0ad1d_2             conda-forge
    pyopenssl:          20.0.1-pyhd8ed1ab_0           conda-forge
    pyrsistent:         0.17.3-py37h5e8e339_2         conda-forge
    pysam:              0.15.3-py37hbcae180_3         bioconda   
    pysocks:            1.7.1-py37h89c1867_3          conda-forge
    python:             3.7.10-hffdb5ce_100_cpython   conda-forge
    python-dateutil:    2.8.2-pyhd8ed1ab_0            conda-forge
    python_abi:         3.7-2_cp37m                   conda-forge
    pytz:               2021.1-pyhd8ed1ab_0           conda-forge
    readline:           8.1-h46c0cb4_0                conda-forge
    requests:           2.26.0-pyhd8ed1ab_0           conda-forge
    retrying:           1.3.3-py_2                    conda-forge
    scipy:              1.3.1-py37h921218d_2          conda-forge
    setuptools:         57.4.0-py37h89c1867_0         conda-forge
    six:                1.16.0-pyh6c4a22f_0           conda-forge
    sqlite:             3.36.0-h9cd32fc_0             conda-forge
    tk:                 8.6.11-h27826a3_1             conda-forge
    tqdm:               4.35.0-py_0                   conda-forge
    traitlets:          5.1.0-pyhd8ed1ab_0            conda-forge
    typing_extensions:  3.10.0.0-pyha770c72_0         conda-forge
    urllib3:            1.26.6-pyhd8ed1ab_0           conda-forge
    wheel:              0.37.0-pyhd8ed1ab_1           conda-forge
    xz:                 5.2.5-h516909a_1              conda-forge
    zipp:               3.5.0-pyhd8ed1ab_0            conda-forge
    zlib:               1.2.11-h516909a_1010          conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/pycoqc_1630708766679/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_place
export SRC_DIR=/home/vsts/conda/conda-bld/pycoqc_1630708766679/test_tmp
import: 'pycoQC.pycoQC'
import: 'pycoQC.Fast5_to_seq_summary'
import: 'pycoQC.Barcode_split'
import: 'pycoQC.Barcode_split'
import: 'pycoQC.Fast5_to_seq_summary'
import: 'pycoQC.pycoQC'
usage: pycoQC [-h] [--version]
              [--summary_file [SUMMARY_FILE [SUMMARY_FILE ...]]]
              [--barcode_file [BARCODE_FILE [BARCODE_FILE ...]]]
              [--bam_file [BAM_FILE [BAM_FILE ...]]]
              [--html_outfile HTML_OUTFILE] [--json_outfile JSON_OUTFILE]
              [--min_pass_qual MIN_PASS_QUAL] [--min_pass_len MIN_PASS_LEN]
              [--filter_calibration] [--filter_duplicated]
              [--min_barcode_percent MIN_BARCODE_PERCENT]
              [--report_title REPORT_TITLE] [--template_file TEMPLATE_FILE]
              [--config_file CONFIG_FILE] [--skip_coverage_plot]
              [--sample SAMPLE] [--default_config] [-v | -q]

pycoQC computes metrics and generates interactive QC plots from the sequencing summary
report generated by Oxford Nanopore technologies basecallers

* Minimal usage
    pycoQC -f sequencing_summary.txt -o pycoQC_output.html
* Including Guppy barcoding file + html output + json output
    pycoQC -f sequencing_summary.txt -b barcoding_sequencing.txt -o pycoQC_output.html -j pycoQC_output.json
* Including Bam file + html output
    pycoQC -f sequencing_summary.txt -a alignment.bam -o pycoQC_output.html

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  -v, --verbose         Increase verbosity
  -q, --quiet           Reduce verbosity

Input/output options:
  --summary_file [SUMMARY_FILE [SUMMARY_FILE ...]], -f [SUMMARY_FILE [SUMMARY_FILE ...]]
                        Path to a sequencing_summary generated by Albacore
                        1.0.0 + (read_fast5_basecaller.py) / Guppy 2.1.3+
                        (guppy_basecaller). One can also pass multiple space
                        separated file paths or a UNIX style regex matching
                        multiple files (Required)
  --barcode_file [BARCODE_FILE [BARCODE_FILE ...]], -b [BARCODE_FILE [BARCODE_FILE ...]]
                        Path to the barcode_file generated by Guppy 2.1.3+
                        (guppy_barcoder) or Deepbinner 0.2.0+. This is not a
                        required file. One can also pass multiple space
                        separated file paths or a UNIX style regex matching
                        multiple files (optional)
  --bam_file [BAM_FILE [BAM_FILE ...]], -a [BAM_FILE [BAM_FILE ...]]
                        Path to a Bam file corresponding to reads in the
                        summary_file. Preferably aligned with Minimap2 One can
                        also pass multiple space separated file paths or a
                        UNIX style regex matching multiple files (optional)
  --html_outfile HTML_OUTFILE, -o HTML_OUTFILE
                        Path to an output html file report (required if
                        json_outfile not given)
  --json_outfile JSON_OUTFILE, -j JSON_OUTFILE
                        Path to an output json file report (required if
                        html_outfile not given)

Filtering options:
  --min_pass_qual MIN_PASS_QUAL
                        Minimum quality to consider a read as 'pass' (default:
                        7)
  --min_pass_len MIN_PASS_LEN
                        Minimum read length to consider a read as 'pass'
                        (default: 0)
  --filter_calibration  If given, reads flagged as calibration strand by the
                        basecaller are removed (default: False)
  --filter_duplicated   If given, duplicated read_ids are removed but the
                        first occurence is kept (Guppy sometimes outputs the
                        same read multiple times) (default: False)
  --min_barcode_percent MIN_BARCODE_PERCENT
                        Minimal percent of total reads to retain barcode
                        label. If below, the barcode value is set as
                        `unclassified` (default: 0.1)

HTML report options:
  --report_title REPORT_TITLE
                        Title to use in the html report (default: PycoQC
                        report)
  --template_file TEMPLATE_FILE
                        Jinja2 html template for the html report (default: )
  --config_file CONFIG_FILE
                        Path to a JSON configuration file for the html report.
                        If not provided, looks for it in ~/.pycoQC and
                        ~/.config/pycoQC/config. If it's still not found,
                        falls back to default parameters. The first level keys
                        are the names of the plots to be included. The second
                        level keys are the parameters to pass to each plotting
                        function (default: )")
  --skip_coverage_plot  Skip the coverage plot in HTML report. Useful when
                        using a reference file containing many sequences, i.e.
                        transcriptome (default: False)

Other options:
  --sample SAMPLE       If not None a n number of reads will be randomly
                        selected instead of the entire dataset for ploting
                        function (deterministic sampling) (default: 100000)
  --default_config, -d  Print default configuration file. Can be used to
                        generate a template JSON file (default: False)
usage: Fast5_to_seq_summary [-h] [--version] --fast5_dir FAST5_DIR
                            --seq_summary_fn SEQ_SUMMARY_FN
                            [--max_fast5 MAX_FAST5] [--threads THREADS]
                            [--basecall_id BASECALL_ID]
                            [--fields FIELDS [FIELDS ...]] [--include_path]
                            [--verbose_level VERBOSE_LEVEL]

Fast5_to_seq_summary generate a sequencing summary like file from a directory
containing Fast5 files

optional arguments:
  -h, --help            show this help message and exit
  --version, -v         show program's version number and exit
  --fast5_dir FAST5_DIR, -f FAST5_DIR
                        Directory containing fast5 files. Can contain multiple
                        subdirectories
  --seq_summary_fn SEQ_SUMMARY_FN, -s SEQ_SUMMARY_FN
                        path of the summary sequencing file where to write the
                        data extracted from the fast5 files
  --max_fast5 MAX_FAST5
                        Maximum number of file to try to parse. 0 to
                        deactivate (default: 0)
  --threads THREADS, -t THREADS
                        Total number of threads to use. 1 thread is used for
                        the reader and 1 for the writer. Minimum 3 (default:
                        4)
  --basecall_id BASECALL_ID
                        id of the basecalling group. By default leave to 0,
                        but if you perfome multiple basecalling on the same
                        fast5 files, this can be used to indicate the
                        corresponding group (1, 2 ...) (default: 0)
  --fields FIELDS [FIELDS ...]
                        list of field names corresponding to attributes to try
                        to fetch from the fast5 files (default: ['read_id',
                        'run_id', 'channel', 'start_time',
                        'sequence_length_template', 'mean_qscore_template',
                        'calibration_strand_genome_template',
                        'barcode_arrangement'])
  --include_path        If given, the absolute path to the corresponding file
                        is added in an extra column (default: False)
  --verbose_level VERBOSE_LEVEL
                        Level of verbosity, from 2 (Chatty) to 0 (Nothing)
                        (default: 0)
usage: Barcode_split [-h] [--version] --summary_file
                     [SUMMARY_FILE [SUMMARY_FILE ...]]
                     [--barcode_file [BARCODE_FILE [BARCODE_FILE ...]]]
                     [--output_dir OUTPUT_DIR] [--output_unclassified]
                     [--min_barcode_percent MIN_BARCODE_PERCENT] [-v | -q]

Barcode_split is a simple tool to split sequencing summary report in per
barcodes

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --summary_file [SUMMARY_FILE [SUMMARY_FILE ...]], -f [SUMMARY_FILE [SUMMARY_FILE ...]]
                        Path to a sequencing_summary generated by Albacore
                        1.0.0 + (read_fast5_basecaller.py) / Guppy 2.1.3+
                        (guppy_basecaller). One can also pass multiple space
                        separated file paths or a UNIX style regex matching
                        multiple files
  --barcode_file [BARCODE_FILE [BARCODE_FILE ...]], -b [BARCODE_FILE [BARCODE_FILE ...]]
                        Path to the barcode_file generated by Guppy 2.1.3+
                        (guppy_barcoder) or Deepbinner 0.2.0+. One can also
                        pass multiple space separated file paths or a UNIX
                        style regex matching multiple files
  --output_dir OUTPUT_DIR, -o OUTPUT_DIR
                        Folder where to output split barcode data (default:
                        current dir
  --output_unclassified, -u
                        If given, unclassified barcodes are also written in a
                        file. By default they are skiped
  --min_barcode_percent MIN_BARCODE_PERCENT, -p MIN_BARCODE_PERCENT
                        Minimal percent of total reads to retain barcode
                        label. If below, the barcode value is set as
                        `unclassified` (default: 0.1)
  -v, --verbose         Increase verbosity
  -q, --quiet           Reduce verbosity

Resource usage statistics from testing pycoqc:
   Process count: 3
   CPU time: Sys=0:00:00.2, User=0:00:00.8
   Memory: 116.6M
   Disk usage: 24B
   Time elapsed: 0:00:04.2


TEST END: pycoqc-2.5.2-py_0.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


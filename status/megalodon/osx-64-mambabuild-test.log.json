  Package                 Version  Build                   Channel                                    Size
────────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
────────────────────────────────────────────────────────────────────────────────────────────────────────────

  + bzip2                   1.0.8  h0d85af4_4              conda-forge/osx-64                       Cached
  + c-ares                 1.17.2  h0d85af4_0              conda-forge/osx-64                       Cached
  + ca-certificates     2021.5.30  h033912b_0              conda-forge/osx-64                       Cached
  + cached-property         1.5.2  hd8ed1ab_1              conda-forge/noarch                         4 KB
  + cached_property         1.5.2  pyha770c72_1            conda-forge/noarch                        11 KB
  + certifi             2021.5.30  py38h50d1736_0          conda-forge/osx-64                       141 KB
  + colorama                0.4.4  pyh9f0ad1d_0            conda-forge/noarch                       Cached
  + cycler                 0.10.0  py_2                    conda-forge/noarch                         9 KB
  + freetype               2.10.4  h4cff582_1              conda-forge/osx-64                       Cached
  + h5py                    3.4.0  nompi_py38h9f21798_100  conda-forge/osx-64                         1 MB
  + hdf5                   1.12.1  nompi_h2f0ef1a_100      conda-forge/osx-64                         4 MB
  + jbig                      2.1  h0d85af4_2003           conda-forge/osx-64                       Cached
  + joblib                  1.0.1  pyhd8ed1ab_0            conda-forge/noarch                       Cached
  + jpeg                       9d  hbcb3906_0              conda-forge/osx-64                       Cached
  + kiwisolver              1.3.2  py38h12bbefe_0          conda-forge/osx-64                        57 KB
  + krb5                   1.19.2  hcfbf3a7_0              conda-forge/osx-64                       Cached
  + lcms2                    2.12  h577c468_0              conda-forge/osx-64                       404 KB
  + lerc                    2.2.1  h046ec9c_0              conda-forge/osx-64                       Cached
  + libblas                 3.9.0  11_osx64_openblas       conda-forge/osx-64                       Cached
  + libcblas                3.9.0  11_osx64_openblas       conda-forge/osx-64                       Cached
  + libcurl                7.78.0  hf45b732_0              conda-forge/osx-64                       Cached
  + libcxx                 12.0.1  habf9029_0              conda-forge/osx-64                       Cached
  + libdeflate                1.7  h35c211d_5              conda-forge/osx-64                       Cached
  + libedit          3.1.20191231  h0678c8f_2              conda-forge/osx-64                       Cached
  + libev                    4.33  haf1e3a3_1              conda-forge/osx-64                       Cached
  + libffi                    3.3  h046ec9c_2              conda-forge/osx-64                       Cached
  + libgfortran             5.0.0  9_3_0_h6c81a4c_23       conda-forge/osx-64                       Cached
  + libgfortran5            9.3.0  h6c81a4c_23             conda-forge/osx-64                       Cached
  + libiconv                 1.16  haf1e3a3_0              conda-forge/osx-64                       Cached
  + liblapack               3.9.0  11_osx64_openblas       conda-forge/osx-64                       Cached
  + libnghttp2             1.43.0  h07e645a_0              conda-forge/osx-64                       Cached
  + libopenblas            0.3.17  openmp_h3351f45_1       conda-forge/osx-64                       Cached
  + libpng                 1.6.37  h7cec526_2              conda-forge/osx-64                       Cached
  + libssh2                1.10.0  h52ee1ee_0              conda-forge/osx-64                       Cached
  + libtiff                 4.3.0  h1167814_1              conda-forge/osx-64                       Cached
  + libwebp-base            1.2.1  h0d85af4_0              conda-forge/osx-64                       Cached
  + llvm-openmp            12.0.1  hda6cdc1_1              conda-forge/osx-64                       Cached
  + lz4-c                   1.9.3  he49afe7_1              conda-forge/osx-64                       Cached
  + mappy                    2.22  py38hbc260c0_0          bioconda/osx-64                          148 KB
  + matplotlib-base         3.4.3  py38hc7d2367_0          conda-forge/osx-64                         7 MB
  + megalodon               2.3.4  py38h68004ad_0          /Users/runner/conda/conda-bld/osx-64       7 MB
  + ncurses                   6.2  h2e338ed_4              conda-forge/osx-64                       Cached
  + numpy                  1.21.2  py38h49b9922_0          conda-forge/osx-64                         6 MB
  + olefile                  0.46  pyh9f0ad1d_1            conda-forge/noarch                        32 KB
  + ont-fast5-api           4.0.0  pyhdfd78af_0            bioconda/noarch                            2 MB
  + openjpeg                2.4.0  h6e7aa92_1              conda-forge/osx-64                       374 KB
  + openssl                1.1.1k  h0d85af4_1              conda-forge/osx-64                       Cached
  + packaging                21.0  pyhd8ed1ab_0            conda-forge/noarch                        35 KB
  + pandas                  1.3.2  py38ha53d530_0          conda-forge/osx-64                        12 MB
  + patsy                   0.5.1  py_0                    conda-forge/noarch                       187 KB
  + pillow                  8.3.1  py38hee640a0_0          conda-forge/osx-64                       665 KB
  + pip                    21.2.4  pyhd8ed1ab_0            conda-forge/noarch                       Cached
  + progressbar33             2.4  py_0                    conda-forge/noarch                        11 KB
  + pyparsing               2.4.7  pyh9f0ad1d_0            conda-forge/noarch                        60 KB
  + pysam                0.16.0.1  py38h4ebacbe_3          bioconda/osx-64                            2 MB
  + python                 3.8.10  h0e5c897_0_cpython      conda-forge/osx-64                        13 MB
  + python-dateutil         2.8.2  pyhd8ed1ab_0            conda-forge/noarch                       240 KB
  + python_abi                3.8  2_cp38                  conda-forge/osx-64                         4 KB
  + pytz                   2021.1  pyhd8ed1ab_0            conda-forge/noarch                       Cached
  + readline                  8.1  h05e3726_0              conda-forge/osx-64                       Cached
  + scikit-learn           0.24.2  py38h37f3bb3_1          conda-forge/osx-64                         7 MB
  + scipy                   1.7.1  py38hd329d04_0          conda-forge/osx-64                        20 MB
  + seaborn                0.11.2  hd8ed1ab_0              conda-forge/noarch                         4 KB
  + seaborn-base           0.11.2  pyhd8ed1ab_0            conda-forge/noarch                       223 KB
  + setuptools             57.4.0  py38h50d1736_0          conda-forge/osx-64                       929 KB
  + six                    1.16.0  pyh6c4a22f_0            conda-forge/noarch                       Cached
  + sqlite                 3.36.0  h23a322b_0              conda-forge/osx-64                       Cached
  + statsmodels            0.12.2  py38ha1b04c9_0          conda-forge/osx-64                        11 MB
  + tar                      1.34  hbb58dfb_0              conda-forge/osx-64                       435 KB
  + threadpoolctl           2.2.0  pyh8a188c0_0            conda-forge/noarch                        16 KB
  + tk                     8.6.11  hd798d34_0              conda-forge/osx-64                       Cached
  + tornado                   6.1  py38h96a0964_1          conda-forge/osx-64                       645 KB
  + tqdm                   4.62.2  pyhd8ed1ab_0            conda-forge/noarch                       Cached
  + wheel                  0.37.0  pyhd8ed1ab_1            conda-forge/noarch                       Cached
  + xz                      5.2.5  haf1e3a3_1              conda-forge/osx-64                       Cached
  + zlib                   1.2.11  h7795811_1010           conda-forge/osx-64                       Cached
  + zstd                    1.5.0  h582d3a0_0              conda-forge/osx-64                       Cached

  Summary:

  Install: 77 packages

  Total download: 94 MB

────────────────────────────────────────────────────────────────────────────────────────────────────────────

Updating build index: /Users/runner/conda/conda-bld

TEST START: megalodon-2.3.4-py38h68004ad_0.tar.bz2

## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/megalodon_1630529680242/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold


The following NEW packages will be INSTALLED:

    bzip2:           1.0.8-h0d85af4_4             conda-forge
    c-ares:          1.17.2-h0d85af4_0            conda-forge
    ca-certificates: 2021.5.30-h033912b_0         conda-forge
    cached-property: 1.5.2-hd8ed1ab_1             conda-forge
    cached_property: 1.5.2-pyha770c72_1           conda-forge
    certifi:         2021.5.30-py38h50d1736_0     conda-forge
    colorama:        0.4.4-pyh9f0ad1d_0           conda-forge
    cycler:          0.10.0-py_2                  conda-forge
    freetype:        2.10.4-h4cff582_1            conda-forge
    h5py:            3.4.0-nompi_py38h9f21798_100 conda-forge
    hdf5:            1.12.1-nompi_h2f0ef1a_100    conda-forge
    jbig:            2.1-h0d85af4_2003            conda-forge
    joblib:          1.0.1-pyhd8ed1ab_0           conda-forge
    jpeg:            9d-hbcb3906_0                conda-forge
    kiwisolver:      1.3.2-py38h12bbefe_0         conda-forge
    krb5:            1.19.2-hcfbf3a7_0            conda-forge
    lcms2:           2.12-h577c468_0              conda-forge
    lerc:            2.2.1-h046ec9c_0             conda-forge
    libblas:         3.9.0-11_osx64_openblas      conda-forge
    libcblas:        3.9.0-11_osx64_openblas      conda-forge
    libcurl:         7.78.0-hf45b732_0            conda-forge
    libcxx:          12.0.1-habf9029_0            conda-forge
    libdeflate:      1.7-h35c211d_5               conda-forge
    libedit:         3.1.20191231-h0678c8f_2      conda-forge
    libev:           4.33-haf1e3a3_1              conda-forge
    libffi:          3.3-h046ec9c_2               conda-forge
    libgfortran:     5.0.0-9_3_0_h6c81a4c_23      conda-forge
    libgfortran5:    9.3.0-h6c81a4c_23            conda-forge
    libiconv:        1.16-haf1e3a3_0              conda-forge
    liblapack:       3.9.0-11_osx64_openblas      conda-forge
    libnghttp2:      1.43.0-h07e645a_0            conda-forge
    libopenblas:     0.3.17-openmp_h3351f45_1     conda-forge
    libpng:          1.6.37-h7cec526_2            conda-forge
    libssh2:         1.10.0-h52ee1ee_0            conda-forge
    libtiff:         4.3.0-h1167814_1             conda-forge
    libwebp-base:    1.2.1-h0d85af4_0             conda-forge
    llvm-openmp:     12.0.1-hda6cdc1_1            conda-forge
    lz4-c:           1.9.3-he49afe7_1             conda-forge
    mappy:           2.22-py38hbc260c0_0          bioconda   
    matplotlib-base: 3.4.3-py38hc7d2367_0         conda-forge
    megalodon:       2.3.4-py38h68004ad_0         local      
    ncurses:         6.2-h2e338ed_4               conda-forge
    numpy:           1.21.2-py38h49b9922_0        conda-forge
    olefile:         0.46-pyh9f0ad1d_1            conda-forge
    ont-fast5-api:   4.0.0-pyhdfd78af_0           bioconda   
    openjpeg:        2.4.0-h6e7aa92_1             conda-forge
    openssl:         1.1.1k-h0d85af4_1            conda-forge
    packaging:       21.0-pyhd8ed1ab_0            conda-forge
    pandas:          1.3.2-py38ha53d530_0         conda-forge
    patsy:           0.5.1-py_0                   conda-forge
    pillow:          8.3.1-py38hee640a0_0         conda-forge
    pip:             21.2.4-pyhd8ed1ab_0          conda-forge
    progressbar33:   2.4-py_0                     conda-forge
    pyparsing:       2.4.7-pyh9f0ad1d_0           conda-forge
    pysam:           0.16.0.1-py38h4ebacbe_3      bioconda   
    python:          3.8.10-h0e5c897_0_cpython    conda-forge
    python-dateutil: 2.8.2-pyhd8ed1ab_0           conda-forge
    python_abi:      3.8-2_cp38                   conda-forge
    pytz:            2021.1-pyhd8ed1ab_0          conda-forge
    readline:        8.1-h05e3726_0               conda-forge
    scikit-learn:    0.24.2-py38h37f3bb3_1        conda-forge
    scipy:           1.7.1-py38hd329d04_0         conda-forge
    seaborn:         0.11.2-hd8ed1ab_0            conda-forge
    seaborn-base:    0.11.2-pyhd8ed1ab_0          conda-forge
    setuptools:      57.4.0-py38h50d1736_0        conda-forge
    six:             1.16.0-pyh6c4a22f_0          conda-forge
    sqlite:          3.36.0-h23a322b_0            conda-forge
    statsmodels:     0.12.2-py38ha1b04c9_0        conda-forge
    tar:             1.34-hbb58dfb_0              conda-forge
    threadpoolctl:   2.2.0-pyh8a188c0_0           conda-forge
    tk:              8.6.11-hd798d34_0            conda-forge
    tornado:         6.1-py38h96a0964_1           conda-forge
    tqdm:            4.62.2-pyhd8ed1ab_0          conda-forge
    wheel:           0.37.0-pyhd8ed1ab_1          conda-forge
    xz:              5.2.5-haf1e3a3_1             conda-forge
    zlib:            1.2.11-h7795811_1010         conda-forge
    zstd:            1.5.0-h582d3a0_0             conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/megalodon_1630529680242/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold
export SRC_DIR=/Users/runner/conda/conda-bld/megalodon_1630529680242/test_tmp
import: 'megalodon'
import: 'megalodon'
usage: megalodon [-h] [--guppy-config GUPPY_CONFIG]
                 [--guppy-server-path GUPPY_SERVER_PATH] [--live-processing]
                 [--outputs {basecalls,mod_basecalls,mappings,per_read_variants,variants,variant_mappings,per_read_mods,mods,mod_mappings,signal_mappings,per_read_refs} [{basecalls,mod_basecalls,mappings,per_read_variants,variants,variant_mappings,per_read_mods,mods,mod_mappings,signal_mappings,per_read_refs} ...]]
                 [--output-directory OUTPUT_DIRECTORY] [--overwrite]
                 [--mappings-format {bam,cram,sam}] [--reference REFERENCE]
                 [--haploid] [--variant-filename VARIANT_FILENAME]
                 [--mod-motif BASE MOTIF REL_POSITION] [--processes PROCESSES]
                 [--devices DEVICES [DEVICES ...]] [--help-long] [--rna] [-v]
                 fast5s_dir

positional arguments:
  fast5s_dir            Directory containing raw fast5 (will be searched
                        recursively).

optional arguments:
  -h, --help            show this help message and exit

Guppy Backend Arguments:
  --guppy-config GUPPY_CONFIG
                        Guppy config. Default:
                        dna_r9.4.1_450bps_modbases_5mc_hac.cfg
  --guppy-server-path GUPPY_SERVER_PATH
                        Path to guppy server executable. Default: ./ont-
                        guppy/bin/guppy_basecall_server

Output Arguments:
  --live-processing     Process reads from a live sequencing run. The
                        [fast5s_dir] must be the base MinKNOW output
                        directory. Megalodon will continue searching for FAST5
                        files until the file starting with "final_summary" is
                        found.
  --outputs {basecalls,mod_basecalls,mappings,per_read_variants,variants,variant_mappings,per_read_mods,mods,mod_mappings,signal_mappings,per_read_refs} [{basecalls,mod_basecalls,mappings,per_read_variants,variants,variant_mappings,per_read_mods,mods,mod_mappings,signal_mappings,per_read_refs} ...]
                        Desired output(s).
                        Options:
                        	basecalls: Called bases (FASTA/Q)
                        	mod_basecalls: Basecall-anchored modified base scores (HDF5)
                        	mappings: Mapped reads (BAM/CRAM/SAM)
                        	per_read_variants: Per-read, per-site sequence variant scores database
                        	variants: Sample-level aggregated sequence variant calls (VCF)
                        	variant_mappings: Per-read mappings annotated with variant calls
                        	per_read_mods: Per-read, per-site modified base scores database
                        	mods: Sample-level aggregated modified base calls (modVCF)
                        	mod_mappings: Per-read mappings annotated with modified base calls
                        	signal_mappings: Signal mappings for taiyaki model training (HDF5)
                        	per_read_refs: Per-read reference sequence for model training (FASTA)
                        Default: ['basecalls']
  --output-directory OUTPUT_DIRECTORY
                        Directory to store output results. Default:
                        megalodon_results
  --overwrite           Overwrite output directory if it exists.

Mapping Arguments:
  --mappings-format {bam,cram,sam}
                        Mappings output format. Default: bam
  --reference REFERENCE
                        Reference FASTA or minimap2 index file used for
                        mapping called reads.

Sequence Variant Arguments:
  --haploid             Compute variant aggregation for haploid genotypes.
                        Default: diploid
  --variant-filename VARIANT_FILENAME
                        Sequence variants to call for each read in VCF/BCF
                        format (required for variant output).

Modified Base Arguments:
  --mod-motif BASE MOTIF REL_POSITION
                        Restrict modified base calls to specified motif(s).
                        Argument takes 3 values representing 1) the single
                        letter modified base(s), 2) sequence motif and 3)
                        relative modified base position. Multiple --mod-motif
                        arguments may be provided to a single command. For
                        example to restrict to CpG sites use "--mod-motif m CG
                        0".

Compute Resource Arguments:
  --processes PROCESSES
                        Number of parallel processes. Default: 1
  --devices DEVICES [DEVICES ...]
                        GPU devices for guppy or taiyaki basecalling backends.

Miscellaneous Arguments:
  --help-long           Show all options.
  --rna                 RNA input data. Requires RNA model. Default: DNA input
                        data
  -v, --version         show megalodon version and exit.
usage: megalodon_extras [-h] [-v]
                        {aggregate,calibrate,merge,modified_bases,phase_variants,per_read_text,validate,variants}
                        ...

********** Megalodon Extras *********

Commands to perform operations related to main Megalodon command including aggregation, variant phasing, validation, and more.

Megalodon extras command groups (additional help available within each command group):
	aggregate                Aggregate per-read modified base and/or variant statistics
	calibrate                Calibrate model results with ground truth modified base or variants
	merge                    Merge per-read databases or aggregated files
	modified_bases           Miscellaneous modified base operations
	phase_variants           Phase variants
	per_read_text            Output per-read text files
	validate                 Validate per-read mapping and modified base results
	variants                 Miscellaneous sequence variant operations

optional arguments:
  -h, --help            show this help message and exit
  -v, --version         Show Megalodon version and exit.

Resource usage statistics from testing megalodon:
   Process count: 4
   CPU time: Sys=0:00:00.1, User=0:00:00.3
   Memory: 35.3M
   Disk usage: 16B
   Time elapsed: 0:00:06.3


TEST END: megalodon-2.3.4-py38h68004ad_0.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


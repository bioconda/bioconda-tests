Updating build index: /home/vsts/conda/conda-bld

TEST START: repenrich-1.2-py27_1.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /tmp/tmp5osd_lpu/info/recipe/conda_build_config.yaml
  Package                  Version  Build                  Channel                                   Size
───────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
───────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex              0.1  conda_forge            conda-forge/linux-64                    Cached
  + _openmp_mutex              4.5  1_gnu                  conda-forge/linux-64                    Cached
  + bedtools                2.23.0  h2e03b76_5             bioconda/linux-64                       736 KB
  + biopython                 1.76  py27h516909a_0         conda-forge/linux-64                      3 MB
  + bowtie                   1.2.3  py27h2bce143_2         bioconda/linux-64                       959 KB
  + bzip2                    1.0.8  h7f98852_4             conda-forge/linux-64                    Cached
  + c-ares                  1.17.2  h7f98852_0             conda-forge/linux-64                    Cached
  + ca-certificates      2021.5.30  ha878542_0             conda-forge/linux-64                    Cached
  + certifi             2019.11.28  py27h8c360ce_1         conda-forge/linux-64                    149 KB
  + htslib                    1.13  h9093b5e_0             bioconda/linux-64                         2 MB
  + krb5                    1.19.2  hcc1bbae_0             conda-forge/linux-64                    Cached
  + ld_impl_linux-64        2.36.1  hea4e1c9_2             conda-forge/linux-64                    Cached
  + libblas                  3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libcblas                 3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libcurl                 7.78.0  h2574ce0_0             conda-forge/linux-64                    Cached
  + libdeflate                 1.7  h7f98852_5             conda-forge/linux-64                    Cached
  + libedit           3.1.20191231  he28a2e2_2             conda-forge/linux-64                    Cached
  + libev                     4.33  h516909a_1             conda-forge/linux-64                    Cached
  + libffi                   3.2.1  he1b5a44_1007          conda-forge/linux-64                     47 KB
  + libgcc-ng               11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + libgfortran-ng          11.1.0  h69a702a_8             conda-forge/linux-64                    Cached
  + libgfortran5            11.1.0  h6c583b3_8             conda-forge/linux-64                    Cached
  + libgomp                 11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + liblapack                3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libnghttp2              1.43.0  h812cca2_0             conda-forge/linux-64                    Cached
  + libopenblas             0.3.17  pthreads_h8fe5266_1    conda-forge/linux-64                    Cached
  + libssh2                 1.10.0  ha56f1ee_0             conda-forge/linux-64                    Cached
  + libstdcxx-ng            11.1.0  h56837e0_8             conda-forge/linux-64                    Cached
  + ncurses                    6.2  h58526e2_4             conda-forge/linux-64                    Cached
  + numpy                   1.16.5  py27h95a1406_0         conda-forge/linux-64                      4 MB
  + openssl                 1.1.1l  h7f98852_0             conda-forge/linux-64                    Cached
  + perl                    5.32.1  0_h7f98852_perl5       conda-forge/linux-64                     14 MB
  + pip                     20.1.1  pyh9f0ad1d_0           conda-forge/noarch                        1 MB
  + python                  2.7.15  h5a48372_1011_cpython  conda-forge/linux-64                     12 MB
  + python_abi                 2.7  1_cp27mu               conda-forge/linux-64                      4 KB
  + readline                   8.1  h46c0cb4_0             conda-forge/linux-64                    Cached
  + repenrich                  1.2  py27_1                 /home/vsts/conda/conda-bld/linux-64      10 KB
  + samtools                  1.13  h8c37831_0             bioconda/linux-64                       397 KB
  + setuptools              44.0.0  py27_0                 conda-forge/linux-64                    663 KB
  + sqlite                  3.36.0  h9cd32fc_0             conda-forge/linux-64                    Cached
  + tbb                   2021.3.0  h4bd325d_0             conda-forge/linux-64                      2 MB
  + tk                      8.6.11  h27826a3_1             conda-forge/linux-64                    Cached
  + wheel                   0.37.0  pyhd8ed1ab_1           conda-forge/noarch                      Cached
  + xz                       5.2.5  h516909a_1             conda-forge/linux-64                    Cached
  + zlib                    1.2.11  h516909a_1010          conda-forge/linux-64                    Cached

  Summary:

  Install: 45 packages

  Total download: 42 MB

───────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/repenrich_1630902259952/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pl


The following NEW packages will be INSTALLED:

    _libgcc_mutex:    0.1-conda_forge              conda-forge
    _openmp_mutex:    4.5-1_gnu                    conda-forge
    bedtools:         2.23.0-h2e03b76_5            bioconda   
    biopython:        1.76-py27h516909a_0          conda-forge
    bowtie:           1.2.3-py27h2bce143_2         bioconda   
    bzip2:            1.0.8-h7f98852_4             conda-forge
    c-ares:           1.17.2-h7f98852_0            conda-forge
    ca-certificates:  2021.5.30-ha878542_0         conda-forge
    certifi:          2019.11.28-py27h8c360ce_1    conda-forge
    htslib:           1.13-h9093b5e_0              bioconda   
    krb5:             1.19.2-hcc1bbae_0            conda-forge
    ld_impl_linux-64: 2.36.1-hea4e1c9_2            conda-forge
    libblas:          3.9.0-11_linux64_openblas    conda-forge
    libcblas:         3.9.0-11_linux64_openblas    conda-forge
    libcurl:          7.78.0-h2574ce0_0            conda-forge
    libdeflate:       1.7-h7f98852_5               conda-forge
    libedit:          3.1.20191231-he28a2e2_2      conda-forge
    libev:            4.33-h516909a_1              conda-forge
    libffi:           3.2.1-he1b5a44_1007          conda-forge
    libgcc-ng:        11.1.0-hc902ee8_8            conda-forge
    libgfortran-ng:   11.1.0-h69a702a_8            conda-forge
    libgfortran5:     11.1.0-h6c583b3_8            conda-forge
    libgomp:          11.1.0-hc902ee8_8            conda-forge
    liblapack:        3.9.0-11_linux64_openblas    conda-forge
    libnghttp2:       1.43.0-h812cca2_0            conda-forge
    libopenblas:      0.3.17-pthreads_h8fe5266_1   conda-forge
    libssh2:          1.10.0-ha56f1ee_0            conda-forge
    libstdcxx-ng:     11.1.0-h56837e0_8            conda-forge
    ncurses:          6.2-h58526e2_4               conda-forge
    numpy:            1.16.5-py27h95a1406_0        conda-forge
    openssl:          1.1.1l-h7f98852_0            conda-forge
    perl:             5.32.1-0_h7f98852_perl5      conda-forge
    pip:              20.1.1-pyh9f0ad1d_0          conda-forge
    python:           2.7.15-h5a48372_1011_cpython conda-forge
    python_abi:       2.7-1_cp27mu                 conda-forge
    readline:         8.1-h46c0cb4_0               conda-forge
    repenrich:        1.2-py27_1                   local      
    samtools:         1.13-h8c37831_0              bioconda   
    setuptools:       44.0.0-py27_0                conda-forge
    sqlite:           3.36.0-h9cd32fc_0            conda-forge
    tbb:              2021.3.0-h4bd325d_0          conda-forge
    tk:               8.6.11-h27826a3_1            conda-forge
    wheel:            0.37.0-pyhd8ed1ab_1          conda-forge
    xz:               5.2.5-h516909a_1             conda-forge
    zlib:             1.2.11-h516909a_1010         conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/repenrich_1630902259952/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pl
export SRC_DIR=/home/vsts/conda/conda-bld/repenrich_1630902259952/test_tmp
usage: RepEnrich.py [-h] [--version] [--pairedend PAIREDEND]
                    [--collapserepeat collapserepeat] [--threshold threshold]
                    [--tolerance tolerance] [--fastqfile2 fastqfile2]
                    [--cpus cpus] [--allcountmethod allcountmethod]
                    [--is_bed is_bed]
                    annotation_file outputfolder outputprefix setup_folder
                    fastqfile alignment_bam

Part II: Conducting the alignments to the psuedogenomes. Before doing this
step you will require 1) a bamfile of the unique alignments with index 2) a
fastq file of the reads mapping to more than one location. These files can be
obtained using the following bowtie options [EXAMPLE: bowtie -S -m 1 --max
multimap.fastq mm9 mate1_reads.fastq] Once you have the unique alignment
bamfile and the reads mapping to more than one location in a fastq file you
can run this step. EXAMPLE: python master_output.py
/users/nneretti/data/annotation/hg19/hg19_repeatmasker.txt
/users/nneretti/datasets/repeatmapping/POL3/Pol3_human/HeLa_InputChIPseq_Rep1
HeLa_InputChIPseq_Rep1 /users/nneretti/data/annotation/hg19/setup_folder
HeLa_InputChIPseq_Rep1_multimap.fastq HeLa_InputChIPseq_Rep1.bam

positional arguments:
  annotation_file       List RepeatMasker.org annotation file for your
                        organism. The file may be downloaded from the
                        RepeatMasker.org website. Example:
                        /data/annotation/hg19/hg19_repeatmasker.txt
  outputfolder          List folder to contain results. Example: /outputfolder
  outputprefix          Enter prefix name for data. Example:
                        HeLa_InputChIPseq_Rep1
  setup_folder          List folder that contains the repeat element
                        psuedogenomes. Example
                        /data/annotation/hg19/setup_folder
  fastqfile             Enter file for the fastq reads that map to multiple
                        locations. Example /data/multimap.fastq
  alignment_bam         Enter bamfile output for reads that map uniquely.
                        Example /bamfiles/old.bam

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --pairedend PAIREDEND
                        Designate this option for paired-end sequencing.
                        Default FALSE change to TRUE
  --collapserepeat collapserepeat
                        Designate this option to generate a collapsed repeat
                        type. Uncollapsed output is generated in addition to
                        collapsed repeat type. Simple_repeat is default to
                        simplify downstream analysis. You can change the
                        default to another repeat name to collapse a seperate
                        specific repeat instead or if the name of
                        Simple_repeat is different for your organism. Default
                        Simple_repeat
  --threshold threshold
                        This option specifies overlap between repetitive
                        elements and reads that map uniquely to the genome.
                        You should change the option depending on the read
                        length. We felt that the the value should be close to
                        half read length. Default 21
  --tolerance tolerance
                        This option helps to modifies the scrutiny of the
                        region sorter. Default 500
  --fastqfile2 fastqfile2
                        Enter fastqfile2 when using paired-end option. Default
                        none
  --cpus cpus           Enter available cpus per node. The more cpus the
                        faster RepEnrich performs. RepEnrich is designed to
                        only work on one node. Default: "1"
  --allcountmethod allcountmethod
                        By default the pipeline only outputs the fraction
                        count method. Consdidered to be the best way to count
                        multimapped reads. Changing this option will include
                        the unique count method, a conservative count, and the
                        total count method, a liberal counting strategy. Our
                        evaluation of simulated data indicated fraction
                        counting is best. Default = FALSE, change to TRUE
  --is_bed is_bed       Is the annotation file a bed file. This is also a
                        compatible format. The file needs to be a tab
                        seperated bed with optional fields. Ex. format chr
                        start end Name_element class family. The class and
                        family should identical to name_element if not
                        applicable. Default FALSE change to TRUE
usage: getargs_genome_maker.py [-h] [--version]
                               [--nfragmentsfile1 nfragmentsfile1]
                               [--gaplength gaplength]
                               [--flankinglength flankinglength]
                               [--is_bed is_bed]
                               annotation_file genomefasta setup_folder

Part I: Prepartion of repetive element psuedogenomes and repetive element
bamfiles. This script prepares the annotation used by downstream applications
to analyze for repetitive element enrichment. For this script to run properly
bowtie must be loaded. The repeat element psuedogenomes are prepared in order
to analyze reads that map to multiple locations of the genome. The repeat
element bamfiles are prepared in order to use a region sorter to analyze reads
that map to a single location of the genome.You will 1) annotation_file: The
repetitive element annotation file downloaded from RepeatMasker.org database
for your organism of interest. 2) genomefasta: Your genome of interest in
fasta format, 3)setup_folder: a folder to contain repeat element setup files
command-line usage EXAMPLE: python master_setup.py
/users/nneretti/data/annotation/mm9/mm9_repeatmasker.txt
/users/nneretti/data/annotation/mm9/mm9.fa
/users/nneretti/data/annotation/mm9/setup_folder

positional arguments:
  annotation_file       List annotation file. The annotation file contains the
                        repeat masker annotation for the genome of interest
                        and may be downloaded at RepeatMasker.org Example
                        /data/annotation/mm9/mm9.fa.out
  genomefasta           File name and path for genome of interest in fasta
                        format. Example /data/annotation/mm9/mm9.fa
  setup_folder          List folder to contain bamfiles for repeats and repeat
                        element psuedogenomes. Example
                        /data/annotation/mm9/setup

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --nfragmentsfile1 nfragmentsfile1
                        Output location of a description file that saves the
                        number of fragments processed per repname. Default
                        ./repnames_nfragments.txt
  --gaplength gaplength
                        Length of the spacer used to build repeat
                        psuedogeneomes. Default 200
  --flankinglength flankinglength
                        Length of the flanking region adjacent to the repeat
                        element that is used to build repeat psuedogeneomes.
                        The flanking length should be set according to the
                        length of your reads. Default 25
  --is_bed is_bed       Is the annotation file a bed file. This is also a
                        compatible format. The file needs to be a tab
                        seperated bed with optional fields. Ex. format chr
                        start end Name_element class family. The class and
                        family should identical to name_element if not
                        applicable. Default FALSE change to TRUE

Resource usage statistics from testing repenrich:
   Process count: 1
   CPU time: Sys=0:00:00.0, User=-
   Memory: 3.6M
   Disk usage: 16B
   Time elapsed: 0:00:02.1


TEST END: repenrich-1.2-py27_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


  Package                 Version  Build                Channel                                   Size
────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex             0.1  conda_forge          conda-forge/linux-64                    Cached
  + _openmp_mutex             4.5  1_llvm               conda-forge/linux-64                      5 KB
  + bedparse                0.2.3  py_0                 bioconda/noarch                          23 KB
  + blas                    2.111  openblas             conda-forge/linux-64                     12 KB
  + blas-devel              3.9.0  11_linux64_openblas  conda-forge/linux-64                     11 KB
  + ca-certificates     2021.5.30  ha878542_0           conda-forge/linux-64                    Cached
  + certifi             2021.5.30  py38h578d9bd_0       conda-forge/linux-64                    141 KB
  + colorama                0.4.4  pyh9f0ad1d_0         conda-forge/noarch                      Cached
  + cycler                 0.10.0  py_2                 conda-forge/noarch                        9 KB
  + freetype               2.10.4  h0708190_1           conda-forge/linux-64                    Cached
  + importlib-metadata      4.8.1  py38h578d9bd_0       conda-forge/linux-64                     32 KB
  + importlib_metadata      4.8.1  hd8ed1ab_0           conda-forge/noarch                        4 KB
  + jbig                      2.1  h7f98852_2003        conda-forge/linux-64                    Cached
  + joblib                  1.0.1  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + jpeg                       9d  h36c2ea0_0           conda-forge/linux-64                    Cached
  + kiwisolver              1.3.2  py38h1fd1430_0       conda-forge/linux-64                     79 KB
  + lcms2                    2.12  hddcbb42_0           conda-forge/linux-64                    443 KB
  + ld_impl_linux-64       2.36.1  hea4e1c9_2           conda-forge/linux-64                    Cached
  + lerc                    2.2.1  h9c3ff4c_0           conda-forge/linux-64                    Cached
  + libblas                 3.9.0  11_linux64_openblas  conda-forge/linux-64                    Cached
  + libcblas                3.9.0  11_linux64_openblas  conda-forge/linux-64                    Cached
  + libdeflate                1.7  h7f98852_5           conda-forge/linux-64                    Cached
  + libffi                    3.3  h58526e2_2           conda-forge/linux-64                    Cached
  + libgcc-ng              11.1.0  hc902ee8_8           conda-forge/linux-64                    Cached
  + libgfortran-ng         11.1.0  h69a702a_8           conda-forge/linux-64                    Cached
  + libgfortran5           11.1.0  h6c583b3_8           conda-forge/linux-64                    Cached
  + liblapack               3.9.0  11_linux64_openblas  conda-forge/linux-64                    Cached
  + liblapacke              3.9.0  11_linux64_openblas  conda-forge/linux-64                     11 KB
  + libopenblas            0.3.17  pthreads_h8fe5266_1  conda-forge/linux-64                    Cached
  + libpng                 1.6.37  h21135ba_2           conda-forge/linux-64                    Cached
  + libstdcxx-ng           11.1.0  h56837e0_8           conda-forge/linux-64                    Cached
  + libtiff                 4.3.0  hf544144_1           conda-forge/linux-64                    Cached
  + libwebp-base            1.2.1  h7f98852_0           conda-forge/linux-64                    Cached
  + llvm-openmp            12.0.1  h4bd325d_1           conda-forge/linux-64                      3 MB
  + loguru                  0.5.3  py38h578d9bd_2       conda-forge/linux-64                     85 KB
  + lz4-c                   1.9.3  h9c3ff4c_1           conda-forge/linux-64                    Cached
  + matplotlib-base         3.4.3  py38hf4fb855_0       conda-forge/linux-64                      7 MB
  + nanocompore             1.0.4  pyhdfd78af_0         /home/vsts/conda/conda-bld/linux-64     213 KB
  + ncurses                   6.2  h58526e2_4           conda-forge/linux-64                    Cached
  + numpy                  1.21.2  py38he2449b9_0       conda-forge/linux-64                      6 MB
  + olefile                  0.46  pyh9f0ad1d_1         conda-forge/noarch                       32 KB
  + openblas               0.3.17  pthreads_h4748800_1  conda-forge/linux-64                     10 MB
  + openjpeg                2.4.0  hb52868f_1           conda-forge/linux-64                    444 KB
  + openssl                1.1.1l  h7f98852_0           conda-forge/linux-64                    Cached
  + pandas                  1.3.2  py38h43a58ef_0       conda-forge/linux-64                     13 MB
  + patsy                   0.5.1  py_0                 conda-forge/noarch                      187 KB
  + pillow                  8.3.2  py38h8e6f84c_0       conda-forge/linux-64                    693 KB
  + pip                    21.2.4  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + pyfaidx                 0.6.2  pyh5e36f6f_0         bioconda/noarch                          29 KB
  + pyparsing               2.4.7  pyh9f0ad1d_0         conda-forge/noarch                       60 KB
  + python                 3.8.10  h49503c6_1_cpython   conda-forge/linux-64                     26 MB
  + python-dateutil         2.8.2  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + python_abi                3.8  2_cp38               conda-forge/linux-64                      4 KB
  + pytz                   2021.1  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + pyyaml                  5.4.1  py38h497a2fe_1       conda-forge/linux-64                    196 KB
  + readline                  8.1  h46c0cb4_0           conda-forge/linux-64                    Cached
  + scikit-learn           0.21.1  py38h22eb022_0       pkgs/main/linux-64                        5 MB
  + scipy                   1.7.1  py38h56a6a73_0       conda-forge/linux-64                     22 MB
  + seaborn                0.11.2  hd8ed1ab_0           conda-forge/noarch                        4 KB
  + seaborn-base           0.11.2  pyhd8ed1ab_0         conda-forge/noarch                      223 KB
  + setuptools             58.0.2  py38h578d9bd_0       conda-forge/linux-64                    928 KB
  + six                    1.16.0  pyh6c4a22f_0         conda-forge/noarch                      Cached
  + sqlite                 3.36.0  h9cd32fc_0           conda-forge/linux-64                    Cached
  + statsmodels            0.12.2  py38h6c62de6_0       conda-forge/linux-64                     11 MB
  + tk                     8.6.11  h27826a3_1           conda-forge/linux-64                    Cached
  + tornado                   6.1  py38h497a2fe_1       conda-forge/linux-64                    649 KB
  + tqdm                   4.62.2  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + wheel                  0.37.0  pyhd8ed1ab_1         conda-forge/noarch                      Cached
  + xz                      5.2.5  h516909a_1           conda-forge/linux-64                    Cached
  + yaml                    0.2.5  h516909a_0           conda-forge/linux-64                    Cached
  + zipp                    3.5.0  pyhd8ed1ab_0         conda-forge/noarch                      Cached
  + zlib                   1.2.11  h516909a_1010        conda-forge/linux-64                    Cached
  + zstd                    1.5.0  ha95c52a_0           conda-forge/linux-64                    Cached

  Summary:

  Install: 73 packages

  Total download: 108 MB

────────────────────────────────────────────────────────────────────────────────────────────────────────

Updating build index: /home/vsts/conda/conda-bld

TEST START: nanocompore-1.0.4-pyhdfd78af_0.tar.bz2

## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/nanocompore_1631048406504/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_


The following NEW packages will be INSTALLED:

    _libgcc_mutex:      0.1-conda_forge            conda-forge
    _openmp_mutex:      4.5-1_llvm                 conda-forge
    bedparse:           0.2.3-py_0                 bioconda   
    blas:               2.111-openblas             conda-forge
    blas-devel:         3.9.0-11_linux64_openblas  conda-forge
    ca-certificates:    2021.5.30-ha878542_0       conda-forge
    certifi:            2021.5.30-py38h578d9bd_0   conda-forge
    colorama:           0.4.4-pyh9f0ad1d_0         conda-forge
    cycler:             0.10.0-py_2                conda-forge
    freetype:           2.10.4-h0708190_1          conda-forge
    importlib-metadata: 4.8.1-py38h578d9bd_0       conda-forge
    importlib_metadata: 4.8.1-hd8ed1ab_0           conda-forge
    jbig:               2.1-h7f98852_2003          conda-forge
    joblib:             1.0.1-pyhd8ed1ab_0         conda-forge
    jpeg:               9d-h36c2ea0_0              conda-forge
    kiwisolver:         1.3.2-py38h1fd1430_0       conda-forge
    lcms2:              2.12-hddcbb42_0            conda-forge
    ld_impl_linux-64:   2.36.1-hea4e1c9_2          conda-forge
    lerc:               2.2.1-h9c3ff4c_0           conda-forge
    libblas:            3.9.0-11_linux64_openblas  conda-forge
    libcblas:           3.9.0-11_linux64_openblas  conda-forge
    libdeflate:         1.7-h7f98852_5             conda-forge
    libffi:             3.3-h58526e2_2             conda-forge
    libgcc-ng:          11.1.0-hc902ee8_8          conda-forge
    libgfortran-ng:     11.1.0-h69a702a_8          conda-forge
    libgfortran5:       11.1.0-h6c583b3_8          conda-forge
    liblapack:          3.9.0-11_linux64_openblas  conda-forge
    liblapacke:         3.9.0-11_linux64_openblas  conda-forge
    libopenblas:        0.3.17-pthreads_h8fe5266_1 conda-forge
    libpng:             1.6.37-h21135ba_2          conda-forge
    libstdcxx-ng:       11.1.0-h56837e0_8          conda-forge
    libtiff:            4.3.0-hf544144_1           conda-forge
    libwebp-base:       1.2.1-h7f98852_0           conda-forge
    llvm-openmp:        12.0.1-h4bd325d_1          conda-forge
    loguru:             0.5.3-py38h578d9bd_2       conda-forge
    lz4-c:              1.9.3-h9c3ff4c_1           conda-forge
    matplotlib-base:    3.4.3-py38hf4fb855_0       conda-forge
    nanocompore:        1.0.4-pyhdfd78af_0         local      
    ncurses:            6.2-h58526e2_4             conda-forge
    numpy:              1.21.2-py38he2449b9_0      conda-forge
    olefile:            0.46-pyh9f0ad1d_1          conda-forge
    openblas:           0.3.17-pthreads_h4748800_1 conda-forge
    openjpeg:           2.4.0-hb52868f_1           conda-forge
    openssl:            1.1.1l-h7f98852_0          conda-forge
    pandas:             1.3.2-py38h43a58ef_0       conda-forge
    patsy:              0.5.1-py_0                 conda-forge
    pillow:             8.3.2-py38h8e6f84c_0       conda-forge
    pip:                21.2.4-pyhd8ed1ab_0        conda-forge
    pyfaidx:            0.6.2-pyh5e36f6f_0         bioconda   
    pyparsing:          2.4.7-pyh9f0ad1d_0         conda-forge
    python:             3.8.10-h49503c6_1_cpython  conda-forge
    python-dateutil:    2.8.2-pyhd8ed1ab_0         conda-forge
    python_abi:         3.8-2_cp38                 conda-forge
    pytz:               2021.1-pyhd8ed1ab_0        conda-forge
    pyyaml:             5.4.1-py38h497a2fe_1       conda-forge
    readline:           8.1-h46c0cb4_0             conda-forge
    scikit-learn:       0.21.1-py38h22eb022_0                 
    scipy:              1.7.1-py38h56a6a73_0       conda-forge
    seaborn:            0.11.2-hd8ed1ab_0          conda-forge
    seaborn-base:       0.11.2-pyhd8ed1ab_0        conda-forge
    setuptools:         58.0.2-py38h578d9bd_0      conda-forge
    six:                1.16.0-pyh6c4a22f_0        conda-forge
    sqlite:             3.36.0-h9cd32fc_0          conda-forge
    statsmodels:        0.12.2-py38h6c62de6_0      conda-forge
    tk:                 8.6.11-h27826a3_1          conda-forge
    tornado:            6.1-py38h497a2fe_1         conda-forge
    tqdm:               4.62.2-pyhd8ed1ab_0        conda-forge
    wheel:              0.37.0-pyhd8ed1ab_1        conda-forge
    xz:                 5.2.5-h516909a_1           conda-forge
    yaml:               0.2.5-h516909a_0           conda-forge
    zipp:               3.5.0-pyhd8ed1ab_0         conda-forge
    zlib:               1.2.11-h516909a_1010       conda-forge
    zstd:               1.5.0-ha95c52a_0           conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/nanocompore_1631048406504/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_
export SRC_DIR=/home/vsts/conda/conda-bld/nanocompore_1631048406504/test_tmp
usage: nanocompore sampcomp [-h] [--sample_yaml sample_yaml]
                            [--file_list1 /path/to/Condition1_rep1,/path/to/Condition1_rep2]
                            [--file_list2 /path/to/Condition2_rep1,/path/to/Condition2_rep2]
                            [--label1 Condition1] [--label2 Condition2]
                            --fasta FASTA [--bed BED]
                            [--max_invalid_kmers_freq MAX_INVALID_KMERS_FREQ]
                            [--min_coverage MIN_COVERAGE]
                            [--downsample_high_coverage DOWNSAMPLE_HIGH_COVERAGE]
                            [--min_ref_length MIN_REF_LENGTH]
                            [--comparison_methods COMPARISON_METHODS]
                            [--sequence_context {0,1,2,3,4}]
                            [--sequence_context_weights {uniform,harmonic}]
                            [--pvalue_thr PVALUE_THR] [--logit] [--anova]
                            [--allow_warnings] [--nthreads NTHREADS]
                            [--outpath OUTPATH] [--outprefix OUTPREFIX]
                            [--overwrite]
                            [--log_level {warning,info,debug,trace}]
                            [--progress]

Compare 2 samples and find significant signal differences

* Minimal example with file_list arguments

    nanocompore sampcomp -1 f1.tsv,f2.tsv -2 f3.tsv,f4.tsv -f ref.fa -o results
* Minimal example with sample YAML file

    nanocompore sampcomp -y samples.yaml -f ref -o results

optional arguments:
  -h, --help            show this help message and exit

YAML sample files:
  Option allowing to describe sample files in a YAML file

  --sample_yaml sample_yaml, -y sample_yaml
                        YAML file containing the sample file labels. See
                        formatting in documentation. (required if --file_list1
                        and --file_list2 not given)

Arguments sample files:
  Option allowing to describe sample files directly as command line arguments

  --file_list1 /path/to/Condition1_rep1,/path/to/Condition1_rep2, -1 /path/to/Condition1_rep1,/path/to/Condition1_rep2
                        Comma separated list of NanopolishComp files for label
                        1. (required if --sample_yaml not given)
  --file_list2 /path/to/Condition2_rep1,/path/to/Condition2_rep2, -2 /path/to/Condition2_rep1,/path/to/Condition2_rep2
                        Comma separated list of NanopolishComp files for label
                        2. (required if --sample_yaml not given)
  --label1 Condition1   Label for files in --file_list1 (default: Condition1)
  --label2 Condition2   Label for files in --file_list2 (default: Condition2)

Input options:
  --fasta FASTA, -f FASTA
                        Fasta file used for mapping (required)
  --bed BED             BED file with annotation of transcriptome used for
                        mapping (optional)

Transcript filtering options:
  --max_invalid_kmers_freq MAX_INVALID_KMERS_FREQ
                        Max fequency of invalid kmers (default: 0.1)
  --min_coverage MIN_COVERAGE
                        Minimum coverage required in each condition to do the
                        comparison (default: 30)
  --downsample_high_coverage DOWNSAMPLE_HIGH_COVERAGE
                        Transcripts with high coverage will be downsampled
                        (default: 5000)
  --min_ref_length MIN_REF_LENGTH
                        Minimum length of a reference transcript to include it
                        in the analysis (default: 100)

Statistical testing options:
  --comparison_methods COMPARISON_METHODS
                        Comma separated list of comparison methods. Valid
                        methods are: GMM,KS,TT,MW. (default: GMM,KS)
  --sequence_context {0,1,2,3,4}
                        Sequence context for combining p-values (default: 0)
  --sequence_context_weights {uniform,harmonic}
                        Type of weights to use for combining p-values
  --pvalue_thr PVALUE_THR
                        Adjusted p-value threshold for reporting significant
                        sites (default: 0.05)
  --logit               Use logistic regression testing downstream of GMM
                        method. This is a legacy option and is now the deault.
  --anova               Use Anova test downstream of GMM method (default:
                        False)
  --allow_warnings      If True runtime warnings during the ANOVA tests don't
                        raise an error (default: False)

Other options:
  --nthreads NTHREADS, -t NTHREADS
                        Number of threads (default: 3)

Output options:
  --outpath OUTPATH, -o OUTPATH
                        Path to the output folder (default: ./)
  --outprefix OUTPREFIX, -p OUTPREFIX
                        text outprefix for all the files generated (default:
                        out)
  --overwrite, -w       Use --outpath even if it exists already (default:
                        False)

Verbosity options:
  --log_level {warning,info,debug,trace}
                        Set the log level (default: info)
  --progress            Display a progress bar during execution (default:
                        False)
usage: nanocompore simreads [-h] --fasta FASTA [--intensity_mod INTENSITY_MOD]
                            [--dwell_mod DWELL_MOD]
                            [--mod_reads_freq MOD_READS_FREQ]
                            [--mod_bases_freq MOD_BASES_FREQ]
                            [--mod_bases_type {A,T,C,G}]
                            [--mod_extend_context MOD_EXTEND_CONTEXT]
                            [--min_mod_dist MIN_MOD_DIST]
                            [--run_type {RNA,DNA}]
                            [--nreads_per_ref NREADS_PER_REF]
                            [--pos_rand_seed POS_RAND_SEED] [--not_bound]
                            [--outpath OUTPATH] [--outprefix OUTPREFIX]
                            [--overwrite]
                            [--log_level {warning,info,debug,trace}]
                            [--progress]

Simulate reads as a NanopolishComp like file from a fasta file and an inbuild model

* Minimal example without model alteration
    nanocompore simreads -f ref.fa -o results -n 50

* Minimal example with alteration of model intensity loc parameter for 50% of the reads
nanocompore simreads -f ref.fa -o results -n 50 --intensity_mod 2 --mod_reads_freq 0.5 --mod_bases_freq 0.2

optional arguments:
  -h, --help            show this help message and exit

Input options:
  --fasta FASTA, -f FASTA
                        Fasta file containing references to use to generate
                        artificial reads

Signal modification options:
  --intensity_mod INTENSITY_MOD
                        Fraction of intensity distribution SD by which to
                        modify the intensity distribution loc value (default:
                        0)
  --dwell_mod DWELL_MOD
                        Fraction of dwell time distribution SD by which to
                        modify the intensity distribution loc value (default:
                        0)
  --mod_reads_freq MOD_READS_FREQ
                        Frequency of reads to modify (default: 0)
  --mod_bases_freq MOD_BASES_FREQ
                        Frequency of bases to modify in each read (if
                        possible) (default: 0.25)
  --mod_bases_type {A,T,C,G}
                        Base for which to modify the signal (default: A)
  --mod_extend_context MOD_EXTEND_CONTEXT
                        number of adjacent base affected by the signal
                        modification following an harmonic series (default: 2)
  --min_mod_dist MIN_MOD_DIST
                        Minimal distance between 2 bases to modify (default:
                        6)

Other options:
  --run_type {RNA,DNA}  Define the run type model to import (default: RNA)
  --nreads_per_ref NREADS_PER_REF, -n NREADS_PER_REF
                        Number of reads to generate per references (default:
                        100)
  --pos_rand_seed POS_RAND_SEED
                        Define a seed for randon position picking to get a
                        deterministic behaviour (default: 42)
  --not_bound           Do not bind the values generated by the distributions
                        to the observed min and max observed values from the
                        model file (default: False)

Output options:
  --outpath OUTPATH, -o OUTPATH
                        Path to the output folder (default: ./)
  --outprefix OUTPREFIX, -p OUTPREFIX
                        text outprefix for all the files generated (default:
                        out)
  --overwrite, -w       Use --outpath even if it exists already (default:
                        False)

Verbosity options:
  --log_level {warning,info,debug,trace}
                        Set the log level (default: info)
  --progress            Display a progress bar during execution (default:
                        False)

Resource usage statistics from testing nanocompore:
   Process count: 3
   CPU time: Sys=0:00:00.3, User=0:00:01.7
   Memory: 129.4M
   Disk usage: 20B
   Time elapsed: 0:00:06.3


TEST END: nanocompore-1.0.4-pyhdfd78af_0.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


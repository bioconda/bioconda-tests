Updating build index: /home/vsts/conda/conda-bld

TEST START: iclipro-0.1.1-py27_1.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /tmp/tmpw3pr0d64/info/recipe/conda_build_config.yaml
  Package                               Version  Build                  Channel                                   Size
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex                           0.1  conda_forge            conda-forge/linux-64                    Cached
  + _openmp_mutex                           4.5  1_gnu                  conda-forge/linux-64                    Cached
  + backports                               1.0  py27_1                 conda-forge/linux-64                      4 KB
  + backports.functools_lru_cache         1.6.1  py_0                   conda-forge/noarch                        8 KB
  + backports_abc                           0.5  py27_0                 conda-forge/linux-64                      6 KB
  + bzip2                                 1.0.8  h7f98852_4             conda-forge/linux-64                    Cached
  + c-ares                               1.17.2  h7f98852_0             conda-forge/linux-64                    Cached
  + ca-certificates                   2021.5.30  ha878542_0             conda-forge/linux-64                    Cached
  + certifi                          2019.11.28  py27h8c360ce_1         conda-forge/linux-64                    149 KB
  + cycler                               0.10.0  py27_0                 conda-forge/linux-64                     13 KB
  + dbus                                 1.13.6  hfdff14a_1             conda-forge/linux-64                    585 KB
  + enum34                               1.1.10  py27h8c360ce_1         conda-forge/linux-64                     49 KB
  + expat                                 2.4.1  h9c3ff4c_0             conda-forge/linux-64                    182 KB
  + fontconfig                           2.13.1  hba837de_1005          conda-forge/linux-64                    Cached
  + freetype                             2.10.4  h0708190_1             conda-forge/linux-64                    Cached
  + functools32                         3.2.3.2  py27_2                 conda-forge/linux-64                     22 KB
  + futures                               3.3.0  py27h8c360ce_1         conda-forge/linux-64                     26 KB
  + gettext                            0.19.8.1  hf34092f_1004          conda-forge/linux-64                      4 MB
  + glib                                 2.66.3  h58526e2_0             conda-forge/linux-64                    500 KB
  + gst-plugins-base                     1.14.5  h0935bb2_2             conda-forge/linux-64                      7 MB
  + gstreamer                            1.14.5  h36ae1b5_2             conda-forge/linux-64                      4 MB
  + iclipro                               0.1.1  py27_1                 /home/vsts/conda/conda-bld/linux-64      28 KB
  + icu                                    64.2  he1b5a44_1             conda-forge/linux-64                     13 MB
  + jpeg                                     9d  h36c2ea0_0             conda-forge/linux-64                    Cached
  + kiwisolver                            1.1.0  py27h9e3301b_1         conda-forge/linux-64                     88 KB
  + krb5                                 1.19.2  hcc1bbae_0             conda-forge/linux-64                    Cached
  + ld_impl_linux-64                     2.36.1  hea4e1c9_2             conda-forge/linux-64                    Cached
  + libblas                               3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libcblas                              3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libclang                              9.0.1  default_ha53f305_1     conda-forge/linux-64                     24 MB
  + libcurl                              7.78.0  h2574ce0_0             conda-forge/linux-64                    Cached
  + libdeflate                              1.7  h7f98852_5             conda-forge/linux-64                    Cached
  + libedit                        3.1.20191231  he28a2e2_2             conda-forge/linux-64                    Cached
  + libev                                  4.33  h516909a_1             conda-forge/linux-64                    Cached
  + libffi                                3.2.1  he1b5a44_1007          conda-forge/linux-64                     47 KB
  + libgcc-ng                            11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + libgfortran-ng                       11.1.0  h69a702a_8             conda-forge/linux-64                    Cached
  + libgfortran5                         11.1.0  h6c583b3_8             conda-forge/linux-64                    Cached
  + libglib                              2.66.3  hbe7bbb4_0             conda-forge/linux-64                      3 MB
  + libgomp                              11.1.0  hc902ee8_8             conda-forge/linux-64                    Cached
  + libiconv                               1.16  h516909a_0             conda-forge/linux-64                    Cached
  + liblapack                             3.9.0  11_linux64_openblas    conda-forge/linux-64                    Cached
  + libllvm9                              9.0.1  hf817b99_2             conda-forge/linux-64                     26 MB
  + libnghttp2                           1.43.0  h812cca2_0             conda-forge/linux-64                    Cached
  + libopenblas                          0.3.17  pthreads_h8fe5266_1    conda-forge/linux-64                    Cached
  + libpng                               1.6.37  h21135ba_2             conda-forge/linux-64                    Cached
  + libssh2                              1.10.0  ha56f1ee_0             conda-forge/linux-64                    Cached
  + libstdcxx-ng                         11.1.0  h56837e0_8             conda-forge/linux-64                    Cached
  + libuuid                              2.32.1  h7f98852_1000          conda-forge/linux-64                    Cached
  + libxcb                                 1.13  h7f98852_1003          conda-forge/linux-64                    Cached
  + libxkbcommon                         0.10.0  he1b5a44_0             conda-forge/linux-64                    475 KB
  + libxml2                              2.9.10  hee79883_0             conda-forge/linux-64                      1 MB
  + matplotlib                            2.2.5  ha770c72_3             conda-forge/linux-64                      7 KB
  + matplotlib-base                       2.2.5  py27h250f245_1         conda-forge/linux-64                      7 MB
  + ncurses                                 6.2  h58526e2_4             conda-forge/linux-64                    Cached
  + nspr                                   4.30  h9c3ff4c_0             conda-forge/linux-64                    233 KB
  + nss                                    3.69  hb5efdd6_0             conda-forge/linux-64                      2 MB
  + numpy                                1.16.5  py27h95a1406_0         conda-forge/linux-64                      4 MB
  + openssl                              1.1.1l  h7f98852_0             conda-forge/linux-64                    Cached
  + pcre                                   8.45  h9c3ff4c_0             conda-forge/linux-64                    Cached
  + pip                                  20.1.1  pyh9f0ad1d_0           conda-forge/noarch                        1 MB
  + pthread-stubs                           0.4  h36c2ea0_1001          conda-forge/linux-64                    Cached
  + pyparsing                             2.4.7  pyh9f0ad1d_0           conda-forge/noarch                       60 KB
  + pyqt                                 5.12.3  py27hcca6a23_1         conda-forge/linux-64                      6 MB
  + pysam                              0.16.0.1  py27hc729bab_3         bioconda/linux-64                         3 MB
  + python                               2.7.15  h5a48372_1011_cpython  conda-forge/linux-64                     12 MB
  + python-dateutil                       2.8.1  py_0                   conda-forge/noarch                      220 KB
  + python_abi                              2.7  1_cp27mu               conda-forge/linux-64                      4 KB
  + pytz                                 2020.1  pyh9f0ad1d_0           conda-forge/noarch                      227 KB
  + qt                                   5.12.5  hd8c4c69_1             conda-forge/linux-64                     99 MB
  + readline                                8.1  h46c0cb4_0             conda-forge/linux-64                    Cached
  + setuptools                           44.0.0  py27_0                 conda-forge/linux-64                    663 KB
  + singledispatch                        3.6.1  pyh44b312d_0           conda-forge/noarch                       12 KB
  + six                                  1.16.0  pyh6c4a22f_0           conda-forge/noarch                      Cached
  + sqlite                               3.36.0  h9cd32fc_0             conda-forge/linux-64                    Cached
  + subprocess32                          3.5.4  py27h516909a_0         conda-forge/linux-64                     46 KB
  + tk                                   8.6.11  h27826a3_1             conda-forge/linux-64                    Cached
  + tornado                               5.1.1  py27h14c3975_1000      conda-forge/linux-64                    642 KB
  + wheel                                0.37.0  pyhd8ed1ab_1           conda-forge/noarch                      Cached
  + xorg-libxau                           1.0.9  h7f98852_0             conda-forge/linux-64                    Cached
  + xorg-libxdmcp                         1.1.3  h7f98852_0             conda-forge/linux-64                    Cached
  + xz                                    5.2.5  h516909a_1             conda-forge/linux-64                    Cached
  + zlib                                 1.2.11  h516909a_1010          conda-forge/linux-64                    Cached

  Summary:

  Install: 83 packages

  Total download: 220 MB

────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/iclipro_1630920365680/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac


The following NEW packages will be INSTALLED:

    _libgcc_mutex:                 0.1-conda_forge              conda-forge
    _openmp_mutex:                 4.5-1_gnu                    conda-forge
    backports:                     1.0-py27_1                   conda-forge
    backports.functools_lru_cache: 1.6.1-py_0                   conda-forge
    backports_abc:                 0.5-py27_0                   conda-forge
    bzip2:                         1.0.8-h7f98852_4             conda-forge
    c-ares:                        1.17.2-h7f98852_0            conda-forge
    ca-certificates:               2021.5.30-ha878542_0         conda-forge
    certifi:                       2019.11.28-py27h8c360ce_1    conda-forge
    cycler:                        0.10.0-py27_0                conda-forge
    dbus:                          1.13.6-hfdff14a_1            conda-forge
    enum34:                        1.1.10-py27h8c360ce_1        conda-forge
    expat:                         2.4.1-h9c3ff4c_0             conda-forge
    fontconfig:                    2.13.1-hba837de_1005         conda-forge
    freetype:                      2.10.4-h0708190_1            conda-forge
    functools32:                   3.2.3.2-py27_2               conda-forge
    futures:                       3.3.0-py27h8c360ce_1         conda-forge
    gettext:                       0.19.8.1-hf34092f_1004       conda-forge
    glib:                          2.66.3-h58526e2_0            conda-forge
    gst-plugins-base:              1.14.5-h0935bb2_2            conda-forge
    gstreamer:                     1.14.5-h36ae1b5_2            conda-forge
    iclipro:                       0.1.1-py27_1                 local      
    icu:                           64.2-he1b5a44_1              conda-forge
    jpeg:                          9d-h36c2ea0_0                conda-forge
    kiwisolver:                    1.1.0-py27h9e3301b_1         conda-forge
    krb5:                          1.19.2-hcc1bbae_0            conda-forge
    ld_impl_linux-64:              2.36.1-hea4e1c9_2            conda-forge
    libblas:                       3.9.0-11_linux64_openblas    conda-forge
    libcblas:                      3.9.0-11_linux64_openblas    conda-forge
    libclang:                      9.0.1-default_ha53f305_1     conda-forge
    libcurl:                       7.78.0-h2574ce0_0            conda-forge
    libdeflate:                    1.7-h7f98852_5               conda-forge
    libedit:                       3.1.20191231-he28a2e2_2      conda-forge
    libev:                         4.33-h516909a_1              conda-forge
    libffi:                        3.2.1-he1b5a44_1007          conda-forge
    libgcc-ng:                     11.1.0-hc902ee8_8            conda-forge
    libgfortran-ng:                11.1.0-h69a702a_8            conda-forge
    libgfortran5:                  11.1.0-h6c583b3_8            conda-forge
    libglib:                       2.66.3-hbe7bbb4_0            conda-forge
    libgomp:                       11.1.0-hc902ee8_8            conda-forge
    libiconv:                      1.16-h516909a_0              conda-forge
    liblapack:                     3.9.0-11_linux64_openblas    conda-forge
    libllvm9:                      9.0.1-hf817b99_2             conda-forge
    libnghttp2:                    1.43.0-h812cca2_0            conda-forge
    libopenblas:                   0.3.17-pthreads_h8fe5266_1   conda-forge
    libpng:                        1.6.37-h21135ba_2            conda-forge
    libssh2:                       1.10.0-ha56f1ee_0            conda-forge
    libstdcxx-ng:                  11.1.0-h56837e0_8            conda-forge
    libuuid:                       2.32.1-h7f98852_1000         conda-forge
    libxcb:                        1.13-h7f98852_1003           conda-forge
    libxkbcommon:                  0.10.0-he1b5a44_0            conda-forge
    libxml2:                       2.9.10-hee79883_0            conda-forge
    matplotlib:                    2.2.5-ha770c72_3             conda-forge
    matplotlib-base:               2.2.5-py27h250f245_1         conda-forge
    ncurses:                       6.2-h58526e2_4               conda-forge
    nspr:                          4.30-h9c3ff4c_0              conda-forge
    nss:                           3.69-hb5efdd6_0              conda-forge
    numpy:                         1.16.5-py27h95a1406_0        conda-forge
    openssl:                       1.1.1l-h7f98852_0            conda-forge
    pcre:                          8.45-h9c3ff4c_0              conda-forge
    pip:                           20.1.1-pyh9f0ad1d_0          conda-forge
    pthread-stubs:                 0.4-h36c2ea0_1001            conda-forge
    pyparsing:                     2.4.7-pyh9f0ad1d_0           conda-forge
    pyqt:                          5.12.3-py27hcca6a23_1        conda-forge
    pysam:                         0.16.0.1-py27hc729bab_3      bioconda   
    python:                        2.7.15-h5a48372_1011_cpython conda-forge
    python-dateutil:               2.8.1-py_0                   conda-forge
    python_abi:                    2.7-1_cp27mu                 conda-forge
    pytz:                          2020.1-pyh9f0ad1d_0          conda-forge
    qt:                            5.12.5-hd8c4c69_1            conda-forge
    readline:                      8.1-h46c0cb4_0               conda-forge
    setuptools:                    44.0.0-py27_0                conda-forge
    singledispatch:                3.6.1-pyh44b312d_0           conda-forge
    six:                           1.16.0-pyh6c4a22f_0          conda-forge
    sqlite:                        3.36.0-h9cd32fc_0            conda-forge
    subprocess32:                  3.5.4-py27h516909a_0         conda-forge
    tk:                            8.6.11-h27826a3_1            conda-forge
    tornado:                       5.1.1-py27h14c3975_1000      conda-forge
    wheel:                         0.37.0-pyhd8ed1ab_1          conda-forge
    xorg-libxau:                   1.0.9-h7f98852_0             conda-forge
    xorg-libxdmcp:                 1.1.3-h7f98852_0             conda-forge
    xz:                            5.2.5-h516909a_1             conda-forge
    zlib:                          1.2.11-h516909a_1010         conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/iclipro_1630920365680/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac
export SRC_DIR=/home/vsts/conda/conda-bld/iclipro_1630920365680/test_tmp
import: 'iCLIPro'
import: 'iCLIPro'
iCLIPro usage
=============

Usage: iCLIPro [options] in.bam

Options:
    -o FOLDER  output folder (default is cwd - current working directory)
    -b INT     genomic bin size (100..1000, default: 300)
    -r INT     number of reads required in bin (20..500, default: 50)
    -s INT     flanking distances when calculating start site overlap ratio (3..15, default: 5)
    -q INT     use only reads with minimum mapping quality (mapq) (0..100, default: 10)
    -g LIST    read len groups (e.g.: "A:16-39,A1:16-25,A2:26-32,A3:33-39,L:20,B:42")
    -p LIST    generate read overlap maps based on these

               comparisons (e.g.: "A1-A3,A2-A3,A1-B,A2-B,A3-B,L-B,A-B")
    -f INT     flanking region for read overlap maps (default: 50)
    -h         longer help

For given input BAM file [in.bam] the script will generate
a number of output files that can be used to check for and diagnose
systematic misassignments in iCLIP data.

Main result is stored in file [in_report.txt], for given [in.bam] BAM file.

Read (query template) names in BAM files should include a record
of form expressed with this regular expression: ``:rbc[ATCGN]+:``.
The ending colon can be omitted if random barcode record is placed
at the end of the name. Some valid examples::

   D3FCO8P1:206:C2M53ACXX:8:1207:17086:80291:1:N:0:rbcTGTAC: 272     1       11861 ... 
   D3FCO8P1:206:C2M53ACXX:8:1101:6625:73240:1:N:0:rbcCCGCC   16      1       11976 ...
   D3FCO8P1:206:C2M53ACXX:8:1203:17298:81179:rbcCCGCC:1:N:0  16      1       11976 ...

Random barcodes can be specified at the end of the name but
must be preceded by colon, for example::

   D3FCO8P1:206:C2M53ACXX:8:1207:17086:80291:1:N:0:TGTAC     272     1       11861 ... 
   D3FCO8P1:206:C2M53ACXX:8:1101:6625:73240:1:N:0   :CCGCC   16      1       11976 ...
   D3FCO8P1:206:C2M53ACXX:8:1203:17298:81179:1:N:0 :CCGCC    16      1       11976 ...

If no random barcode information is available, then iCLIPro will
most likely be able to work with the original read names. In such
case, please check that the read names do not include any text
that conforms to the rules for specifying random barcode as it
may mislead iCLIPro.

The generated report file includes a list of random barcodes
identified by iCLIPro. You should check it first and make sure
that proper random barcode information is being used.

Parameters -b and -r:
  Specifies the bin size to use when segmenting the genome.
  Only bins with enough reads (parameter -r) are then considered
  in the read overlap testing.

Parameter -s:
  Flanking region when calculating the mean and the median start
  site overlap ratios.

Parameter -q:
  Consider only reads that pass the minimum mapping quality,
  ignore the rest.

Parameter -g:
  iCLIPro needs to group reads based on their length.
  Any number of (overlapping) groups can be specified. For each
  group, an interval (INT1-INT2) or single value (INT) of the
  read lengths in the group can be specified.

Parameter -p (read overlap maps):
  Specifies which groups of reads to compare. When performing a
  comparison (G1-G2), cross-linked sites identified based on
  group G2 are used as reference (zero position). The relative
  positioning of sites identified in G1 is the computed and
  shown in read overlap maps.

Parameter -f:
  Width of the flanking region relative to reference point
  shown in read overlap maps.


Method
^^^^^^

A typical (i)CLIP experiment may result in the detection of RNA
fragments of different lengths. Under the assumptions of
conventional iCLIP, the start sites of iCLIP fragments should
coincide at the cross-linking position in a fragment
length-independent fashion.

This interpretation may not hold for some iCLIP libraries (e.g.,
substantial read-through, binding to long RNA stretches etc). For
details, see associated paper by Hauer and coauthors. In summary,
we identified a previously unrecognized effect of iCLIP fragment
length on the position of fragment start sites and thus assigned
binding sites for some RBPs.

iCLIPro is a robust analysis approach that examines this effect
and thus can improve the assignment of binding sites from iCLIP
data.

iCLIPro's main function is to visualize coinciding and
non-coinciding fragment start sites in order to examine the best
way how to analyze iCLIP data.

With iCLIPro you can test test and compare the overlap of
different reference points in the iCLIP fragments:
   * one nucleotide before first mapped nucleotide (conventional assumption)
   * center of the read
   * end of the read

iCLIPro identifies regions (bins in genome, parameter -b) with a
sufficient number of reads (parameter -r) for an read overlap
test. Reads from each selected bin are processed separately.
Reads get grouped based on their length (parameter -g) and sites
from different groups are compared.

The main output of iCLIPro are read overlap heatmaps that
identify the best mode of analysis.


Read overlap heatmaps
^^^^^^^^^^^^^^^^^^^^^

Read overlap maps are generated by comparing fragment start,
center and end sites in the *test* and *reference* groups.

The data underlying the high-resolution overlap heatmaps is
used to calculate a ratio of overlapping and non-overlapping
start sites thus enabling the decision to be made as to whether
the start or the center of the fragments should be used as a
reference point for most accurately defining the binding site.
This overlap start site ratio is reported at the end of the
generated report file. When calculating the start site overlap
ratio a default flanking distance of 5 nt is used
(parameter -s, see paper).

A ratio well above 1 suggests to use the start sites of iCLIP
fragments to detect binding sites (e.g., mean overlap start
site ratio of 1.31 for U2AF65). A ratio below 1 favors the
use of the center position for binding site assignment
(e.g., mean overlap start site ratio of 0.88 for eIF4A3,
see paper for details).

Sites identified based on a reference group are used to define 
the reference (zero) position in the map. The regions (-50 to +50, 
x-axis on plots, parameter -f) relative to the reference positions
are then scanned and number of co-occuring sites in test group is recorded.

The x-axis shows the offset of the sites of the test group
(shorter reads) relative to the sites of the reference group
(usually longer reads). The y-axis shows the fragment length.
The color in the heatmap represents the number of fragments
that co-occur at a given offset relative to the longer reference
fragments. 

In case of the fragment start sites, a peak at the start reference
position 0 corresponds to coinciding start sites, whereas a
distribution downstream of the reference position 0 arises from
start sites of smaller fragments that occur at length-dependent
offsets from the reference start sites.




Resource usage statistics from testing iclipro:
   Process count: 3
   CPU time: Sys=0:00:00.1, User=0:00:00.2
   Memory: 49.7M
   Disk usage: 20B
   Time elapsed: 0:00:04.1


TEST END: iclipro-0.1.1-py27_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


Updating build index: /Users/runner/conda/conda-bld

TEST START: panphlan-3.1-py_0.tar.bz2
Adding in variants from internal_defaults
Adding in variants from /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpsptgyy5s/info/recipe/conda_build_config.yaml
  Package                 Version  Build               Channel                                    Size
────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
────────────────────────────────────────────────────────────────────────────────────────────────────────

  + bowtie2                 2.4.4  py39h8538cfa_0      bioconda/osx-64                            1 MB
  + bzip2                   1.0.8  h0d85af4_4          conda-forge/osx-64                       Cached
  + c-ares                 1.17.2  h0d85af4_0          conda-forge/osx-64                       Cached
  + ca-certificates     2021.5.30  h033912b_0          conda-forge/osx-64                       Cached
  + htslib                   1.13  hc38c3fb_0          bioconda/osx-64                            2 MB
  + krb5                   1.19.2  hcfbf3a7_0          conda-forge/osx-64                       Cached
  + libblas                 3.9.0  11_osx64_openblas   conda-forge/osx-64                       Cached
  + libcblas                3.9.0  11_osx64_openblas   conda-forge/osx-64                       Cached
  + libcurl                7.78.0  hf45b732_0          conda-forge/osx-64                       Cached
  + libcxx                 12.0.1  habf9029_0          conda-forge/osx-64                       Cached
  + libdeflate                1.7  h35c211d_5          conda-forge/osx-64                       Cached
  + libedit          3.1.20191231  h0678c8f_2          conda-forge/osx-64                       Cached
  + libev                    4.33  haf1e3a3_1          conda-forge/osx-64                       Cached
  + libffi                    3.3  h046ec9c_2          conda-forge/osx-64                       Cached
  + libgfortran             5.0.0  9_3_0_h6c81a4c_23   conda-forge/osx-64                       Cached
  + libgfortran5            9.3.0  h6c81a4c_23         conda-forge/osx-64                       Cached
  + liblapack               3.9.0  11_osx64_openblas   conda-forge/osx-64                       Cached
  + libnghttp2             1.43.0  h07e645a_0          conda-forge/osx-64                       Cached
  + libopenblas            0.3.17  openmp_h3351f45_1   conda-forge/osx-64                       Cached
  + libssh2                1.10.0  h52ee1ee_0          conda-forge/osx-64                       Cached
  + llvm-openmp            12.0.1  hda6cdc1_1          conda-forge/osx-64                       Cached
  + lz4-c                   1.9.3  he49afe7_1          conda-forge/osx-64                       Cached
  + ncurses                   6.2  h2e338ed_4          conda-forge/osx-64                       Cached
  + numpy                  1.21.2  py39h7eed0ac_0      conda-forge/osx-64                         6 MB
  + openssl                1.1.1l  h0d85af4_0          conda-forge/osx-64                       Cached
  + pandas                  1.3.2  py39h4d6be9b_0      conda-forge/osx-64                        12 MB
  + panphlan                  3.1  py_0                /Users/runner/conda/conda-bld/osx-64      26 KB
  + perl                   5.32.1  0_h0d85af4_perl5    conda-forge/osx-64                        13 MB
  + pip                    21.2.4  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + python                  3.9.7  hd187cdc_0_cpython  conda-forge/osx-64                       Cached
  + python-dateutil         2.8.2  pyhd8ed1ab_0        conda-forge/noarch                       240 KB
  + python_abi                3.9  2_cp39              conda-forge/osx-64                       Cached
  + pytz                   2021.1  pyhd8ed1ab_0        conda-forge/noarch                       Cached
  + readline                  8.1  h05e3726_0          conda-forge/osx-64                       Cached
  + samtools                 1.13  h7596a89_0          bioconda/osx-64                          404 KB
  + scipy                   1.7.1  py39h056f1c0_0      conda-forge/osx-64                        20 MB
  + setuptools             57.4.0  py39h6e9494a_0      conda-forge/osx-64                       Cached
  + six                    1.16.0  pyh6c4a22f_0        conda-forge/noarch                       Cached
  + sqlite                 3.36.0  h23a322b_0          conda-forge/osx-64                       Cached
  + tbb                    2020.2  h940c156_4          conda-forge/osx-64                       132 KB
  + tk                     8.6.11  h5dbffcc_1          conda-forge/osx-64                       Cached
  + tzdata                  2021a  he74cb21_1          conda-forge/noarch                       Cached
  + wheel                  0.37.0  pyhd8ed1ab_1        conda-forge/noarch                       Cached
  + xz                      5.2.5  haf1e3a3_1          conda-forge/osx-64                       Cached
  + zlib                   1.2.11  h7795811_1010       conda-forge/osx-64                       Cached
  + zstd                    1.4.9  h582d3a0_0          conda-forge/osx-64                       460 KB

  Summary:

  Install: 46 packages

  Total download: 55 MB

────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/panphlan_1630857603952/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_


The following NEW packages will be INSTALLED:

    bowtie2:         2.4.4-py39h8538cfa_0     bioconda   
    bzip2:           1.0.8-h0d85af4_4         conda-forge
    c-ares:          1.17.2-h0d85af4_0        conda-forge
    ca-certificates: 2021.5.30-h033912b_0     conda-forge
    htslib:          1.13-hc38c3fb_0          bioconda   
    krb5:            1.19.2-hcfbf3a7_0        conda-forge
    libblas:         3.9.0-11_osx64_openblas  conda-forge
    libcblas:        3.9.0-11_osx64_openblas  conda-forge
    libcurl:         7.78.0-hf45b732_0        conda-forge
    libcxx:          12.0.1-habf9029_0        conda-forge
    libdeflate:      1.7-h35c211d_5           conda-forge
    libedit:         3.1.20191231-h0678c8f_2  conda-forge
    libev:           4.33-haf1e3a3_1          conda-forge
    libffi:          3.3-h046ec9c_2           conda-forge
    libgfortran:     5.0.0-9_3_0_h6c81a4c_23  conda-forge
    libgfortran5:    9.3.0-h6c81a4c_23        conda-forge
    liblapack:       3.9.0-11_osx64_openblas  conda-forge
    libnghttp2:      1.43.0-h07e645a_0        conda-forge
    libopenblas:     0.3.17-openmp_h3351f45_1 conda-forge
    libssh2:         1.10.0-h52ee1ee_0        conda-forge
    llvm-openmp:     12.0.1-hda6cdc1_1        conda-forge
    lz4-c:           1.9.3-he49afe7_1         conda-forge
    ncurses:         6.2-h2e338ed_4           conda-forge
    numpy:           1.21.2-py39h7eed0ac_0    conda-forge
    openssl:         1.1.1l-h0d85af4_0        conda-forge
    pandas:          1.3.2-py39h4d6be9b_0     conda-forge
    panphlan:        3.1-py_0                 local      
    perl:            5.32.1-0_h0d85af4_perl5  conda-forge
    pip:             21.2.4-pyhd8ed1ab_0      conda-forge
    python:          3.9.7-hd187cdc_0_cpython conda-forge
    python-dateutil: 2.8.2-pyhd8ed1ab_0       conda-forge
    python_abi:      3.9-2_cp39               conda-forge
    pytz:            2021.1-pyhd8ed1ab_0      conda-forge
    readline:        8.1-h05e3726_0           conda-forge
    samtools:        1.13-h7596a89_0          bioconda   
    scipy:           1.7.1-py39h056f1c0_0     conda-forge
    setuptools:      57.4.0-py39h6e9494a_0    conda-forge
    six:             1.16.0-pyh6c4a22f_0      conda-forge
    sqlite:          3.36.0-h23a322b_0        conda-forge
    tbb:             2020.2-h940c156_4        conda-forge
    tk:              8.6.11-h5dbffcc_1        conda-forge
    tzdata:          2021a-he74cb21_1         conda-forge
    wheel:           0.37.0-pyhd8ed1ab_1      conda-forge
    xz:              5.2.5-haf1e3a3_1         conda-forge
    zlib:            1.2.11-h7795811_1010     conda-forge
    zstd:            1.4.9-h582d3a0_0         conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/panphlan_1630857603952/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_
export SRC_DIR=/Users/runner/conda/conda-bld/panphlan_1630857603952/test_tmp
usage: panphlan_download_pangenome.py [-h] -i INPUT_NAME -o OUTPUT [-v]
                                      [--retry RETRY] [--wait WAIT]

optional arguments:
  -h, --help            show this help message and exit
  -o OUTPUT, --output OUTPUT
                        output location
  -v, --verbose         Show progress information
  --retry RETRY         Number of retry in pangenome download. Default is 5
  --wait WAIT           Number of second spend waiting between download
                        retries. Default 60

required arguments:
  -i INPUT_NAME, --input_name INPUT_NAME
                        Name of species to download
usage: panphlan_map.py [-h] -i INPUT --indexes INDEXES -p PANGENOME -o OUTPUT
                       [--tmp TMP] [--bt2 BT2] [-b OUT_BAM] [--nproc NPROC]
                       [--min_read_length MIN_READ_LENGTH]
                       [--th_mismatches TH_MISMATCHES] [-m SAM_MEMORY]
                       [--fasta] [-v]

optional arguments:
  -h, --help            show this help message and exit
  --tmp TMP             Location used for tmp files
  --bt2 BT2             Additional bowtie2 mapping options, separated by
                        slash: /-D/20/-R/3/, default: -bt2 /--very-sensitive/
  -b OUT_BAM, --out_bam OUT_BAM
                        Get BAM output file
  --nproc NPROC         Maximum number of processors to use. Default is 12 or
                        a lower number of available processors.
  --min_read_length MIN_READ_LENGTH
                        Minimum read length, default 70
  --th_mismatches TH_MISMATCHES
                        Number of mismatches to filter (bam)
  -m SAM_MEMORY, --sam_memory SAM_MEMORY
                        Maximum amount of memory for Samtools (in Gb). Default
                        4
  --fasta               Read are fasta format. By default considered as fastq
  -v, --verbose         Show progress information

required arguments:
  -i INPUT, --input INPUT
                        Metagenomic sample to map
  --indexes INDEXES     Bowtie2 indexes path and file prefix
  -p PANGENOME, --pangenome PANGENOME
                        Path to pangenome tsv file exported from ChocoPhlAn
  -o OUTPUT, --output OUTPUT
                        Path to output file
usage: panphlan_profiling.py [-h] -p PANGENOME [-i I_DNA]
                             [--i_covmat I_COVMAT] [--o_matrix O_MATRIX]
                             [--o_covmat O_COVMAT]
                             [--o_covplot_normed O_COVPLOT_NORMED]
                             [--o_idx DNA_INDEX_FILE]
                             [--min_coverage MIN_COVERAGE]
                             [--left_max LEFT_MAX] [--right_min RIGHT_MIN]
                             [--th_non_present TH_NON_PRESENT]
                             [--th_present TH_PRESENT]
                             [--th_multicopy TH_MULTICOPY]
                             [--strain_similarity_perc SIMILARITY_PERCENTAGE]
                             [--i_rna INPUT_RNA_FOLDER]
                             [--sample_pairs DNA_RNA_MAPPING]
                             [--rna_max_zeros RNA_MAX_ZEROES]
                             [--rna_norm_percentile RNA_NORM_PERCENTILE]
                             [--o_rna RNA_EXPRS_FILE] [--add_ref] [-v]
                             [--func_annot FUNC_ANNOT] [-f FIELD]

optional arguments:
  -h, --help            show this help message and exit
  -i I_DNA, --i_dna I_DNA
                        Input directory of panphlan_map.py results or text
                        file with
  --i_covmat I_COVMAT   Path to precomputed coverage matrix
  --o_matrix O_MATRIX   Path for presence/absence matrix output
  --o_covmat O_COVMAT   Write raw gene-family coverage matrix in provided file
  --o_covplot_normed O_COVPLOT_NORMED
                        Filename for normalized gene-family coverage plot.
  --o_idx DNA_INDEX_FILE
                        Write gene-family plateau definitions (1, -1, -2, -3)
  --min_coverage MIN_COVERAGE
                        Minimum coverage threshold, default: 2X
  --left_max LEFT_MAX   Strain presence/absence plateau curve threshold: left
                        max [1.25]
  --right_min RIGHT_MIN
                        Strain presence/absence plateau curve threshold: right
                        min [0.75]
  --th_non_present TH_NON_PRESENT
                        Gene families threshold: not present if lower
  --th_present TH_PRESENT
                        Gene families threshold: present if higher
  --th_multicopy TH_MULTICOPY
                        Gene families threshold: multicopy if higher
  --strain_similarity_perc SIMILARITY_PERCENTAGE
                        Minimum threshold (percentage) for genome length to
                        add a reference genome to presence/absence matrix
                        (default: 50).
  --i_rna INPUT_RNA_FOLDER
                        RNA-seq: input directory of RNA mapping results
                        SAMPLE_RNA.csv.bz2
  --sample_pairs DNA_RNA_MAPPING
                        RNA-seq: list of DNA-RNA sequencing pairs from the
                        same biological sample.
  --rna_max_zeros RNA_MAX_ZEROES
                        Max accepted percent of zero coveraged gene-families
                        (default: <10 %).
  --rna_norm_percentile RNA_NORM_PERCENTILE
                        Percentile for normalizing RNA/DNA ratios
  --o_rna RNA_EXPRS_FILE
                        Write normalized gene-family transcription values
                        (RNA-seq).
  --add_ref             Add reference genomes to gene-family presence/absence
                        matrix.
  -v, --verbose         Show progress information
  --func_annot FUNC_ANNOT
                        Path to file mapping UniRef IDs to GO/KEGG/...
                        annotation for functional characterization
  -f FIELD, --field FIELD
                        Field in the annotation file that must be added to the
                        presence/absence matrix

required arguments:
  -p PANGENOME, --pangenome PANGENOME
                        Path to pangenome tsv file

Resource usage statistics from testing panphlan:
   Process count: 4
   CPU time: Sys=0:00:00.1, User=0:00:00.2
   Memory: 26.9M
   Disk usage: 16B
   Time elapsed: 0:00:06.1


TEST END: panphlan-3.1-py_0.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


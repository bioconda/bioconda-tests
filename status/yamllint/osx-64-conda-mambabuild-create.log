Updating build index: /Users/runner/conda/conda-bld

TEST START: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmprx8_qpkp/noarch/yamllint-1.26.3-pyhd8ed1ab_0.tar.bz2
Reloading output folder: /Users/runner/conda/conda-bld
  Package              Version  Build               Channel                                                                   Size
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

  + attrs               21.2.0  pyhd8ed1ab_0        conda-forge/noarch                                                      Cached
  + ca-certificates  2021.10.8  h033912b_0          conda-forge/osx-64                                                      Cached
  + coverage             6.0.2  py39h89e85a6_0      conda-forge/osx-64                                                      281 KB
  + iniconfig            1.1.1  pyh9f0ad1d_0        conda-forge/noarch                                                        8 KB
  + libcxx              12.0.1  habf9029_0          conda-forge/osx-64                                                      Cached
  + libffi               3.4.2  he49afe7_4          conda-forge/osx-64                                                      Cached
  + libzlib             1.2.11  h9173be1_1013       conda-forge/osx-64                                                      Cached
  + more-itertools      8.10.0  pyhd8ed1ab_0        conda-forge/noarch                                                       44 KB
  + ncurses                6.2  h2e338ed_4          conda-forge/osx-64                                                      Cached
  + openssl              3.0.0  h0d85af4_1          conda-forge/osx-64                                                      Cached
  + packaging             21.0  pyhd8ed1ab_0        conda-forge/noarch                                                      Cached
  + pathspec             0.9.0  pyhd8ed1ab_0        conda-forge/noarch                                                       31 KB
  + pip                 21.3.1  pyhd8ed1ab_0        conda-forge/noarch                                                      Cached
  + pluggy               1.0.0  py39h6e9494a_1      conda-forge/osx-64                                                       25 KB
  + py                  1.10.0  pyhd3deb0d_0        conda-forge/noarch                                                       73 KB
  + pyparsing            2.4.7  pyh9f0ad1d_0        conda-forge/noarch                                                      Cached
  + pytest               6.2.5  py39h6e9494a_0      conda-forge/osx-64                                                      432 KB
  + pytest-cov           3.0.0  pyhd8ed1ab_0        conda-forge/noarch                                                       21 KB
  + python               3.9.7  h38b4d05_3_cpython  conda-forge/osx-64                                                       13 MB
  + python_abi             3.9  2_cp39              conda-forge/osx-64                                                      Cached
  + pyyaml                 6.0  py39h89e85a6_0      conda-forge/osx-64                                                      Cached
  + readline               8.1  h05e3726_0          conda-forge/osx-64                                                      Cached
  + setuptools          58.2.0  py39h6e9494a_0      conda-forge/osx-64                                                      Cached
  + sqlite              3.36.0  h23a322b_2          conda-forge/osx-64                                                      Cached
  + tk                  8.6.11  h5dbffcc_1          conda-forge/osx-64                                                      Cached
  + toml                0.10.2  pyhd8ed1ab_0        conda-forge/noarch                                                       18 KB
  + tomli                1.2.1  pyhd8ed1ab_0        conda-forge/noarch                                                       15 KB
  + tzdata               2021e  he74cb21_0          conda-forge/noarch                                                      Cached
  + wheel               0.37.0  pyhd8ed1ab_1        conda-forge/noarch                                                      Cached
  + xz                   5.2.5  haf1e3a3_1          conda-forge/osx-64                                                      Cached
  + yaml                 0.2.5  haf1e3a3_0          conda-forge/osx-64                                                      Cached
  + yamllint            1.26.3  pyhd8ed1ab_0        /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmprx8_qpkp/noarch      72 KB
  + zlib                1.2.11  h9173be1_1013       conda-forge/osx-64                                                      Cached

  Summary:

  Install: 33 packages

  Total download: 14 MB

────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────


## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/yamllint_1635057119626/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_


The following NEW packages will be INSTALLED:

    attrs:           21.2.0-pyhd8ed1ab_0      conda-forge                                                        
    ca-certificates: 2021.10.8-h033912b_0     conda-forge                                                        
    coverage:        6.0.2-py39h89e85a6_0     conda-forge                                                        
    iniconfig:       1.1.1-pyh9f0ad1d_0       conda-forge                                                        
    libcxx:          12.0.1-habf9029_0        conda-forge                                                        
    libffi:          3.4.2-he49afe7_4         conda-forge                                                        
    libzlib:         1.2.11-h9173be1_1013     conda-forge                                                        
    more-itertools:  8.10.0-pyhd8ed1ab_0      conda-forge                                                        
    ncurses:         6.2-h2e338ed_4           conda-forge                                                        
    openssl:         3.0.0-h0d85af4_1         conda-forge                                                        
    packaging:       21.0-pyhd8ed1ab_0        conda-forge                                                        
    pathspec:        0.9.0-pyhd8ed1ab_0       conda-forge                                                        
    pip:             21.3.1-pyhd8ed1ab_0      conda-forge                                                        
    pluggy:          1.0.0-py39h6e9494a_1     conda-forge                                                        
    py:              1.10.0-pyhd3deb0d_0      conda-forge                                                        
    pyparsing:       2.4.7-pyh9f0ad1d_0       conda-forge                                                        
    pytest:          6.2.5-py39h6e9494a_0     conda-forge                                                        
    pytest-cov:      3.0.0-pyhd8ed1ab_0       conda-forge                                                        
    python:          3.9.7-h38b4d05_3_cpython conda-forge                                                        
    python_abi:      3.9-2_cp39               conda-forge                                                        
    pyyaml:          6.0-py39h89e85a6_0       conda-forge                                                        
    readline:        8.1-h05e3726_0           conda-forge                                                        
    setuptools:      58.2.0-py39h6e9494a_0    conda-forge                                                        
    sqlite:          3.36.0-h23a322b_2        conda-forge                                                        
    tk:              8.6.11-h5dbffcc_1        conda-forge                                                        
    toml:            0.10.2-pyhd8ed1ab_0      conda-forge                                                        
    tomli:           1.2.1-pyhd8ed1ab_0       conda-forge                                                        
    tzdata:          2021e-he74cb21_0         conda-forge                                                        
    wheel:           0.37.0-pyhd8ed1ab_1      conda-forge                                                        
    xz:              5.2.5-haf1e3a3_1         conda-forge                                                        
    yaml:            0.2.5-haf1e3a3_0         conda-forge                                                        
    yamllint:        1.26.3-pyhd8ed1ab_0      file:///var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmprx8_qpkp
    zlib:            1.2.11-h9173be1_1013     conda-forge                                                        

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/yamllint_1635057119626/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_
export SRC_DIR=/Users/runner/conda/conda-bld/yamllint_1635057119626/test_tmp
import: 'yamllint'
import: 'yamllint'
No broken requirements found.
usage: yamllint [-h] [-] [-c CONFIG_FILE | -d CONFIG_DATA]
                [-f {parsable,standard,colored,github,auto}] [-s]
                [--no-warnings] [-v]
                [FILE_OR_DIR ...]

A linter for YAML files. yamllint does not only check for syntax validity, but
for weirdnesses like key repetition and cosmetic problems such as lines
length, trailing spaces, indentation, etc.

positional arguments:
  FILE_OR_DIR           files to check

optional arguments:
  -h, --help            show this help message and exit
  -                     read from standard input
  -c CONFIG_FILE, --config-file CONFIG_FILE
                        path to a custom configuration
  -d CONFIG_DATA, --config-data CONFIG_DATA
                        custom configuration (as YAML source)
  -f {parsable,standard,colored,github,auto}, --format {parsable,standard,colored,github,auto}
                        format for parsing output
  -s, --strict          return non-zero exit code on warnings as well as
                        errors
  --no-warnings         output only error level problems
  -v, --version         show program's version number and exit
yamllint 1.26.3
============================= test session starts ==============================
platform darwin -- Python 3.9.7, pytest-6.2.5, py-1.10.0, pluggy-1.0.0
rootdir: $SRC_DIR
plugins: cov-3.0.0
collected 356 items

tests/test_cli.py ...........s.............F..                           [  7%]
tests/test_config.py ..................                                  [ 12%]
tests/test_linter.py .......                                             [ 14%]
tests/test_module.py ....                                                [ 16%]
tests/test_parser.py ...                                                 [ 16%]
tests/test_spec_examples.py ............................................ [ 29%]
.................................................                        [ 42%]
tests/test_syntax_errors.py .....                                        [ 44%]
tests/test_yamllint_directives.py ............                           [ 47%]
tests/rules/test_braces.py .........                                     [ 50%]
tests/rules/test_brackets.py .........                                   [ 52%]
tests/rules/test_colons.py ..........                                    [ 55%]
tests/rules/test_commas.py ........                                      [ 57%]
tests/rules/test_comments.py ............                                [ 61%]
tests/rules/test_comments_indentation.py ......                          [ 62%]
tests/rules/test_common.py .                                             [ 63%]
tests/rules/test_document_end.py ....                                    [ 64%]
tests/rules/test_document_start.py .....                                 [ 65%]
tests/rules/test_empty_lines.py ........                                 [ 67%]
tests/rules/test_empty_values.py .................                       [ 72%]
tests/rules/test_hyphens.py ...                                          [ 73%]
tests/rules/test_indentation.py ........................................ [ 84%]
....                                                                     [ 85%]
tests/rules/test_key_duplicates.py ...                                   [ 86%]
tests/rules/test_key_ordering.py .......F.                               [ 89%]
tests/rules/test_line_length.py ........                                 [ 91%]
tests/rules/test_new_line_at_end_of_file.py ..                           [ 92%]
tests/rules/test_new_lines.py ....                                       [ 93%]
tests/rules/test_octal_values.py ...                                     [ 94%]
tests/rules/test_quoted_strings.py ...........                           [ 97%]
tests/rules/test_trailing_spaces.py ...                                  [ 98%]
tests/rules/test_truthy.py .......                                       [100%]

=================================== FAILURES ===================================
___________________ CommandLineTestCase.test_run_with_locale ___________________

self = <tests.test_cli.CommandLineTestCase testMethod=test_run_with_locale>

    def test_run_with_locale(self):
        # check for availability of locale, otherwise skip the test
        # reset to default before running the test,
        # as the first two runs don't use setlocale()
        try:
            locale.setlocale(locale.LC_ALL, 'en_US.UTF-8')
        except locale.Error:
            self.skipTest('locale en_US.UTF-8 not available')
        locale.setlocale(locale.LC_ALL, (None, None))
    
        # C + en.yaml should fail
        with RunContext(self) as ctx:
            cli.run(('-d', 'rules: { key-ordering: enable }',
                     os.path.join(self.wd, 'en.yaml')))
        self.assertEqual(ctx.returncode, 1)
    
        # C + c.yaml should pass
        with RunContext(self) as ctx:
            cli.run(('-d', 'rules: { key-ordering: enable }',
                    os.path.join(self.wd, 'c.yaml')))
        self.assertEqual(ctx.returncode, 0)
    
        # the next two runs use setlocale() inside,
        # so we need to clean up afterwards
        self.addCleanup(locale.setlocale, locale.LC_ALL, (None, None))
    
        # en_US + en.yaml should pass
        with RunContext(self) as ctx:
            cli.run(('-d', 'locale: en_US.UTF-8\n'
                           'rules: { key-ordering: enable }',
                     os.path.join(self.wd, 'en.yaml')))
>       self.assertEqual(ctx.returncode, 0)
E       AssertionError: 1 != 0

tests/test_cli.py:374: AssertionError
_____________________ KeyOrderingTestCase.test_locale_case _____________________

self = <tests.rules.test_key_ordering.KeyOrderingTestCase testMethod=test_locale_case>

    def test_locale_case(self):
        self.addCleanup(locale.setlocale, locale.LC_ALL, (None, None))
        try:
            locale.setlocale(locale.LC_ALL, 'en_US.UTF-8')
        except locale.Error:
            self.skipTest('locale en_US.UTF-8 not available')
        conf = ('key-ordering: enable')
>       self.check('---\n'
                   't-shirt: 1\n'
                   'T-shirt: 2\n'
                   't-shirts: 3\n'
                   'T-shirts: 4\n', conf)

tests/rules/test_key_ordering.py:123: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/common.py:53: in check
    self.assertEqual(real_problems, expected_problems)
E   AssertionError: Lists differ: [3:1: wrong ordering of key "T-shirt" in m[82 chars]ing)] != []
E   
E   First list contains 2 additional elements.
E   First extra element 0:
E   3:1: wrong ordering of key "T-shirt" in mapping (key-ordering)
E   
E   + []
E   - [3:1: wrong ordering of key "T-shirt" in mapping (key-ordering),
E   -  5:1: wrong ordering of key "T-shirts" in mapping (key-ordering)]

---------- coverage: platform darwin, python 3.9.7-final-0 -----------
Name                                                                                                                                                                                                                                                                                                                                  Stmts   Miss  Cover
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$PREFIX/lib/python3.9/site-packages/yamllint/__init__.py                            8      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/__main__.py                            3      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/cli.py                               148      8    95%
$PREFIX/lib/python3.9/site-packages/yamllint/config.py                            113      8    93%
$PREFIX/lib/python3.9/site-packages/yamllint/linter.py                            138      5    96%
$PREFIX/lib/python3.9/site-packages/yamllint/parser.py                             94      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/__init__.py                      6      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/braces.py                       25      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/brackets.py                     25      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/colons.py                       19      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/commas.py                       18      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/comments.py                     20      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/comments_indentation.py         21      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/common.py                       35      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/document_end.py                 18      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/document_start.py               13      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/empty_lines.py                  30      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/empty_values.py                 14      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/hyphens.py                      12      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/indentation.py                 176      3    98%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/key_duplicates.py               24      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/key_ordering.py                 25      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/line_length.py                  39      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/new_line_at_end_of_file.py       7      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/new_lines.py                    13      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/octal_values.py                 25      1    96%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/quoted_strings.py               67      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/trailing_spaces.py              13      0   100%
$PREFIX/lib/python3.9/site-packages/yamllint/rules/truthy.py                       16      0   100%
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                                                                                                                                                                                                                                                  1165     25    98%

Required test coverage of 97% reached. Total coverage: 97.85%
=========================== short test summary info ============================
FAILED tests/test_cli.py::CommandLineTestCase::test_run_with_locale - Asserti...
FAILED tests/rules/test_key_ordering.py::KeyOrderingTestCase::test_locale_case
================== 2 failed, 353 passed, 1 skipped in 21.46s ===================

Leaving build/test directories:
  Work:
 /Users/runner/conda/conda-bld/work 
  Test:
 /Users/runner/conda/conda-bld/test_tmp 
Leaving build/test environments:
  Test:
source activate  /Users/runner/conda/conda-bld/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla 
  Build:
source activate  /Users/runner/conda/conda-bld/_build_env 



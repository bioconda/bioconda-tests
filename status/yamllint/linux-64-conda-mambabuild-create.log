Updating build index: /home/vsts/conda/conda-bld

TEST START: /tmp/tmp7mr7kd5u/noarch/yamllint-1.26.3-pyhd8ed1ab_0.tar.bz2
Reloading output folder: /home/vsts/conda/conda-bld

## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/yamllint_1637983587859/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla


The following NEW packages will be INSTALLED:

    _libgcc_mutex:    0.1-conda_forge           conda-forge            
    _openmp_mutex:    4.5-1_gnu                 conda-forge            
    attrs:            21.2.0-pyhd8ed1ab_0       conda-forge            
    bzip2:            1.0.8-h7f98852_4          conda-forge            
    ca-certificates:  2021.10.8-ha878542_0      conda-forge            
    coverage:         6.1.2-py310h6acc77f_0     conda-forge            
    iniconfig:        1.1.1-pyh9f0ad1d_0        conda-forge            
    ld_impl_linux-64: 2.36.1-hea4e1c9_2         conda-forge            
    libffi:           3.4.2-h7f98852_5          conda-forge            
    libgcc-ng:        11.2.0-h1d223b6_11        conda-forge            
    libgomp:          11.2.0-h1d223b6_11        conda-forge            
    libnsl:           2.0.0-h7f98852_0          conda-forge            
    libuuid:          2.32.1-h7f98852_1000      conda-forge            
    libzlib:          1.2.11-h36c2ea0_1013      conda-forge            
    more-itertools:   8.12.0-pyhd8ed1ab_0       conda-forge            
    ncurses:          6.2-h58526e2_4            conda-forge            
    openssl:          3.0.0-h7f98852_2          conda-forge            
    packaging:        21.3-pyhd8ed1ab_0         conda-forge            
    pathspec:         0.9.0-pyhd8ed1ab_0        conda-forge            
    pip:              21.3.1-pyhd8ed1ab_0       conda-forge            
    pluggy:           1.0.0-py310hff52083_2     conda-forge            
    py:               1.11.0-pyh6c4a22f_0       conda-forge            
    pyparsing:        3.0.6-pyhd8ed1ab_0        conda-forge            
    pytest:           6.2.5-py310hff52083_1     conda-forge            
    pytest-cov:       3.0.0-pyhd8ed1ab_0        conda-forge            
    python:           3.10.0-h543edf9_3_cpython conda-forge            
    python_abi:       3.10-2_cp310              conda-forge            
    pyyaml:           6.0-py310h6acc77f_3       conda-forge            
    readline:         8.1-h46c0cb4_0            conda-forge            
    setuptools:       59.2.0-py310hff52083_0    conda-forge            
    sqlite:           3.36.0-h9cd32fc_2         conda-forge            
    tk:               8.6.11-h27826a3_1         conda-forge            
    toml:             0.10.2-pyhd8ed1ab_0       conda-forge            
    tomli:            1.2.2-pyhd8ed1ab_0        conda-forge            
    tzdata:           2021e-he74cb21_0          conda-forge            
    wheel:            0.37.0-pyhd8ed1ab_1       conda-forge            
    xz:               5.2.5-h516909a_1          conda-forge            
    yaml:             0.2.5-h516909a_0          conda-forge            
    yamllint:         1.26.3-pyhd8ed1ab_0       file:///tmp/tmp7mr7kd5u
    zlib:             1.2.11-h36c2ea0_1013      conda-forge            

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/yamllint_1637983587859/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla
export SRC_DIR=/home/vsts/conda/conda-bld/yamllint_1637983587859/test_tmp
import: 'yamllint'
import: 'yamllint'
No broken requirements found.
usage: yamllint [-h] [-] [-c CONFIG_FILE | -d CONFIG_DATA]
                [-f {parsable,standard,colored,github,auto}] [-s]
                [--no-warnings] [-v]
                [FILE_OR_DIR ...]

A linter for YAML files. yamllint does not only check for syntax validity, but
for weirdnesses like key repetition and cosmetic problems such as lines
length, trailing spaces, indentation, etc.

positional arguments:
  FILE_OR_DIR           files to check

options:
  -h, --help            show this help message and exit
  -                     read from standard input
  -c CONFIG_FILE, --config-file CONFIG_FILE
                        path to a custom configuration
  -d CONFIG_DATA, --config-data CONFIG_DATA
                        custom configuration (as YAML source)
  -f {parsable,standard,colored,github,auto}, --format {parsable,standard,colored,github,auto}
                        format for parsing output
  -s, --strict          return non-zero exit code on warnings as well as
                        errors
  --no-warnings         output only error level problems
  -v, --version         show program's version number and exit
yamllint 1.26.3
============================= test session starts ==============================
platform linux -- Python 3.10.0, pytest-6.2.5, py-1.11.0, pluggy-1.0.0
rootdir: $SRC_DIR
plugins: cov-3.0.0
collected 356 items

tests/test_cli.py ..........................F.                           [  7%]
tests/test_config.py ..................                                  [ 12%]
tests/test_linter.py .......                                             [ 14%]
tests/test_module.py ....                                                [ 16%]
tests/test_parser.py ...                                                 [ 16%]
tests/test_spec_examples.py ............................................ [ 29%]
.................................................                        [ 42%]
tests/test_syntax_errors.py .....                                        [ 44%]
tests/test_yamllint_directives.py ............                           [ 47%]
tests/rules/test_braces.py .........                                     [ 50%]
tests/rules/test_brackets.py .........                                   [ 52%]
tests/rules/test_colons.py ..........                                    [ 55%]
tests/rules/test_commas.py ........                                      [ 57%]
tests/rules/test_comments.py ............                                [ 61%]
tests/rules/test_comments_indentation.py ......                          [ 62%]
tests/rules/test_common.py .                                             [ 63%]
tests/rules/test_document_end.py ....                                    [ 64%]
tests/rules/test_document_start.py .....                                 [ 65%]
tests/rules/test_empty_lines.py ........                                 [ 67%]
tests/rules/test_empty_values.py .................                       [ 72%]
tests/rules/test_hyphens.py ...                                          [ 73%]
tests/rules/test_indentation.py ........................................ [ 84%]
....                                                                     [ 85%]
tests/rules/test_key_duplicates.py ...                                   [ 86%]
tests/rules/test_key_ordering.py .........                               [ 89%]
tests/rules/test_line_length.py ........                                 [ 91%]
tests/rules/test_new_line_at_end_of_file.py ..                           [ 92%]
tests/rules/test_new_lines.py ....                                       [ 93%]
tests/rules/test_octal_values.py ...                                     [ 94%]
tests/rules/test_quoted_strings.py ...........                           [ 97%]
tests/rules/test_trailing_spaces.py ...                                  [ 98%]
tests/rules/test_truthy.py .......                                       [100%]

=================================== FAILURES ===================================
__________ CommandLineTestCase.test_run_with_user_global_config_file ___________

self = <tests.test_cli.CommandLineTestCase testMethod=test_run_with_user_global_config_file>

    @unittest.skipIf(os.environ.get('GITHUB_RUN_ID'), '$HOME not overridable')
    def test_run_with_user_global_config_file(self):
        home = os.path.join(self.wd, 'fake-home')
        dir = os.path.join(home, '.config', 'yamllint')
        os.makedirs(dir)
        config = os.path.join(dir, 'config')
    
        self.addCleanup(os.environ.update, HOME=os.environ['HOME'])
        os.environ['HOME'] = home
    
        with open(config, 'w') as f:
            f.write('rules: {trailing-spaces: disable}')
    
        with RunContext(self) as ctx:
            cli.run((os.path.join(self.wd, 'a.yaml'), ))
>       self.assertEqual(ctx.returncode, 0)
E       AssertionError: 1 != 0

tests/test_cli.py:315: AssertionError

---------- coverage: platform linux, python 3.10.0-final-0 -----------
Name                                                                                                                                                                                                                                                                                                                                   Stmts   Miss  Cover
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$PREFIX/lib/python3.10/site-packages/yamllint/__init__.py                            8      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/__main__.py                            3      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/cli.py                               148      8    95%
$PREFIX/lib/python3.10/site-packages/yamllint/config.py                            113      8    93%
$PREFIX/lib/python3.10/site-packages/yamllint/linter.py                            138      6    96%
$PREFIX/lib/python3.10/site-packages/yamllint/parser.py                             94      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/__init__.py                      6      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/braces.py                       25      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/brackets.py                     25      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/colons.py                       19      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/commas.py                       18      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/comments.py                     20      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/comments_indentation.py         21      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/common.py                       35      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/document_end.py                 18      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/document_start.py               13      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/empty_lines.py                  30      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/empty_values.py                 14      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/hyphens.py                      12      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/indentation.py                 178      2    99%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/key_duplicates.py               24      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/key_ordering.py                 25      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/line_length.py                  39      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/new_line_at_end_of_file.py       7      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/new_lines.py                    13      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/octal_values.py                 25      1    96%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/quoted_strings.py               67      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/trailing_spaces.py              13      0   100%
$PREFIX/lib/python3.10/site-packages/yamllint/rules/truthy.py                       16      0   100%
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                                                                                                                                                                                                                                                   1167     25    98%

Required test coverage of 97% reached. Total coverage: 97.86%
=========================== short test summary info ============================
FAILED tests/test_cli.py::CommandLineTestCase::test_run_with_user_global_config_file
======================== 1 failed, 355 passed in 15.44s ========================

Leaving build/test directories:
  Work:
 /home/vsts/conda/conda-bld/work 
  Test:
 /home/vsts/conda/conda-bld/test_tmp 
Leaving build/test environments:
  Test:
source activate  /home/vsts/conda/conda-bld/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh 
  Build:
source activate  /home/vsts/conda/conda-bld/_build_env 



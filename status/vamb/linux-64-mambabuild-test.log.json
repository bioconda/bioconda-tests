  Package                  Version  Build                 Channel                                   Size
──────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
──────────────────────────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex              0.1  conda_forge           conda-forge/linux-64                    Cached
  + _openmp_mutex              4.5  1_llvm                conda-forge/linux-64                      5 KB
  + bzip2                    1.0.8  h7f98852_4            conda-forge/linux-64                    Cached
  + c-ares                  1.17.2  h7f98852_0            conda-forge/linux-64                    Cached
  + ca-certificates      2021.5.30  ha878542_0            conda-forge/linux-64                    Cached
  + cffi                    1.14.6  py37hc58025e_0        conda-forge/linux-64                    225 KB
  + future                  0.18.2  py37h89c1867_3        conda-forge/linux-64                    714 KB
  + krb5                    1.19.2  hcc1bbae_0            conda-forge/linux-64                    Cached
  + ld_impl_linux-64        2.36.1  hea4e1c9_2            conda-forge/linux-64                    Cached
  + libblas                  3.9.0  8_mkl                 conda-forge/linux-64                     12 KB
  + libcblas                 3.9.0  8_mkl                 conda-forge/linux-64                     11 KB
  + libcurl                 7.78.0  h2574ce0_0            conda-forge/linux-64                    Cached
  + libdeflate                 1.7  h7f98852_5            conda-forge/linux-64                    Cached
  + libedit           3.1.20191231  he28a2e2_2            conda-forge/linux-64                    Cached
  + libev                     4.33  h516909a_1            conda-forge/linux-64                    Cached
  + libffi                     3.3  h58526e2_2            conda-forge/linux-64                    Cached
  + libgcc-ng               11.1.0  hc902ee8_8            conda-forge/linux-64                    Cached
  + liblapack                3.9.0  8_mkl                 conda-forge/linux-64                     11 KB
  + libnghttp2              1.43.0  h812cca2_0            conda-forge/linux-64                    Cached
  + libssh2                 1.10.0  ha56f1ee_0            conda-forge/linux-64                    Cached
  + libstdcxx-ng            11.1.0  h56837e0_8            conda-forge/linux-64                    Cached
  + llvm-openmp             12.0.1  h4bd325d_1            conda-forge/linux-64                      3 MB
  + mkl                     2020.4  h726a3e6_304          conda-forge/linux-64                    216 MB
  + ncurses                    6.2  h58526e2_4            conda-forge/linux-64                    Cached
  + ninja                   1.10.2  h4bd325d_0            conda-forge/linux-64                      2 MB
  + numpy                   1.21.2  py37h31617e3_0        conda-forge/linux-64                      6 MB
  + openssl                 1.1.1l  h7f98852_0            conda-forge/linux-64                    Cached
  + pip                     21.2.4  pyhd8ed1ab_0          conda-forge/noarch                      Cached
  + pycparser                 2.20  pyh9f0ad1d_2          conda-forge/noarch                      Cached
  + pysam                 0.16.0.1  py37h45aed0b_3        bioconda/linux-64                         3 MB
  + python                  3.7.10  hffdb5ce_100_cpython  conda-forge/linux-64                     57 MB
  + python_abi                 3.7  2_cp37m               conda-forge/linux-64                      4 KB
  + pytorch-cpu              1.6.0  cpu_py37hf072b7b_1    conda-forge/linux-64                     40 MB
  + readline                   8.1  h46c0cb4_0            conda-forge/linux-64                    Cached
  + setuptools              57.4.0  py37h89c1867_0        conda-forge/linux-64                    938 KB
  + sqlite                  3.36.0  h9cd32fc_0            conda-forge/linux-64                    Cached
  + tk                      8.6.11  h27826a3_1            conda-forge/linux-64                    Cached
  + vamb                     3.0.2  py37h73a75cf_1        /home/vsts/conda/conda-bld/linux-64     237 KB
  + wheel                   0.37.0  pyhd8ed1ab_1          conda-forge/noarch                      Cached
  + xz                       5.2.5  h516909a_1            conda-forge/linux-64                    Cached
  + zlib                    1.2.11  h516909a_1010         conda-forge/linux-64                    Cached

  Summary:

  Install: 41 packages

  Total download: 329 MB

──────────────────────────────────────────────────────────────────────────────────────────────────────────

Updating build index: /home/vsts/conda/conda-bld

TEST START: vamb-3.0.2-py37h73a75cf_1.tar.bz2

## Package Plan ##

  environment location: /home/vsts/conda/conda-bld/vamb_1630787855008/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeho


The following NEW packages will be INSTALLED:

    _libgcc_mutex:    0.1-conda_forge             conda-forge
    _openmp_mutex:    4.5-1_llvm                  conda-forge
    bzip2:            1.0.8-h7f98852_4            conda-forge
    c-ares:           1.17.2-h7f98852_0           conda-forge
    ca-certificates:  2021.5.30-ha878542_0        conda-forge
    cffi:             1.14.6-py37hc58025e_0       conda-forge
    future:           0.18.2-py37h89c1867_3       conda-forge
    krb5:             1.19.2-hcc1bbae_0           conda-forge
    ld_impl_linux-64: 2.36.1-hea4e1c9_2           conda-forge
    libblas:          3.9.0-8_mkl                 conda-forge
    libcblas:         3.9.0-8_mkl                 conda-forge
    libcurl:          7.78.0-h2574ce0_0           conda-forge
    libdeflate:       1.7-h7f98852_5              conda-forge
    libedit:          3.1.20191231-he28a2e2_2     conda-forge
    libev:            4.33-h516909a_1             conda-forge
    libffi:           3.3-h58526e2_2              conda-forge
    libgcc-ng:        11.1.0-hc902ee8_8           conda-forge
    liblapack:        3.9.0-8_mkl                 conda-forge
    libnghttp2:       1.43.0-h812cca2_0           conda-forge
    libssh2:          1.10.0-ha56f1ee_0           conda-forge
    libstdcxx-ng:     11.1.0-h56837e0_8           conda-forge
    llvm-openmp:      12.0.1-h4bd325d_1           conda-forge
    mkl:              2020.4-h726a3e6_304         conda-forge
    ncurses:          6.2-h58526e2_4              conda-forge
    ninja:            1.10.2-h4bd325d_0           conda-forge
    numpy:            1.21.2-py37h31617e3_0       conda-forge
    openssl:          1.1.1l-h7f98852_0           conda-forge
    pip:              21.2.4-pyhd8ed1ab_0         conda-forge
    pycparser:        2.20-pyh9f0ad1d_2           conda-forge
    pysam:            0.16.0.1-py37h45aed0b_3     bioconda   
    python:           3.7.10-hffdb5ce_100_cpython conda-forge
    python_abi:       3.7-2_cp37m                 conda-forge
    pytorch-cpu:      1.6.0-cpu_py37hf072b7b_1    conda-forge
    readline:         8.1-h46c0cb4_0              conda-forge
    setuptools:       57.4.0-py37h89c1867_0       conda-forge
    sqlite:           3.36.0-h9cd32fc_0           conda-forge
    tk:               8.6.11-h27826a3_1           conda-forge
    vamb:             3.0.2-py37h73a75cf_1        local      
    wheel:            0.37.0-pyhd8ed1ab_1         conda-forge
    xz:               5.2.5-h516909a_1            conda-forge
    zlib:             1.2.11-h516909a_1010        conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/home/vsts/conda/conda-bld/vamb_1630787855008/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeho
export SRC_DIR=/home/vsts/conda/conda-bld/vamb_1630787855008/test_tmp
import: 'vamb'
import: 'vamb'
usage: vamb outdir tnf_input rpkm_input [options]

Vamb: Variational autoencoders for metagenomic binning.

    Default use, good for most datasets:
    vamb --outdir out --fasta my_contigs.fna --bamfiles *.bam

    For advanced use and extensions of Vamb, check documentation of the package
    at https://github.com/RasmussenLab/vamb.

Help:
  -h, --help          print help and exit

Output (required):
  --outdir            output directory to create

TNF input (either fasta or all .npz files required):
  --fasta             path to fasta file
  --tnfs              path to .npz of TNF
  --names             path to .npz of names of sequences
  --lengths           path to .npz of seq lengths

RPKM input (either BAMs, JGI or .npz required):
  --bamfiles  [ ...]  paths to (multiple) BAM files
  --rpkm              path to .npz of RPKM
  --jgi               path to output of jgi_summarize_bam_contig_depths

IO options:
  -m                  ignore contigs shorter than this [100]
  -s                  ignore reads with alignment score below this [None]
  -z                  ignore reads with nucleotide identity below this [None]
  -p                  number of subprocesses to spawn [min(2, nbamfiles)]
  --norefcheck        skip reference name hashing check [False]
  --minfasta          minimum bin size to output as fasta [None = no files]

VAE options:
  -n  [ ...]          hidden neurons [Auto]
  -l                  latent neurons [32]
  -a                  alpha, weight of TNF versus depth loss [Auto]
  -b                  beta, capacity to learn [200.0]
  -d                  dropout [Auto]
  --cuda              use GPU to train & cluster [False]

Training options:
  -e                  epochs [500]
  -t                  starting batch size [256]
  -q [ [ ...]]        double batch size at epochs [25 75 150 300]
  -r                  learning rate [0.001]

Clustering options:
  -w                  size of window to count successes [200]
  -u                  minimum success in window [20]
  -i                  minimum cluster size [1]
  -c                  stop after c clusters [None = infinite]
  -o                  binsplit separator [None = no split]

Resource usage statistics from testing vamb:
   Process count: 1
   CPU time: Sys=0:00:00.0, User=-
   Memory: 3.6M
   Disk usage: 20B
   Time elapsed: 0:00:02.1


TEST END: vamb-3.0.2-py37h73a75cf_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.


  Package                 Version  Build                 Channel                                    Size
──────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
──────────────────────────────────────────────────────────────────────────────────────────────────────────

  + bzip2                   1.0.8  h0d85af4_4            conda-forge/osx-64                       Cached
  + c-ares                 1.17.2  h0d85af4_0            conda-forge/osx-64                       Cached
  + ca-certificates     2021.5.30  h033912b_0            conda-forge/osx-64                       Cached
  + cffi                   1.14.6  py37hda351d9_0        conda-forge/osx-64                       218 KB
  + future                 0.18.2  py37hf985489_3        conda-forge/osx-64                       716 KB
  + krb5                   1.19.2  hcfbf3a7_0            conda-forge/osx-64                       Cached
  + libblas                 3.9.0  8_mkl                 conda-forge/osx-64                        12 KB
  + libcblas                3.9.0  8_mkl                 conda-forge/osx-64                        11 KB
  + libcurl                7.78.0  hf45b732_0            conda-forge/osx-64                       Cached
  + libcxx                 12.0.1  habf9029_0            conda-forge/osx-64                       Cached
  + libdeflate                1.7  h35c211d_5            conda-forge/osx-64                       Cached
  + libedit          3.1.20191231  h0678c8f_2            conda-forge/osx-64                       Cached
  + libev                    4.33  haf1e3a3_1            conda-forge/osx-64                       Cached
  + libffi                    3.3  h046ec9c_2            conda-forge/osx-64                       Cached
  + liblapack               3.9.0  8_mkl                 conda-forge/osx-64                        11 KB
  + libnghttp2             1.43.0  h07e645a_0            conda-forge/osx-64                       Cached
  + libssh2                1.10.0  h52ee1ee_0            conda-forge/osx-64                       Cached
  + llvm-openmp            12.0.1  hda6cdc1_1            conda-forge/osx-64                       Cached
  + mkl                    2020.4  h08c4f10_301          conda-forge/osx-64                       145 MB
  + ncurses                   6.2  h2e338ed_4            conda-forge/osx-64                       Cached
  + ninja                  1.10.2  h9a9d8cb_0            conda-forge/osx-64                       107 KB
  + numpy                  1.21.2  py37haefe36b_0        conda-forge/osx-64                         6 MB
  + openssl                1.1.1l  h0d85af4_0            conda-forge/osx-64                       Cached
  + pip                    21.2.4  pyhd8ed1ab_0          conda-forge/noarch                       Cached
  + pycparser                2.20  pyh9f0ad1d_2          conda-forge/noarch                       Cached
  + pysam                0.16.0.1  py37h505b978_3        bioconda/osx-64                            2 MB
  + python                 3.7.10  h7728216_100_cpython  conda-forge/osx-64                        24 MB
  + python_abi                3.7  2_cp37m               conda-forge/osx-64                         4 KB
  + pytorch-cpu             1.6.0  cpu_py37hdb6b5e6_1    conda-forge/osx-64                        54 MB
  + readline                  8.1  h05e3726_0            conda-forge/osx-64                       Cached
  + setuptools             57.4.0  py37hf985489_0        conda-forge/osx-64                       963 KB
  + sqlite                 3.36.0  h23a322b_0            conda-forge/osx-64                       Cached
  + tk                     8.6.11  h5dbffcc_1            conda-forge/osx-64                       Cached
  + vamb                    3.0.2  py37h819e570_1        /Users/runner/conda/conda-bld/osx-64     219 KB
  + wheel                  0.37.0  pyhd8ed1ab_1          conda-forge/noarch                       Cached
  + xz                      5.2.5  haf1e3a3_1            conda-forge/osx-64                       Cached
  + zlib                   1.2.11  h7795811_1010         conda-forge/osx-64                       Cached

  Summary:

  Install: 37 packages

  Total download: 233 MB

──────────────────────────────────────────────────────────────────────────────────────────────────────────

Updating build index: /Users/runner/conda/conda-bld

TEST START: vamb-3.0.2-py37h819e570_1.tar.bz2

## Package Plan ##

  environment location: /Users/runner/conda/conda-bld/vamb_1630787981047/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac


The following NEW packages will be INSTALLED:

    bzip2:           1.0.8-h0d85af4_4            conda-forge
    c-ares:          1.17.2-h0d85af4_0           conda-forge
    ca-certificates: 2021.5.30-h033912b_0        conda-forge
    cffi:            1.14.6-py37hda351d9_0       conda-forge
    future:          0.18.2-py37hf985489_3       conda-forge
    krb5:            1.19.2-hcfbf3a7_0           conda-forge
    libblas:         3.9.0-8_mkl                 conda-forge
    libcblas:        3.9.0-8_mkl                 conda-forge
    libcurl:         7.78.0-hf45b732_0           conda-forge
    libcxx:          12.0.1-habf9029_0           conda-forge
    libdeflate:      1.7-h35c211d_5              conda-forge
    libedit:         3.1.20191231-h0678c8f_2     conda-forge
    libev:           4.33-haf1e3a3_1             conda-forge
    libffi:          3.3-h046ec9c_2              conda-forge
    liblapack:       3.9.0-8_mkl                 conda-forge
    libnghttp2:      1.43.0-h07e645a_0           conda-forge
    libssh2:         1.10.0-h52ee1ee_0           conda-forge
    llvm-openmp:     12.0.1-hda6cdc1_1           conda-forge
    mkl:             2020.4-h08c4f10_301         conda-forge
    ncurses:         6.2-h2e338ed_4              conda-forge
    ninja:           1.10.2-h9a9d8cb_0           conda-forge
    numpy:           1.21.2-py37haefe36b_0       conda-forge
    openssl:         1.1.1l-h0d85af4_0           conda-forge
    pip:             21.2.4-pyhd8ed1ab_0         conda-forge
    pycparser:       2.20-pyh9f0ad1d_2           conda-forge
    pysam:           0.16.0.1-py37h505b978_3     bioconda   
    python:          3.7.10-h7728216_100_cpython conda-forge
    python_abi:      3.7-2_cp37m                 conda-forge
    pytorch-cpu:     1.6.0-cpu_py37hdb6b5e6_1    conda-forge
    readline:        8.1-h05e3726_0              conda-forge
    setuptools:      57.4.0-py37hf985489_0       conda-forge
    sqlite:          3.36.0-h23a322b_0           conda-forge
    tk:              8.6.11-h5dbffcc_1           conda-forge
    vamb:            3.0.2-py37h819e570_1        local      
    wheel:           0.37.0-pyhd8ed1ab_1         conda-forge
    xz:              5.2.5-haf1e3a3_1            conda-forge
    zlib:            1.2.11-h7795811_1010        conda-forge

Preparing transaction: ...working... done
Verifying transaction: ...working... done
Executing transaction: ...working... done
export PREFIX=/Users/runner/conda/conda-bld/vamb_1630787981047/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac
export SRC_DIR=/Users/runner/conda/conda-bld/vamb_1630787981047/test_tmp
import: 'vamb'
import: 'vamb'
usage: vamb outdir tnf_input rpkm_input [options]

Vamb: Variational autoencoders for metagenomic binning.

    Default use, good for most datasets:
    vamb --outdir out --fasta my_contigs.fna --bamfiles *.bam

    For advanced use and extensions of Vamb, check documentation of the package
    at https://github.com/RasmussenLab/vamb.

Help:
  -h, --help          print help and exit

Output (required):
  --outdir            output directory to create

TNF input (either fasta or all .npz files required):
  --fasta             path to fasta file
  --tnfs              path to .npz of TNF
  --names             path to .npz of names of sequences
  --lengths           path to .npz of seq lengths

RPKM input (either BAMs, JGI or .npz required):
  --bamfiles  [ ...]  paths to (multiple) BAM files
  --rpkm              path to .npz of RPKM
  --jgi               path to output of jgi_summarize_bam_contig_depths

IO options:
  -m                  ignore contigs shorter than this [100]
  -s                  ignore reads with alignment score below this [None]
  -z                  ignore reads with nucleotide identity below this [None]
  -p                  number of subprocesses to spawn [min(3, nbamfiles)]
  --norefcheck        skip reference name hashing check [False]
  --minfasta          minimum bin size to output as fasta [None = no files]

VAE options:
  -n  [ ...]          hidden neurons [Auto]
  -l                  latent neurons [32]
  -a                  alpha, weight of TNF versus depth loss [Auto]
  -b                  beta, capacity to learn [200.0]
  -d                  dropout [Auto]
  --cuda              use GPU to train & cluster [False]

Training options:
  -e                  epochs [500]
  -t                  starting batch size [256]
  -q [ [ ...]]        double batch size at epochs [25 75 150 300]
  -r                  learning rate [0.001]

Clustering options:
  -w                  size of window to count successes [200]
  -u                  minimum success in window [20]
  -i                  minimum cluster size [1]
  -c                  stop after c clusters [None = infinite]
  -o                  binsplit separator [None = no split]

Resource usage statistics from testing vamb:
   Process count: 3
   CPU time: Sys=0:00:00.2, User=0:00:00.3
   Memory: 48.8M
   Disk usage: 16B
   Time elapsed: 0:00:14.6


TEST END: vamb-3.0.2-py37h819e570_1.tar.bz2
--dirty flag and --keep-old-work not specified. Removing build/test folder after successful build/test.

